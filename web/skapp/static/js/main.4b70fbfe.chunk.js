(this.webpackJsonpskyspaces=this.webpackJsonpskyspaces||[]).push([[0],{1044:function(e,t){},1116:function(e,t){},1156:function(e,t,a){},1157:function(e,t,a){},1158:function(e,t,a){},1159:function(e,t,a){},1160:function(e,t,a){},1218:function(e,t,a){e.exports=a.p+"static/media/SkySpaces_g.531bd028.png"},1219:function(e,t,a){e.exports=a.p+"static/media/SkySpaces_logo_transparent_small.ffb0dfa9.png"},1220:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAApgAAAKYB3X3/OAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAHySURBVEiJpda9jw5RFAbw311biMhGIyuy7BYiEYVIBIn4HzRKChuJhkp0Oo1CNEqFAtnsSiSE3Y4aySZalmXj420IkZf4uoo5b8w7ZpixNzmZe88893nO/ZhzRs5ZzhnGcRVvkDvYVyziyICrbCnnLKU0hseYxHe80r6tw8bon845Xxh6G9GfjWjmsbkukiZDwiH8QB9rh94H6FYIHOxCXhG6Gxz7y/6RWMhYPFc6bE21vYznhrJztA6ZUtqF3S1I+7idc/7cBKgVwAI2tRCAk7jUVeAY9rUg72Pmb4BagZzzvOJGrbo1ncFxHGgxv4/zOecX+BS+j0OIuGL3FVdsKsYr2n/JJ0qZ4DDFxzuwpjPYgx0tV/AwAu1hrgpoOoMeei0EhlpKaRxfcs4fBr6RBuCVlNJyjS2llKZr8BMppRnF1r5OKV1OKY02rgBTisRXbT8Vez1EjnvYpkiY6zGNO7hZe8gd8s8Envh94OcUty/jWjnZdRaokM/jXfQHvqP/LVAhn4ut3qtI2RnPRdruLKDIUVXyNZgtkU9W60EXgYuBvVEinwnfM2xdVcHBUmAng/x6jJew5Q98l5KJnYF7G3MexfhpHXlZYAzLAf4W/YHNlgTOlK7kwBYx0RhUaXLTb8sDkcAUxf29ov6ewvZ/bekvRG5tokRTwywAAAAASUVORK5CYII="},1221:function(e,t,a){},1223:function(e,t,a){},1227:function(e,t){},1229:function(e,t){},1231:function(e,t,a){},1232:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(30),o=a.n(s),c=(a(844),a(845),a(17)),i=(a(601),a(325)),l=a(150),p=a(14);a(851);var u=Object(p.b)((function(e){return{isShowing:e.snLoader}}))((function(e){return r.a.createElement(r.a.Fragment,null,e.isShowing&&r.a.createElement("div",{className:"sn-loader-overlay"},r.a.createElement("div",{className:"loader"})))})),d=a(55),f=a(60),m=a(205),h=a(39),y=a(22),g=a(5),b=a.n(g),k=a(8),S=a(45),v=a(46),E=a(75),x=a(57),O=a(56),w=a(9),C=function(e){var t,a,n;return n={root:{flexGrow:1},content:(t={},Object(w.a)(t,e.breakpoints.up("sm"),{width:"calc(100% - ".concat(295,"px)"),marginLeft:295}),Object(w.a)(t,"backgroundColor",e.palette.whiteBgColor),Object(w.a)(t,"padding",e.spacing(3)),t),categoryFilterLogo:{fontSize:"20px"},publicContent:(a={},Object(w.a)(a,e.breakpoints.up("sm"),{width:"calc(100% - ".concat(0,"px)")}),Object(w.a)(a,"backgroundColor",e.palette.whiteBgColor),Object(w.a)(a,"padding",e.spacing(3)),a),appsIcon:{color:e.palette.linksColor},reOrdered:{color:e.palette.linksColor},lowPriorIcon:{color:e.palette.linksColor},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary},input:{display:"none"},sharedSpaceButn:{color:"white",borderRadius:10},formControl:{margin:e.spacing(1),minWidth:120,marginRight:20},icon:{color:e.palette.primary.main},menuColor:{color:e.palette.linksColor}},Object(w.a)(n,"sharedSpaceButn",{color:"white",borderRadius:10}),Object(w.a)(n,"most_main_grid_gallery",{padding:"0px",width:"100%",margin:0}),Object(w.a)(n,"main_grid_gallery",{margin:"auto"}),Object(w.a)(n,"MaintabsPaper_gallery",{paddingTop:"10px",paddingRight:"35px",paddingBottom:"40px",boxShadow:"none",backgroundColor:e.palette.whiteBgColor}),Object(w.a)(n,"tabsPaper_gallery",{padding:"0px",boxShadow:"none",backgroundColor:e.palette.whiteBgColor}),Object(w.a)(n,"gallery_title",{color:e.palette.linksColor,textAlign:"left",fontWeight:"500",fontSize:"20px"}),Object(w.a)(n,"gallery_subTitle",{color:e.palette.primary.main,textAlign:"left",fontSize:"14px"}),Object(w.a)(n,"image_grid_gallery",{padding:"2px !important",display:"flex",justifyContent:"center",alignItems:"flex-end"}),Object(w.a)(n,"gallery_title_btns_grid",{display:"flex",alignItems:"center",flexWrap:"wrap"}),Object(w.a)(n,"gallery_title_head_Alltext",{background:"".concat(e.palette.lightGray),padding:"5px 15px",borderRadius:"5px",color:"".concat(e.palette.primary.textColor),fontSize:"13px"}),Object(w.a)(n,"gallery_title_head_Alltext_menu",{background:"".concat(e.palette.lightGray),padding:"15px 50px",borderRadius:"5px",color:"".concat(e.palette.primary.textColor),fontSize:"13px"}),Object(w.a)(n,"selected_count",{color:e.palette.linksColor}),Object(w.a)(n,"innerValue_All",{background:e.palette.spacesTabsCount,borderRadius:"100%",marginLeft:"7px",fontSize:"11px",padding:"3px",display:"inline-block",width:"25px",color:"".concat(e.palette.primary.main),textAlign:"center"}),Object(w.a)(n,"gallery_title_head_image_text",{background:"".concat(e.palette.lightGray),padding:"5px 15px",borderRadius:"5px",color:"".concat(e.palette.primary.textColor),fontSize:"13px",marginLeft:"15px"}),Object(w.a)(n,"menuverticalIcon_div",{background:"".concat(e.palette.lightGray),padding:"3px",borderRadius:"100%",marginLeft:"10px"}),Object(w.a)(n,"inner_image_icons",{position:"absolute",color:"white",paddingBottom:"10px"}),Object(w.a)(n,"titleBar_onSelect_img_grid_gallery",{marginBottom:"20px",background:"".concat(e.palette.lightGray)}),n},j=a(130),_=a.n(j),A=a(221),I=a.n(A),T=a(263),N=a.n(T),L=a(264),P=a.n(L),D=a(265),M=a.n(D),R=a(262),B=a.n(R),U=a(1284),F=a(522),K=a(420),z=a.n(K),H=a(794),Y=a.n(H),W=a(415),G=a(1273),J=a(220),V=a.n(J),Z=a(1279),X=a(1277),Q=a(1278),q=a(202),$=a.n(q),ee=a(1276),te=a(602),ae=a(1233),ne=r.a.forwardRef((function(e,t){return r.a.createElement(ae.a,Object.assign({direction:"up",ref:t},e))}));function re(e){return r.a.createElement(G.a,{open:e.open,onClose:e.onNo,TransitionComponent:ne,keepMounted:!0,maxWidth:"lg","aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(ee.a,{id:"alert-dialog-title"},e.title),r.a.createElement(X.a,null,r.a.createElement(Q.a,{id:"alert-dialog-description"},e.content)),r.a.createElement(Z.a,null,r.a.createElement(te.a,{onClick:e.onNo,autoFocus:!0,variant:"contained",color:"secondary",className:"btn-bg-color",startIcon:r.a.createElement(V.a,null)},"Cancel"),r.a.createElement(te.a,{onClick:e.onYes,autoFocus:!0,variant:"contained",color:"primary",className:"btn-bg-color",startIcon:r.a.createElement($.a,null)},"OK")))}var se=a(222),oe=a.n(se),ce=a(188),ie=a.n(ce),le=function(e){var t=[];return null!=e&&(t=Array.isArray(e)?e.map((function(e){return e.toLowerCase()})):[e.toLowerCase()]),JSON.parse(JSON.stringify(t))},pe=function(e){if(null!=e){var t={};return e.forEach((function(e){t[e]={label:e}})),t}},ue="var(--app-bg-color)",de=localStorage,fe="https://core.blockstack.org/v1/names",me="https://siasky.net/",he=a(89),ye="https://gaia.blockstack.org/hub",ge="skhub/skylink/data/",be="skhub/skylink/skylinkIdx.json",ke="skhub/skyspaces/",Se="skhub/skyspaces/skyspaceIdx.json",ve="skhub/history/history.json",Ee="skhub/settings/portals/portals.json",xe="skhub/skyspaces/idb/isOutOfSync",Oe="failed",we=["skhub/settings/usersetting.json",Ee],Ce=new he.AppConfig(["store_write","publish_data"]),je=new he.UserSession({appConfig:Ce}),_e=function(){return{version:"v1",createTS:new Date,lastUpdateTS:new Date,skhubIdList:[]}},Ae=function(){return{version:"v1",createTS:new Date,lastUpdateTS:new Date,skyspaceList:[]}},Ie=function(){return{version:"v1",createTS:new Date,lastUpdateTS:new Date,skyspace:"",skhubIdList:[]}},Te={version:"v1",createTS:new Date,lastUpdateTS:new Date,dataSyncPrefList:[{name:"Every 5 Minutes",value:5,desc:"Every 5 minutes Sync data with SkyDB (one read and write)"},{name:"Every 10 Minutes",value:10,desc:"Every 5 minutes Sync data with SkyDB (one read and write)"},{name:"Every 15 Minutes",value:15,desc:"Every 5 minutes Sync data with SkyDB (one read and write)"},{name:"Every 20 Minutes",value:20,desc:"Every 5 minutes Sync data with SkyDB (one read and write)"},{name:"Every 25 Minutes",value:25,desc:"Every 5 minutes Sync data with SkyDB (one read and write)"},{name:"Every 30 Minutes",value:30,desc:"Every 5 minutes Sync data with SkyDB (one read and write)"},{name:"RealTimeSync",value:0,desc:"Update SkySpaces metadata realtime on SkyDB as local changes are happening. This will cost you more since every change in SkySpace metadata will result in SkyDB write."}]},Ne={version:"v1",createTS:new Date,lastUpdateTS:new Date,portals:[{createTS:new Date,name:"SkynetHub.io",url:"https://skynethub.io/",type:"public",selected:1},{createTS:new Date,name:"SiaSky.net",url:"https://siasky.net/",type:"public",selected:0},{createTS:new Date,name:"skyportal.xyz",url:"https://skyportal.xyz",type:"public",selected:0}]},Le=a(419),Pe=a(544),De=a.n(Pe),Me=a(770),Re=a.n(Me),Be=(a(663),function(e){return{type:"ACT_TY_SET_UPLOAD_LIST",payload:e}}),Ue=a(204),Fe=a(170),Ke=a.n(Fe),ze=a(1291),He=a(826),Ye=a(445),We=a(785),Ge=a.n(We),Je=a(788),Ve=a.n(Je),Ze=a(786),Xe=a.n(Ze),Qe=a(790),qe=a.n(Qe),$e=a(315),et=a.n($e),tt=a(789),at=a.n(tt),nt=a(314),rt=a.n(nt),st=a(791),ot=a.n(st),ct=a(787),it=a.n(ct),lt=a(771),pt=a.n(lt),ut=(a(1017),a(3)),dt=function(e){return{spaceIcons:{color:e.palette.primary.main,fontSize:40,fontWeight:400},spaceName:{color:e.palette.primary.main,fontWeight:500},skylink:Object(w.a)({paddingLeft:"62px"},e.breakpoints.down("xs"),{paddingLeft:"0px !important"}),createAtTime:{color:e.palette.mediumGray,fontSize:13},status:{color:e.palette.linksColor,fontWeight:"bold"},tagsBg:{width:72,height:29,borderRadius:50,backgroundColor:e.palette.lightGreen,color:"black",paddingLeft:20,textAlign:"center",paddingRight:20,paddingTop:6,paddingBottom:6,marginLeft:15,fontSize:13,marginBottom:10},tagEditIcon:{color:e.palette.primary.main,fontSize:18},paperStyling:{padding:15,boxShadow:"0 0 10px rgba(0,0,0,.4)",borderRadius:"10px",backgroundColor:e.palette.headerBgColor}}},ft=a(162),mt=a.n(ft),ht=a(7),yt=a(147),gt=a.n(yt),bt=a(664),kt=a(102),St=function(e){Object(x.a)(a,e);var t=Object(O.a)(a);function a(){return Object(S.a)(this,a),t.apply(this,arguments)}return Object(v.a)(a,[{key:"render",value:function(){var e,t=this.props,a=t.app,n=t.classes;t.source;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},(null==this.props.hideTags||!this.props.hideTags)&&(null===(e=a.tags)||void 0===e?void 0:e.length)>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{paddingLeft:62}},r.a.createElement(kt.a,{variant:"span",className:n.status},"Tags")),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},a.tags.map((function(e,t){return r.a.createElement(kt.a,{variant:"span",className:n.tagsBg,key:t},e)}))))),null==this.props.hash&&r.a.createElement("div",{style:{marginLeft:"auto"}},(null==this.props.hideAdd||!1===this.props.hideAdd)&&r.a.createElement(bt.a,{title:"Add to other Spaces",arrow:!0},r.a.createElement(F.a,{onClick:this.props.onAdd},r.a.createElement(gt.a,{className:n.tagEditIcon}))),r.a.createElement(bt.a,{title:"Edit Skylink",arrow:!0},r.a.createElement(F.a,{onClick:this.props.onEdit},r.a.createElement(mt.a,{className:n.tagEditIcon}))),!1===this.props.hideDelete&&r.a.createElement(bt.a,{title:"Remove from this Space",arrow:!0},r.a.createElement(F.a,{onClick:this.props.onDelete,color:"secondary"},r.a.createElement(_.a,{className:n.tagEditIcon}))))))}}]),a}(r.a.Component),vt=Object(ht.a)(dt)(St),Et=function(e){return{type:"CHANGE_LOADER_STATE",payload:e}},xt=a(135),Ot=a.n(xt),wt=a(134),Ct=a.n(wt),jt=(a(773),a(1285),a(1287)),_t=a(40),At=function(){return{version:"v1",createTS:new Date,lastUpdateTS:new Date,skhubId:"",skylink:"",id:null,name:"",title:"",filename:"",description:"",type:null,contentLength:"",contentType:"",httpMetadata:"",redirect:!1,defaultPath:"",linkType:Tt,category:Tt,skyspaceList:[],tags:[],userId:"",permission:!1,ageRating:"",price:"",support:"",git_url:"",demo_url:"",developer:"",appStatus:"",blacklist:"",blacklistDate:"",blacklistReason:"",auth_code:"",fileKey:null}},It=function(){var e={};for(var t in At())At().hasOwnProperty(t)&&(e[t]=!1,e[t+".errorMsg"]="");return e},Tt=0,Nt=new he.AppConfig(["store_write","publish_data"]),Lt=(new he.UserSession({appConfig:Nt}),function(){var e=de.getItem("USER_SESSION");if(null!=e)return JSON.parse(e);var t=new he.AppConfig(["store_write","publish_data"]);return new he.UserSession({appConfig:t})}),Pt=a(394),Dt=a(438),Mt=a(1281),Rt=a(260),Bt=a(1305),Ut=Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_APPSTORE_HOST,Ft=function(e){return sr.dispatch(Et(!0)),{type:"FETCH_APPS",payload:e}},Kt=function(e){return sr.dispatch(Et(!0)),{type:"ACT_TY_FETCH_PUBLIC_APPS",payload:e}},zt=function(e){return sr.dispatch(Et(!1)),{type:"FETCH_APPS_SUCCESS",payload:e}},Ht=function(e){return{type:"ACT_TY_SET_APPS",payload:e}},Yt=function(e){return sr.dispatch(Et(!1)),{type:"FETCH_ALL_SKYLINKS",payload:e.session}},Wt=function(e){return sr.dispatch(Et(!0)),{type:"FETCH_SKYSPACE_APPS",payload:e}},Gt=a(390),Jt=a.n(Gt),Vt=a(1280),Zt=a(26),Xt=a(776),Qt=a(774),qt=a.n(Qt),$t=a(272),ea=a.n($t),ta=a(775),aa=function(e){return{type:"SET_DATA_SYNC_STATUS",payload:e}};Object(ta.extendPrototype)(ea.a),ea.a.config({driver:ea.a.INDEXEDDB,name:"SkyDB",version:1,description:"Skynet App Store"});var na=ea.a.createInstance({storeName:"SkySpaces"}),ra=function(){var e=Object(k.a)(b.a.mark((function e(t,a){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,na.setItem(t,a);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,a){return e.apply(this,arguments)}}(),sa=function(){var e=Object(k.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=null,e.prev=1,e.next=4,t.forEach((function(e){var t=Object.keys(e)[0],a=e[t];console.log(t+":"+a),ra(t,a)}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),oa=function(){var e=Object(k.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=null,e.prev=1,e.next=4,na.getItem(t);case 4:a=e.sent,console.log(a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:return e.abrupt("return",a);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),ca=function(){var e=Object(k.a)(b.a.mark((function e(t){var a,n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],n=[],r=0,e.prev=3,e.next=6,na.iterate((function(e,t,s){a.push(Object(w.a)({},t,e)),n.push(t),r=s})).then((function(){})).catch((function(e){a=[],n=[],r=0,console.log(e)}));case 6:e.next=13;break;case 8:e.prev=8,e.t0=e.catch(3),a=[],n=[],r=0;case 13:return e.abrupt("return",{recordCount:r,keys:n,result:a});case 14:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(t){return e.apply(this,arguments)}}(),ia=a(545),la=function(e){return Object(Bt.a)({url:e+"?format=concat",method:"HEAD",responseType:""}).pipe(Object(Rt.a)((function(e){var t={},a=e.xhr.getResponseHeader("content-type");t.contentType=a,console.log("contentType:"+a);var n=e.xhr.getResponseHeader("content-length");t.contentLength=n?qt()(Number(n)):"",console.log("contentLength:"+n);var r=e.xhr.getResponseHeader("Skynet-File-Metadata");return t.skynetFileMetadata=r,t})),Object(Vt.a)((function(e){return console.log("getSkylinkHeader::error: ",e),Object(Xt.a)(e)})))},pa=function(){var e=Object(k.a)(b.a.mark((function e(t,a){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.uploadFile(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ua=function(){var e=Object(k.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch((-1===document.location.origin.indexOf("localhost")?document.location.origin:me)+"/"+t).then((function(e){return e.json()}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),da=function(e){var t=JSON.stringify(e);return new File([t],"public"+new Date+".txt",{type:"text/plain",lastModified:new Date})},fa=function(){var e=Object(k.a)(b.a.mark((function e(t,a){var n,r,s,o,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ua(t);case 2:return n=e.sent,r=ds(n.data,a.addedSkapps,a.deletedSkapps),n.history[n.history.length-1].skylink=t,n.history.push({creationDate:new Date}),n.data=r,s=da(n),o=-1===document.location.origin.indexOf("localhost")?document.location.origin:me,e.next=11,new Zt.SkynetClient(o).uploadFile(s);case 11:if(!(c=e.sent)){e.next=14;break}return e.abrupt("return",{skylink:Object(Zt.parseSkylink)(c)});case 14:return e.abrupt("return",null);case 15:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ma=function(){var e,t,a=null===(e=sr.getState().snUserSetting)||void 0===e||null===(t=e.setting)||void 0===t?void 0:t.portal;return a=a&&""!==a.trim()?a:me},ha=function(){var e=Object(k.a)(b.a.mark((function e(t,a,n,r,s){var o,c,i,l;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!=(null===s||void 0===s?void 0:s.skydb)&&0!=(null===s||void 0===s?void 0:s.skydb)){e.next=15;break}return e.prev=1,e.next=4,ra(n,r);case 4:return e.next=6,ra(xe,!0);case 6:return sr.dispatch(aa(!0)),e.abrupt("return",!0);case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",!1);case 13:e.next=43;break;case 15:if(e.prev=15,o=new Zt.SkynetClient(ma()),null!=t&&null!=a){e.next=19;break}throw new Error("Invalid Keys");case 19:return e.next=21,ba(t,n);case 21:if(c=e.sent,(c?c.revision:0)+1,1==s.historyflag&&(i=c?c.data:null,r.prevSkylink=i),!1,1!=(null===s||void 0===s?void 0:s.encrypt)){e.next=34;break}return e.next=28,Object(ia.b)(a,t,JSON.stringify(r));case 28:return l=e.sent,e.next=31,o.db.setJSON(a,n,l);case 31:e.sent,e.next=37;break;case 34:return e.next=36,o.db.setJSON(a,n,r);case 36:e.sent;case 37:e.next=42;break;case 39:return e.prev=39,e.t1=e.catch(15),e.abrupt("return",!1);case 42:return e.abrupt("return",!0);case 43:case"end":return e.stop()}}),e,null,[[1,10],[15,39]])})));return function(t,a,n,r,s){return e.apply(this,arguments)}}(),ya=function(e){return Object(Zt.genKeyPairFromSeed)(e)},ga=function(){var e=Object(k.a)(b.a.mark((function e(t,a,n,r,s){var o,c,i,l;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,void 0!=(null===s||void 0===s?void 0:s.skydb)&&0!=(null===s||void 0===s?void 0:s.skydb)){e.next=16;break}return e.prev=2,e.next=5,oa(n);case 5:return o=e.sent,console.log("result"+o),e.abrupt("return",o);case 10:return e.prev=10,e.t0=e.catch(2),console.log("error.message "+e.t0.message),e.abrupt("return",null);case 14:e.next=33;break;case 16:if(c=new Zt.SkynetClient(ma()),null!=a){e.next=19;break}throw new Error("Invalid Keys");case 19:return e.next=21,c.db.getJSON(a,n);case 21:if(!(i=e.sent)){e.next=33;break}if(!s.getEntry){e.next=25;break}return e.abrupt("return",i);case 25:if(!t||1!=(null===s||void 0===s?void 0:s.decrypt)){e.next=32;break}return e.next=28,Object(ia.a)(t,a,i.data);case 28:return l=e.sent,e.abrupt("return",l);case 32:return e.abrupt("return",i.data);case 33:e.next=39;break;case 35:return e.prev=35,e.t1=e.catch(0),console.log("error.message "+e.t1.message),e.abrupt("return",null);case 39:return e.abrupt("return",null);case 40:case"end":return e.stop()}}),e,null,[[0,35],[2,10]])})));return function(t,a,n,r,s){return e.apply(this,arguments)}}(),ba=function(){var e=Object(k.a)(b.a.mark((function e(t,a,n){var r,s,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=new Zt.SkynetClient(ma()),null!=t){e.next=4;break}throw new Error("Invalid Keys");case 4:return e.next=6,r.registry.getEntry(t,a);case 6:return s=e.sent,o=s.entry,e.abrupt("return",o);case 11:return e.prev=11,e.t0=e.catch(0),console.log("error.message "+e.t0.message),e.abrupt("return",null);case 15:return e.abrupt("return",null);case 16:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,a,n){return e.apply(this,arguments)}}();function ka(e){return Jt.a.createHash("sha256").update(e+new Date).digest("base64").replace("/","+")}function Sa(e){return va.apply(this,arguments)}function va(){return(va=Object(k.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.next=3,t.listFiles((function(e){return a.push(e),!0}));case 3:return e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ea(e,t,a){return xa.apply(this,arguments)}function xa(){return(xa=Object(k.a)(b.a.mark((function e(t,a,n){var r,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=fs(t),e.t0=s,e.next="SKYID"===e.t0?4:"SKYDB_ID"===e.t0?6:(e.t0,8);break;case 4:case 6:return r=new Promise((function(e,t){e(a)})),e.abrupt("break",9);case 8:r=t.encryptContent(a,n);case 9:return e.next=11,r;case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oa(e,t,a){return wa.apply(this,arguments)}function wa(){return(wa=Object(k.a)(b.a.mark((function e(t,a,n){var r,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=fs(t),e.t0=s,e.next="SKYID"===e.t0?4:"SKYDB_ID"===e.t0?6:(e.t0,8);break;case 4:case 6:return r=new Promise((function(e,t){e(a)})),e.abrupt("break",9);case 8:r=t.decryptContent(a,n);case 9:return e.next=11,r;case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ca=function(){var e=Object(k.a)(b.a.mark((function e(t,a){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ga(null,t,a,null,{skydb:!0});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();function ja(e,t,a){var n,r;switch(fs(e)){case"SKYID":var s,o;if(null===a||void 0===a?void 0:a.publicKey)r=ga(null,a.publicKey,t,null,a).then((function(e){if(e)return e}));else r=ga(null===e||void 0===e||null===(s=e.person)||void 0===s?void 0:s.appPrivateKey,null===e||void 0===e||null===(o=e.person)||void 0===o?void 0:o.appPublicKey,t,null,a).then((function(e){if(e)return e}));break;case"SKYDB_ID":var c=ya(e.skydbseed),i=c.publicKey,l=c.privateKey;r=ga(l,i,t,null,{}).then((function(e){if(e)return e}));break;case"BLOCKSTACK_ID":default:var p={decrypt:null===(n=null===a||void 0===a?void 0:a.decrypt)||void 0===n||n};r=e.getFile(t,p).then((function(e){return JSON.parse(e)}))}return r.catch((function(e){return"does_not_exist"===e.code?null:e}))}function _a(e,t,a,n){var r,s,o,c;switch(a.hasOwnProperty("lastUpdateTS")&&(a.lastUpdateTS=new Date),fs(e)){case"SKYID":c=ha(null===e||void 0===e||null===(r=e.person)||void 0===r?void 0:r.appPublicKey,null===e||void 0===e||null===(s=e.person)||void 0===s?void 0:s.appPrivateKey,t,a,n);break;case"SKYDB_ID":var i=ya(e.skydbseed),l=i.publicKey,p=i.privateKey;c=ha(l,p,t,a,n);break;case"BLOCKSTACK_ID":default:var u={decrypt:null===(o=null===n||void 0===n?void 0:n.decrypt)||void 0===o||o};c=e.putFile(t,JSON.stringify(a),u)}return c.catch((function(e){if("precondition_failed_error"!==(null===e||void 0===e?void 0:e.code))throw e}))}function Aa(e,t,a){return Ia.apply(this,arguments)}function Ia(){return(Ia=Object(k.a)(b.a.mark((function e(t,a,n){var r,s,o,c,i,l,p;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=fs(t),e.t0=o,e.next="SKYID"===e.t0?4:"SKYDB_ID"===e.t0?6:(e.t0,9);break;case 4:return c=ha(null===t||void 0===t||null===(r=t.person)||void 0===r?void 0:r.appPublicKey,null===t||void 0===t||null===(s=t.person)||void 0===s?void 0:s.appPrivateKey,a,n,{skydb:!0}),e.abrupt("break",17);case 6:return i=ya(t.skydbseed),l=i.publicKey,p=i.privateKey,c=ha(l,p,a,n,{skydb:!0}),e.abrupt("break",17);case 9:return e.prev=9,e.next=12,Ta(t,a);case 12:e.next=16;break;case 14:e.prev=14,e.t1=e.catch(9);case 16:c=t.putFile(a,n,{encrypt:!1,dangerouslyIgnoreEtag:!0});case 17:c.catch((function(e){if("precondition_failed_error"!==(null===e||void 0===e?void 0:e.code))throw e}));case 18:case"end":return e.stop()}}),e,null,[[9,14]])})))).apply(this,arguments)}function Ta(e,t){var a,n,r;switch(fs(e)){case"SKYID":r=ha(null===e||void 0===e||null===(a=e.person)||void 0===a?void 0:a.appPublicKey,null===e||void 0===e||null===(n=e.person)||void 0===n?void 0:n.appPrivateKey,t,null,{});break;case"SKYDB_ID":var s=ya(e.skydbseed),o=s.publicKey,c=s.privateKey;r=ha(o,c,t,null,{});break;case"BLOCKSTACK_ID":default:r=e.deleteFile(t,{encrypt:!0})}return r}var Na=JSON.stringify({data:[{"skhub/skyspaces/skyspaceIdx.json":{version:"v1",createTS:"2020-11-27T23:43:59.415Z",lastUpdateTS:"2020-11-27T23:43:59.415Z",skyspaceList:["WelcomeSpace","SkynetSpace","Memes"]}},{"skhub/skyspaces/WelcomeSpace.json":{version:"v1",createTS:"2020-11-27T23:43:59.416Z",lastUpdateTS:"2020-11-27T23:43:59.416Z",skyspace:"WelcomeSpace",skhubIdList:[]}},{"skhub/skyspaces/SkynetSpace.json":{version:"v1",createTS:"2020-11-27T23:43:59.416Z",lastUpdateTS:"2020-11-27T23:43:59.416Z",skyspace:"SkynetSpace",skhubIdList:[]}},{"skhub/skyspaces/Memes.json":{version:"v1",createTS:"2020-11-27T23:43:59.416Z",lastUpdateTS:"2020-11-27T23:43:59.416Z",skyspace:"Memes",skhubIdList:[]}}]}),La=function(){var e=Object(k.a)(b.a.mark((function e(t){var a,n,r,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,oa("skhub/skyspaces/idb/lastSyncRevNo");case 3:if(!(a=e.sent)||null==a){e.next=8;break}return e.abrupt("return",!1);case 8:return e.next=10,ba(null===t||void 0===t||null===(n=t.person)||void 0===n?void 0:n.appPublicKey,"skhub/skyspaces/idb");case 10:if(!(r=e.sent)||"undefined"==r){e.next=15;break}return e.abrupt("return",!1);case 15:return s=JSON.parse(Na),e.next=18,sa(s.data);case 18:return e.next=20,ra("skhub/skyspaces/idb/lastSyncRevNo",{revision:"1"});case 20:return e.next=22,Pa(t);case 22:return e.abrupt("return",!0);case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(0),console.log("error"+e.t0);case 28:case"end":return e.stop()}}),e,null,[[0,25]])})));return function(t){return e.apply(this,arguments)}}(),Pa=function(){var e=Object(k.a)(b.a.mark((function e(t,a,n){var r,s,o,c,i,l,p,u,d,f,m,h;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ba(null===t||void 0===t||null===(r=t.person)||void 0===r?void 0:r.appPublicKey,"skhub/skyspaces/idb");case 3:return s=e.sent,o=s&&"undefined"!=s?s.revision:0,e.next=7,oa("skhub/skyspaces/idb/lastSyncRevNo");case 7:return c=e.sent,e.next=10,oa(xe);case 10:if(i=e.sent,l=c?c.revision:0,!(parseInt(o)>parseInt(l))){e.next=29;break}return e.next=15,ja(t,"skhub/skyspaces/idb",{skydb:!0});case 15:if(!(p=e.sent)||"undefined"==p||!p.db){e.next=23;break}return e.next=19,p.db.forEach((function(e){var t=Object.keys(e)[0],a=e[t];ra(t,a)}));case 19:return e.next=21,ra("skhub/skyspaces/idb/lastSyncRevNo",o);case 21:e.next=24;break;case 23:return e.abrupt("return",Oe);case 24:return e.next=26,ra(xe,!1);case 26:sr.dispatch(aa(!1)),e.next=55;break;case 29:if(!(i||parseInt(o)<parseInt(l))){e.next=54;break}return e.next=32,ca("SkySpaces");case 32:if(u=e.sent,d=u.recordCount,f=u.keys,m=u.result,(h={version:"v1",prevSkylink:"",recordCount:0,createTS:new Date,lastUpdateTS:new Date,db:[],keys:[]}).db=m,h.keys=f,h.recordCount=d,!s||"undefined"==s){e.next=45;break}return e.next=43,_a(t,"skhub/skyspaces/idb",h,{skydb:!0,historyflag:!0});case 43:e.next=47;break;case 45:return e.next=47,_a(t,"skhub/skyspaces/idb",h,{skydb:!0});case 47:return e.next=49,ra("skhub/skyspaces/idb/lastSyncRevNo",{revision:o+1});case 49:return e.next=51,ra(xe,!1);case 51:sr.dispatch(aa(!1)),e.next=55;break;case 54:console.log("Data is already in sync");case 55:e.next=60;break;case 57:return e.prev=57,e.t0=e.catch(0),e.abrupt("return",Oe);case 60:return e.abrupt("return","success");case 62:case"end":return e.stop()}}),e,null,[[0,57]])})));return function(t,a,n){return e.apply(this,arguments)}}(),Da=function(){var e=Object(k.a)(b.a.mark((function e(t,a,n){var r,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=n){e.next=2;break}return e.abrupt("return");case 2:return r=a.skhubId,!a||null!=a.skhubId&&""!==a.skhubId||(r=ka("BLOCKSTACK:"+n.profile.did+":"+a.skylink),a.skhubId=r),s=ge+r+".json",e.next=7,_a(t,s,a);case 7:return e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),Ma=function(){var e=Object(k.a)(b.a.mark((function e(t,a){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ja(t,be);case 2:if((n=e.sent)!==Oe){e.next=5;break}return e.abrupt("return",n);case 5:return n||(n=_e()),n.skhubIdList=Object(y.a)(new Set([].concat(Object(y.a)(n.skhubIdList),Object(y.a)(a)))),e.abrupt("return",_a(t,be,n));case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Ra=function(){var e=Object(k.a)(b.a.mark((function e(t,a,n){var r,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=n){e.next=2;break}return e.abrupt("return");case 2:return r=a.skhubId,!a||null!=a.skhubId&&""!==a.skhubId||(r=ka("BLOCKSTACK:"+n.profile.did+":"+a.skylink),a.skhubId=r),s=ge+r+".json",e.abrupt("return",_a(t,s,a).then((function(e){return e===Oe?e:ja(t,be)})).then((function(e){if(e===Oe)return e;if(e){if(e.skhubIdList.indexOf(r)>-1)return Oe}else e=_e();return e.skhubIdList.push(r),_a(t,be,e)})).then((function(e){return r})).catch((function(e){return Oe})));case 6:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),Ba=function(e){return ja(e,be).catch((function(e){return null}))},Ua=function(e,t){return ja(e,ge+t+".json").then((function(e){return e}))},Fa=function(e,t){return Ta(e,ge+t+".json").then((function(t){return ja(e,be)})).then((function(a){if(a&&a.skhubIdList.indexOf(t)>-1){var n=a.skhubIdList.indexOf(t);return a.skhubIdList.splice(n,1),_a(e,be,a)}return Oe})).catch((function(e){return Oe}))},Ka=function(){var e=Object(k.a)(b.a.mark((function e(t,a){var n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],a.map((function(e){var a=Ie();a.skyspace=e;var r=ke+e+".json";n.push(_a(t,r,a))})),e.next=4,Promise.all(n);case 4:return e.next=6,ja(t,Se);case 6:return(r=(r=e.sent)||Ae()).skyspaceList=Object(y.a)(new Set([].concat(Object(y.a)(r.skyspaceList),Object(y.a)(a)))),e.next=11,_a(t,Se,r);case 11:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),za=function(){var e=Object(k.a)(b.a.mark((function e(t,a,n){var r,s,o,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=ke+a+".json",e.next=4,ja(t,Se);case 4:if(s=e.sent){e.next=10;break}s=Ae(),null==n&&s.skyspaceList.push(a),e.next=24;break;case 10:if(!(s&&s.skyspaceList.indexOf(a)>-1)){e.next=19;break}if(null!=n){e.next=15;break}return e.abrupt("return",Oe);case 15:o=s.skyspaceList.indexOf(a),s.skyspaceList.splice(o,1);case 17:e.next=24;break;case 19:if(null!=n){e.next=23;break}s.skyspaceList.push(a),e.next=24;break;case 23:return e.abrupt("return",Oe);case 24:return e.next=26,_a(t,Se,s);case 26:if(null!=n){e.next=33;break}return(c=Ie()).skyspace=a,e.next=31,_a(t,r,c);case 31:e.next=35;break;case 33:return e.next=35,Ta(t,r);case 35:return e.abrupt("return","success");case 38:return e.prev=38,e.t0=e.catch(0),e.abrupt("return",Oe);case 41:case"end":return e.stop()}}),e,null,[[0,38]])})));return function(t,a,n){return e.apply(this,arguments)}}(),Ha=function(e,t,a){var n=ke+t+".json",r=ke+a+".json";return ja(e,Se).then((function(n){if(n&&n.skyspaceList.indexOf(t)>-1){var r=n.skyspaceList.indexOf(t);return n.skyspaceList.splice(r,1,a),_a(e,Se,n)}return Oe})).then((function(t){return t===Oe?Oe:ja(e,n)})).then((function(t){return null==t||t===Oe?Oe:(t.skyspace=a,_a(e,r,t))})).then((function(t){return Ta(e,n)})).catch((function(e){}))},Ya=function(e){return ja(e,Se).then((function(t){return t&&t.skyspaceList?t.skyspaceList:t&&"FailedDecryptionError"===t.name?Ta(e,Se).then((function(){return[]})):[]})).catch((function(e){return[]}))},Wa=function(){var e=Object(k.a)(b.a.mark((function e(t){var a,n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},e.next=3,Ya(t);case 3:return n=e.sent,r=[],n.forEach((function(e){r.push(Xa(t,e).then((function(t){a[e]=t.skhubIdList})))})),e.next=8,Promise.all(r);case 8:return e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ga=function(e,t,a){var n=[];return a.forEach((function(a){n.push(qa(e,a,t).catch((function(e){return""})))})),Promise.all(n).then((function(){}))},Ja=function(){var e=Object(k.a)(b.a.mark((function e(t,a,n){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],n.forEach((function(e){r.push(Qa(t,e,a).catch((function(e){return""})))})),e.next=4,Promise.all(r);case 4:return e.abrupt("return");case 5:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),Va=function(e,t){var a=[];return Ya(e).then((function(n){var r=[];return n.forEach((function(n){r.push(Xa(e,n).then((function(e){null!=e&&e.skhubIdList.indexOf(t)>-1&&a.push(n)})))})),Promise.all(r).then((function(){return a}))})).then((function(a){var n=!1;return Ba(e).then((function(e){return null!=e&&e.skhubIdList.includes(t)&&(n=!0),{skyspaceForSkhubIdList:a,isAppOwner:n}}))}))},Za=function(e,t){var a=[];return Xa(e,t).then((function(t){var n=t.skhubIdList;if(null==n)return[];var r=[];return n.forEach((function(t){r.push(Ua(e,t).then((function(e){a.push(e)})))})),Promise.all(r).then((function(){return a}))}))},Xa=function(e,t){return ja(e,ke+t+".json").then((function(e){return e}))},Qa=function(e,t,a){return Xa(e,t).then((function(n){var r=ke+t+".json";return a=Array.isArray(a)?a:[a],n.skhubIdList=Object(y.a)(new Set([].concat(Object(y.a)(n.skhubIdList),Object(y.a)(a)))),_a(e,r,n)}))},qa=function(e,t,a){return Xa(e,t).then((function(n){if(n&&n.skhubIdList.indexOf(a)>-1){var r=n.skhubIdList.indexOf(a);return n.skhubIdList.splice(r,1),_a(e,ke+t+".json",n)}return Oe})).catch((function(e){return Oe}))},$a=function(e){return ja(e,ve).then((function(t){return null==t?[]:t&&"FailedDecryptionError"===t.name?Ta(e,ve).then((function(){return[]})):t})).catch((function(e){return[]}))},en=function(){var e=Object(k.a)(b.a.mark((function e(t,a){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$a(t).then((function(e){null==e&&(e=[]),a.timestamp=new Date;var t=e.findIndex((function(e){var t=!1;return e.skhubId&&e.skhubId===a.skhubId&&(t=!0),t}));return t>-1?(e[t].savedToSkySpaces=a.savedToSkySpaces,e[t].skyspaces=a.skyspaces):e.push(a),e})).then((function(e){return _a(t,ve,e)})).catch((function(e){return e})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),tn=function(){var e=Object(k.a)(b.a.mark((function e(t,a){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_a(t,ve,a);case 2:return e.abrupt("return");case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),an=function(){var e=Object(k.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_a(t,ve,[]);case 2:return e.abrupt("return");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),nn=function(){var e=Object(k.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ja(t,"skhub/settings/usersetting.json");case 2:return a=e.sent,e.abrupt("return",a||{version:"v1",createTS:new Date,lastUpdateTS:new Date,setting:{portal:me,backupList:[],dataSyncPref:"Every 10 Minutes"}});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),rn=function(){var e=Object(k.a)(b.a.mark((function e(t,a){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_a(t,"skhub/settings/usersetting.json",a);case 2:return e.abrupt("return");case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),sn=function(){var e=Object(k.a)(b.a.mark((function e(t){var a,n,r,s,o,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=null,e.next=3,ja(t,"profile",{publicKey:t.skyid.userId,skydb:!0});case 3:return""==(n=e.sent)?console.log("Profile not found;, please check your connection and retry"):(r=JSON.parse(n),s=ya(t.skyid.seed),o=s.publicKey,c=s.privateKey,a={masterPublicKey:t.skyid.userId,appSeed:t.skyid.seed,appId:t.skyid.appId,appImg:t.skyid.appImg,appPublicKey:o,appPrivateKey:c,profile:{username:r.username,did:r.username,aboutme:r.aboutMe,location:r.location,avatar:r.avatar,profilePicture:r.profilePicture}}),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),on=function(){var e=Object(k.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ja(t,Ee);case 2:return null==(a=e.sent)?a=Ne:null!=a.portals&&0!==a.portals.length||(a.portals=Ne.portals),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),cn=function(e){return Te.dataSyncPrefList},ln=function(){var e=Object(k.a)(b.a.mark((function e(t,a){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_a(t,Ee,a);case 2:return e.abrupt("return");case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),pn=function(){var e=Object(k.a)(b.a.mark((function e(t){var a,n,r,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sa(t);case 2:return a=e.sent,n=[],r=[],a.forEach((function(e){-1===we.indexOf(e)&&n.push(ja(t,e).then((function(t){var a={path:e,contentStr:JSON.stringify(t)};r.push(a)})))})),e.next=8,Promise.all(n);case 8:return e.next=10,Ea(t,JSON.stringify(r));case 10:return s=e.sent,e.abrupt("return",new File([s],"backup"+new Date+".txt",{type:"text/plain",lastModified:new Date}));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),un=function(){var e=Object(k.a)(b.a.mark((function e(t,a){var n,r,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(a);case 2:return n=e.sent,e.next=5,n.text();case 5:return r=e.sent,e.next=8,Oa(t,r);case 8:return s=e.sent,e.abrupt("return",JSON.parse(s));case 10:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),dn=function(){var e=Object(k.a)(b.a.mark((function e(t,a){var n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,Sa(t);case 3:return r=e.sent,a.forEach((function(e,a){-1===we.indexOf(e.path)&&(r&&r.indexOf(e.path)>-1&&r.splice(r.indexOf(e.path),1),n.push(_a(t,e.path,JSON.parse(e.contentStr))))})),r.forEach((function(e){-1===we.indexOf(e)&&n.push(Ta(t,e))})),e.next=8,Promise.all(n);case 8:return e.abrupt("return","success");case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),fn=function(){var e=Object(k.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.next=3,Sa(t).then((function(e){return e.forEach((function(e){return a.push(Ta(t,e))}))}));case 3:return e.next=5,Promise.all(a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),mn=function(){var e=Object(k.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=null,e.prev=1,e.next=4,ja(t,"skhub/key/publicKey.json",{decrypt:!1});case 4:if(null!=(a=e.sent)){e.next=9;break}return a=Object(he.getPublicKeyFromPrivate)(t.loadUserData().appPrivateKey),e.next=9,_a(t,"skhub/key/publicKey.json",a,{encrypt:!1});case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),hn=function(){var e=Object(k.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",ja(t,"skhub/shared/sharedWithUser.json "));case 4:e.prev=4,e.t0=e.catch(0);case 6:case"end":return e.stop()}}),e,null,[[0,4]])})));return function(t){return e.apply(this,arguments)}}(),yn=function(){var e=Object(k.a)(b.a.mark((function e(t,a){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_a(t,"skhub/shared/sharedWithUser.json ",a));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),gn=function(){var e=Object(k.a)(b.a.mark((function e(t,a){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bn(t,a,{isImport:!0}));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),bn=function(){var e=Object(k.a)(b.a.mark((function e(t,a,n){var r,s,o,c,i,l,p,u;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],s=[],e.t0=n.sharedByUserObj,e.t0){e.next=7;break}return e.next=6,xn(t);case 6:e.t0=e.sent;case 7:return o=e.t0,i=(c=o||{}).senderToSpacesMap,l=void 0===i?{}:i,p=c.sharedByUserList,u=void 0===p?[]:p,a&&a.forEach(function(){var e=Object(k.a)(b.a.mark((function e(a){var n,o,c,i,p,d,f;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=fs(t),e.t0=c,e.next="SKYID"===e.t0?4:"SKYDB_ID"===e.t0?6:(e.t0,9);break;case 4:return p=wn(t,a,null===t||void 0===t||null===(n=t.person)||void 0===n?void 0:n.appPublicKey,{skydb:!0}),e.abrupt("break",12);case 6:return i=ya(t.skydbseed).publicKey,p=wn(t,a,i,{skydb:!0}),e.abrupt("break",12);case 9:d=null===(o=JSON.parse(localStorage.getItem("blockstack-session")).userData)||void 0===o?void 0:o.profile,i=_n(d).storageId,p=Object(he.lookupProfile)(a,fe).then((function(e){var a=_n(e).storage;return wn(t,a,i)}));case 12:f=p.then((function(e){l[a]=e,-1===u.indexOf(a)&&u.push(a)})).catch((function(e){console.log(e),s.push(a)})),r.push(f);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=12,Promise.all(r);case 12:if(e.t1=null===n||void 0===n?void 0:n.isImport,!e.t1){e.next=16;break}return e.next=16,_a(t,"skhub/shared/sharedByUser.json",{sharedByUserList:u,senderToSpacesMap:l});case 16:return e.abrupt("return",{sharedByUserList:u,senderToSpacesMap:l});case 17:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),kn=function(){var e=Object(k.a)(b.a.mark((function e(t,a,n){var r,s,o,c,i,l,p,u,d,f,m,h;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return[],r=[],e.next=4,vn(t,a);case 4:return s=e.sent,o=s.senderStorage,c=s.loggedInUserStorageId,i="skhub/shared/"+c,l=ke+n+".json",e.next=11,Sn(t,i,o);case 11:return p=e.sent,e.t0=JSON,e.next=15,Oa(t,JSON.stringify(p));case 15:return e.t1=e.sent,u=e.t0.parse.call(e.t0,e.t1),d=null,f=null,u&&"undefined"!=u&&(m=u[l],h=m?JSON.parse(m):null,null===h||void 0===h?void 0:h.skhubIdList.map((function(e){d=u[ge+e+".json"],f=d?JSON.parse(d):null,r.push(f)}))),e.abrupt("return",r);case 21:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),Sn=function(){var e=Object(k.a)(b.a.mark((function e(t,a,n){var r,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=fs(t),e.t0=r,e.next="SKYID"===e.t0?4:"SKYDB_ID"===e.t0?8:(e.t0,12);break;case 4:return e.next=6,Ca(n,a);case 6:return s=e.sent,e.abrupt("break",15);case 8:return e.next=10,Ca(n,a);case 10:return s=e.sent,e.abrupt("break",15);case 12:return e.next=14,fetch("".concat(n).concat(a)).then((function(e){return e.json()}));case 14:s=e.sent;case 15:return e.abrupt("return",s);case 16:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),vn=function(){var e=Object(k.a)(b.a.mark((function e(t,a){var n,r,s,o,c,i,l,p;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=fs(t),e.t0=s,e.next="SKYID"===e.t0?4:"SKYDB_ID"===e.t0?8:(e.t0,12);break;case 4:return c=null===t||void 0===t||null===(n=t.person)||void 0===n?void 0:n.appPublicKey,o=a,i=a,e.abrupt("break",19);case 8:return c=ya(t.skydbseed).publicKey,o=a,i=a,e.abrupt("break",19);case 12:return l=null===(r=JSON.parse(localStorage.getItem("blockstack-session")).userData)||void 0===r?void 0:r.profile,c=_n(l).storageId,e.next=16,Object(he.lookupProfile)(a,fe);case 16:p=e.sent,o=_n(p).storage,i=_n(p).storageId;case 19:return e.abrupt("return",{loggedInUserStorageId:c,senderStorage:o,remoteUserStorage:i,sessionType:s});case 20:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),En=function(){var e=Object(k.a)(b.a.mark((function e(t){var a,n,r=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>1&&void 0!==r[1]?r[1]:{},e.next=3,xn(t);case 3:return n=e.sent,a.sharedByUserObj=n,e.abrupt("return",bn(t,null===n||void 0===n?void 0:n.sharedByUserList,a));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xn=function(){var e=Object(k.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ja(t,"skhub/shared/sharedByUser.json");case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),On=function(){var e=Object(k.a)(b.a.mark((function e(t){var a,n,r,s,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=de.getItem("USER_SESSION"),n=null,r={},null==a){e.next=20;break}return n=JSON.parse(a),e.prev=5,s="skhub/shared/"+t,e.next=9,ja(n,s,{skydb:!0});case 9:return o=e.sent,e.t0=JSON,e.next=13,Oa(n,JSON.stringify(o));case 13:e.t1=e.sent,r=e.t0.parse.call(e.t0,e.t1),e.next=20;break;case 17:return e.prev=17,e.t2=e.catch(5),e.abrupt("return",{});case 20:return e.abrupt("return",r);case 21:case"end":return e.stop()}}),e,null,[[5,17]])})));return function(t){return e.apply(this,arguments)}}(),wn=function(){var e=Object(k.a)(b.a.mark((function e(t,a,n){var r,s,o,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return[],[],e.prev=2,r="skhub/shared/"+n,e.next=6,Sn(t,r,a);case 6:return s=e.sent,e.t0=JSON,e.next=10,Oa(t,JSON.stringify(s));case 10:if(e.t1=e.sent,o=e.t0.parse.call(e.t0,e.t1),null,!o||"undefined"==o){e.next=16;break}return c=o[Se],e.abrupt("return",JSON.parse(c));case 16:e.next=21;break;case 18:return e.prev=18,e.t2=e.catch(2),e.abrupt("return",null);case 21:return e.abrupt("return",null);case 22:case"end":return e.stop()}}),e,null,[[2,18]])})));return function(t,a,n){return e.apply(this,arguments)}}(),Cn=function(){var e=Object(k.a)(b.a.mark((function e(t,a,n){var r,s,o,c,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vn(t,a);case 2:return r=e.sent,s=r.senderStorage,o=r.loggedInUserStorageId,c=[],i=[],n.forEach((function(e){var a="skhub/shared/"+o+"/"+ge+e+".json";i.push(Sn(t,a,s).then((function(e){return Oa(t,JSON.stringify(e))})).then((function(e){c.push(JSON.parse(e))})))})),e.next=10,Promise.all(i);case 10:return e.abrupt("return",c);case 11:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),jn=function(){var e=Object(k.a)(b.a.mark((function e(t,a,n,r){var s,o,c,i,l,p,u;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=_e(),l=fs(t),e.t0=l,e.next="SKYID"===e.t0?5:"SKYDB_ID"===e.t0?7:(e.t0,9);break;case 5:case 7:return i=a,e.abrupt("break",13);case 9:return e.next=11,Object(he.lookupProfile)(r[a].userid,fe);case 11:p=e.sent,i=null===p||void 0===p||null===(s=p.appsMeta)||void 0===s||null===(o=s[document.location.origin])||void 0===o?void 0:o.publicKey;case 13:return c.skhubIdList=n,e.next=16,Ea(t,JSON.stringify(c),{publicKey:i});case 16:return u=e.sent,e.abrupt("return",[be,u]);case 18:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}(),_n=function(e){var t,a,n,r,s,o,c,i,l=null===e||void 0===e||null===(t=e.appsMeta)||void 0===t||null===(a=t[document.location.origin])||void 0===a||null===(n=a.storage)||void 0===n||null===(r=n.replace(ye,""))||void 0===r?void 0:r.replace("/",""),p=null===l||void 0===l?void 0:l.replace("/","");return{key:null===e||void 0===e||null===(s=e.appsMeta)||void 0===s||null===(o=s[document.location.origin])||void 0===o?void 0:o.publicKey,storage:null===e||void 0===e||null===(c=e.appsMeta)||void 0===c||null===(i=c[document.location.origin])||void 0===i?void 0:i.storage,storageId:p}},An=function(){var e=Object(k.a)(b.a.mark((function e(t,a,n,r){var s,o,c,i,l,p,u,d,f,m,h,g,k,S,v,E,x,O,w,C,j;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m={},h="skhub/shared/"+n,k=fs(t),e.t0=k,e.next="SKYID"===e.t0?6:"SKYDB_ID"===e.t0?8:(e.t0,10);break;case 6:case 8:return g=n,e.abrupt("break",19);case 10:return e.next=12,Object(he.lookupProfile)(n,fe);case 12:if(S=e.sent,g=null===S||void 0===S||null===(s=S.appsMeta)||void 0===s||null===(o=s[document.location.origin])||void 0===o?void 0:o.publicKey,v=null===S||void 0===S||null===(c=S.appsMeta)||void 0===c||null===(i=c[document.location.origin])||void 0===i||null===(l=i.storage)||void 0===l||null===(p=l.replace(ye,""))||void 0===p?void 0:p.replace("/",""),n=null===v||void 0===v?void 0:v.replace("/",""),null!=g&&null!=n){e.next=19;break}throw console.log("User not setup for skyspace"),"User not setup for skyspace";case 19:if(null!=r){e.next=26;break}return e.next=22,hn(t);case 22:if(e.t1=e.sent,e.t1){e.next=25;break}e.t1={};case 25:r=e.t1;case 26:return r[n]=null!==(u=r[n])&&void 0!==u?u:{},r[n].userid=n,r[n].spaces=null!==(d=r[n].spaces)&&void 0!==d?d:[],r[n].skylinks=null!==(f=r[n].skylinks)&&void 0!==f?f:[],r[n].spaces=Object(y.a)(new Set([].concat(Object(y.a)(r[n].spaces),Object(y.a)(a)))),(E=Ae()).skyspaceList=r[n].spaces,e.next=35,Ea(t,JSON.stringify(E),{publicKey:g});case 35:return x=e.sent,m[Se]=x,O=[],w=[],a.map((function(e){var a=ke+e+".json";O.push(Xa(t,e).then((function(e){return w.push.apply(w,Object(y.a)(e.skhubIdList)),Ea(t,JSON.stringify(e),{publicKey:g})})).then((function(e){m[a]=e})))})),e.next=42,Promise.all(O);case 42:return r[n].skylinks=Object(y.a)(new Set([].concat(Object(y.a)(r[n].skylinks),w))),(C=_e()).skhubIdList=r[n].skylinks,e.next=47,Ea(t,JSON.stringify(C),{publicKey:g});case 47:return j=e.sent,m[be]=j,O.length=0,Object(y.a)(new Set([].concat(w))).map((function(e){var a=ge+e+".json";O.push(Ua(t,e).then((function(e){return Ea(t,JSON.stringify(e),{publicKey:g})})).then((function(e){m[a]=e})))})),e.next=53,Promise.all(O);case 53:return e.next=55,Aa(t,h,m);case 55:return e.next=57,yn(t,r);case 57:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}(),In=a(764),Tn=function(e){return console.log("info modal action : ",e),{type:"CHANGE_INFO_MODAL_STATE",payload:e}},Nn=function(e){return{type:"SET_APP_SKYSPACES",payload:e}},Ln=function(e){return sr.dispatch(Et(!0)),{type:"FETCH_APP_DETAIL",payload:e}},Pn=function(e){return sr.dispatch(Et(!0)),{type:"FETCH_SKYSPACE_APP_DETAIL",payload:e}},Dn=function(){return{type:"FETCH_BLANK_APP"}},Mn=function(e){return sr.dispatch(Et(!1)),null!=e.param&&sr.dispatch(function(e){return sr.dispatch(Et(!0)),console.log(e),{type:"FETCH_APP_SKYSPACES",payload:e}}(e.param)),{type:"FETCH_APP_DETAIL_SUCCESS",payload:e.res}},Rn=function(e){return{type:"FETCH_APP_DETAIL_SUCCESS",payload:e}},Bn=function(e){return sr.dispatch(Et(!0)),console.log("create skapp action called"),{type:"CREATE_SKAPP",payload:e}},Un=function(e){return{type:"CREATE_APP_SUCCESS",payload:e}},Fn=function(e){return null==e?de.removeItem("USER_SETTING"):de.setItem("USER_SETTING",JSON.stringify(e)),{type:"SET_USER_SETTING",payload:e}},Kn=function(e){return null==e&&(e=sr.getState().userSession),{type:"ACT_TY_FETCH_SKYSPACE_DETAIL",payload:e}},zn=function(e){var t;return null==e?de.removeItem("SKYSPACELIST"):de.setItem("SKYSPACELIST",JSON.stringify(e)),sr.dispatch({type:"FETCH_USER_SETTING",payload:t=null!=(t=null)?t:sr.getState().userSession}),sr.dispatch(cr()),{type:"SET_SKYSPACE_LIST",payload:e}},Hn=function(e){return null==e&&(e=sr.getState().userSession),{type:"FETCH_SKYSPACE_LIST",payload:e}},Yn=function(e){return null==e?de.removeItem("USER"):de.setItem("USER",JSON.stringify(e)),{type:"SET_BLOCKSTACK_USER",payload:e}},Wn=function(e){return sr.dispatch(Hn(null)),Yn(e)},Gn=function(e){return{type:"FETCH_BLOCKSTACK_USER",payload:e}},Jn=function(e){return de.clear(),sr.dispatch(zn(null)),e.skydbseed?(window.location.href=window.location.origin,Yn(null)):(e.idp,e.skyid.sessionDestroy("/"),Yn(null))},Vn=function(e){return sr.dispatch(Et(!0)),{type:"FETCH_HISTORY",payload:e}},Zn=function(e){return null==e?de.removeItem("PORTALS_LIST"):de.setItem("PORTALS_LIST",JSON.stringify(e)),{type:"SET_PORTALS_LIST",payload:e}},Xn=function(e){return{type:"FETCH_PORTALS_LIST",payload:e=null!=e?e:sr.getState().userSession}},Qn={audioList:[],currentAudio:null,playing:!1},qn=a(777),$n=a(40),er=a(116).createEpicMiddleware,tr=Object(_t.combineReducers)({snLoader:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_LOADER_STATE":return t.payload;default:return e}},snShowMobileMenu:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_MOBILE_MENU_STATE":return t.payload;default:return e}},snShowDesktopMenu:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_DESKTOP_MENU_STATE":return t.payload;default:return e}},snApps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_APPS":return e;case"FETCH_APPS_SUCCESS":case"ACT_TY_SET_APPS":case"FETCH_SKYSPACE_APPS_SUCCESS":case"STATIC_USERS":return t.payload;default:return e}},snAppDetail:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:At(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_BLANK_APP":return At();case"FETCH_APP_DETAIL":return e;case"FETCH_APP_DETAIL_SUCCESS":case"CREATE_APP_SUCCESS":console.log(t);var a={version:"v1",createTS:new Date,lastUpdateTS:new Date,skhubId:t.payload.skhubId,skylink:t.payload.skylink,fileKey:t.payload.fileKey,id:t.payload.id,name:t.payload.name,title:t.payload.title,filename:t.payload.filename,description:t.payload.description,type:t.payload.type,contentLength:t.payload.contentLength,contentType:t.payload.contentType,httpMetadata:t.payload.httpMetadata,thumbnail:t.payload.thumbnail,redirect:t.payload.redirect,defaultPath:t.payload.defaultPath,linkType:t.payload.linkType,category:null!=t.payload.category?Number(t.payload.category):2,skyspaceList:null==t.payload.skyspaceList?[]:t.payload.skyspaceList,tags:le(t.payload.tags),userId:t.payload.userId,permission:"true"===t.payload.permission||!0===t.payload.permission,fileformat:t.payload.fileformat,git_url:t.payload.git_url,bookmark:"true"===t.payload.bookmark,skyAppSecret:t.payload.skyAppSecret,auth_code:t.payload.auth_code};return a;default:return e}},snInfoModalState:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_INFO_MODAL_STATE":return console.log("changing info modal state"),t.payload;default:return e}},userSession:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lt(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_SESSION":return t.payload;default:return e}},snIsDataOutOfSync:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DATA_SYNC_STATUS":return t.payload;default:return e}},person:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_BLOCKSTACK_USER":return t.payload;default:return null==e&&null!=(e=de.getItem("USER"))&&(e=JSON.parse(e)),e}},snSkyspaceList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SKYSPACE_LIST":return t.payload;default:return null==e&&null!=(e=de.getItem("SKYSPACELIST"))&&(e=JSON.parse(e)),e}},snPortalsList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PORTALS_LIST":return t.payload;default:return null==e&&null!=(e=de.getItem("PORTALS_LIST"))&&(e=JSON.parse(e)),e}},snAppSkyspaceList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_APP_SKYSPACES":case"FETCH_APP_SKYSPACES_SUCCESS":return t.payload;default:return e}},snHistory:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_HISTORY":return t.payload;default:return e}},snTriggerSignin:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TRIGGER_SIGN_IN":return t.payload;default:return e}},snUserSetting:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_SETTING":return t.payload;default:return null==e&&null!=(e=de.getItem("USER_SETTING"))&&(e=JSON.parse(e)),e}},snSkyspaceAppCount:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SKYSPACE_APP_COUNT":return t.payload;default:return null==e&&null!=(e=de.getItem("SKYSPACE_APP_COUNT"))&&(e=JSON.parse(e)),e}},snTopbarDisplay:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_TOPBAR_STATE":return t.payload;default:return e}},snSkyspaceDetail:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ACT_TY_SET_SKYSPACE_DETAIL":return t.payload;default:return null==e&&null!=(e=de.getItem("STORAGE_SKYSPACE_DETAIL_KEY"))&&(e=JSON.parse(e)),e}},snPublicHash:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ACT_TY_SET_PUBLIC_HASH":return t.payload;default:return e}},snPublicInMemory:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{addedSkapps:[],deletedSkapps:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ACT_TY_SET_PUBLIC_IN_MEMORY":return t.payload;default:return e}},snUploadList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ACT_TY_SET_UPLOAD_LIST":return t.payload;default:return e}},SnAudioPlayer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_AUDIO_LIST":return Object(h.a)(Object(h.a)({},e),{},{audioList:Object(y.a)(t.payload),currentAudio:t.payload[0]?t.payload[0]:null});case"ADD_ITEM_IN_AUDIO_LIST":return Object(h.a)(Object(h.a)({},e),{},{audioList:[].concat(Object(y.a)(e.audioList),[t.payload])});case"CHANGE_AUDIO_STATUS":return Object(h.a)(Object(h.a)({},e),{},{playing:t.payload});case"UPDATE_CURRENT_AUDIO":return Object(h.a)(Object(h.a)({},e),{},{currentAudio:t.payload});case"RESET_AUDIO_PLAYER":return Object(h.a)({},Qn);default:return e}},snImportedSpace:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_IMPORTED_SPACE":return t.payload;default:return e}},snDarkMode:function(e,t){switch(t.type){case"ACT_TY_CHANGE_DARK_MODE_STATE":return t.payload;default:if(null==e){var a=localStorage.getItem("darkMode");e=a&&JSON.parse(a)}return e}}}),ar=Object(In.a)((function(e){return e.pipe(Object(Pt.a)("FETCH_APPS"),Object(Mt.a)((function(e){return(t=e.payload,Bt.a.getJSON(Ut+"?limit=100&category="+t)).pipe(Object(Rt.a)((function(e){return e.hasOwnProperty("status")?e.result:e})),Object(Rt.a)((function(e){return zt(e.rows)})));var t})))}),(function(e){return e.pipe(Object(Pt.a)("FETCH_APP_DETAIL"),Object(Mt.a)((function(e){return console.log("need not call ",e),(t=e.payload.skyAppId,Bt.a.getJSON(Ut+t)).pipe(Object(Rt.a)((function(e){return e.hasOwnProperty("status")?e.result:e})),Object(Rt.a)((function(t){return Pn({skyAppId:t.skhubId,session:e.payload.session})})));var t})))}),(function(e){return e.pipe(Object(Pt.a)("CREATE_SKAPP"),Object(Mt.a)((function(e){return console.log("create skapp switchmap ",e),(t=e.payload,Object(Bt.a)({url:Ut,method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).pipe(Object(Rt.a)((function(e){console.log(e);var t=e.response;return t.hasOwnProperty("status")?t.result:t})),Object(Rt.a)((function(e){return t=e,sr.dispatch(Et(!1)),sr.dispatch(Tn(!0)),{type:"CREATE_APP_SUCCESS",payload:t};var t})));var t})))}),(function(e){return e.pipe(Object(Pt.a)("FETCH_SKYSPACE_APPS"),Object(Mt.a)((function(e){return Object(Dt.a)(Za(e.payload.session,e.payload.skyspace)).pipe(Object(Rt.a)((function(e){return console.log("response in skyspaceAppsepic",e),null==e?e=[]:e.sort(),t=e,sr.dispatch(Et(!1)),{type:"FETCH_SKYSPACE_APPS_SUCCESS",payload:t};var t})))})))}),(function(e){return e.pipe(Object(Pt.a)("FETCH_BLOCKSTACK_USER"),Object(Mt.a)((function(e){return Object(Dt.a)(e.payload.handlePendingSignIn()).pipe(Object(Rt.a)((function(t){return mn(e.payload),Hn(e.payload),Wn(t)})))})))}),(function(e){return e.pipe(Object(Pt.a)("LOGOUT_BLOCKSTACK_USER"),Object(Mt.a)((function(e){return Object(Dt.a)(void na.clear().then((function(){console.log("Database is now empty.")})).catch((function(e){console.log(e)}))).pipe(Object(Rt.a)((function(e){return Yn(null)})))})))}),(function(e){return e.pipe(Object(Pt.a)("FETCH_SKYSPACE_LIST"),Object(Mt.a)((function(e){return Et(!0),Object(Dt.a)(Ya(e.payload)).pipe(Object(Rt.a)((function(e){return Et(!1),zn(e)})))})))}),(function(e){return e.pipe(Object(Pt.a)("FETCH_SKYSPACE_APP_DETAIL"),Object(Mt.a)((function(e){return Object(Dt.a)(Ua(e.payload.session,e.payload.skyAppId)).pipe(Object(Rt.a)((function(t){return Mn({res:t,param:e.payload})})))})))}),(function(e){return e.pipe(Object(Pt.a)("FETCH_APP_SKYSPACES","FETCH_APP_SKYSPACES_AND_SKYSPACE_APP"),Object(Mt.a)((function(e){return console.log("in appskyspacelist epic to call",e),Object(Dt.a)(Va(e.payload.session,e.payload.skyAppId)).pipe(Object(Rt.a)((function(t){return"FETCH_APP_SKYSPACES"===e.type?(a=t,sr.dispatch(Et(!1)),console.log("in fetchAppSkyspacesSuccess action",a),{type:"FETCH_APP_SKYSPACES_SUCCESS",payload:a}):"FETCH_APP_SKYSPACES_AND_SKYSPACE_APP"===e.type?function(e,t){return sr.dispatch(Et(!1)),sr.dispatch(Pn({skyAppId:t.skyAppId,session:t.session})),{type:"FETCH_APP_SKYSPACES_SUCCESS",payload:e}}(t,e.payload):void 0;var a})))})))}),(function(e){return e.pipe(Object(Pt.a)("FETCH_HISTORY"),Object(Mt.a)((function(e){return Object(Dt.a)($a(e.payload)).pipe(Object(Rt.a)((function(e){return t=e.sort((function(e,t){return new Date(t.lastUpdateTS)-new Date(e.lastUpdateTS)})),sr.dispatch(Et(!1)),{type:"SET_HISTORY",payload:t};var t})))})))}),(function(e){return e.pipe(Object(Pt.a)("FETCH_PORTALS_LIST"),Object(Mt.a)((function(e){return Et(!0),Object(Dt.a)(on(e.payload)).pipe(Object(Rt.a)((function(e){return Et(!1),Zn(e)})))})))}),(function(e){return e.pipe(Object(Pt.a)("FETCH_USER_SETTING"),Object(Mt.a)((function(e){return console.log("user setting epic",e),Et(!0),Object(Dt.a)(nn(e.payload)).pipe(Object(Rt.a)((function(e){return console.log(e),Et(!1),Fn(e)})))})))}),(function(e){return e.pipe(Object(Pt.a)("FETCH_ALL_SKYLINKS"),Object(Mt.a)((function(e){return Object(Dt.a)(function(e){var t=[];return ja(e,be).then((function(a){if(a&&a.skhubIdList&&a.skhubIdList.length>0){var n=[];return a.skhubIdList.forEach((function(a){n.push(Ua(e,a).then((function(e){t.push(e)})))})),Promise.all(n).then((function(){return t}))}return[]})).catch((function(e){return[]}))}(e.payload)).pipe(Object(Rt.a)((function(e){return zt(e)})))})))}),(function(e){return e.pipe(Object(Pt.a)("FETCH_SKYSPACE_APP_COUNT"),Object(Mt.a)((function(e){return Object(Dt.a)(function(e){var t={};return Ya(e).then((function(a){var n=[];return a.forEach((function(a){n.push(Xa(e,a).then((function(e){null!=e&&null!=e.skhubIdList&&(t[a]=e.skhubIdList.length)})))})),Promise.all(n).then((function(){return t}))}))}(e.payload)).pipe(Object(Rt.a)((function(e){return or(e)})))})))}),(function(e){return e.pipe(Object(Pt.a)("ACT_TY_FETCH_SKYSPACE_DETAIL"),Object(Mt.a)((function(e){return Object(Dt.a)(Wa(e.payload)).pipe(Object(Rt.a)((function(e){return null==(t=e)?de.removeItem("STORAGE_SKYSPACE_DETAIL_KEY"):de.setItem("STORAGE_SKYSPACE_DETAIL_KEY",JSON.stringify(t)),{type:"ACT_TY_SET_SKYSPACE_DETAIL",payload:t};var t})))})))}),(function(e){return e.pipe(Object(Pt.a)("ACT_TY_FETCH_PUBLIC_APPS"),Object(Mt.a)((function(e){return ua(e.payload).then((function(e){return zt(e.data)}))})))})),nr=er(),rr=Object(_t.createStore)(tr,Object(qn.composeWithDevTools)($n.applyMiddleware(nr)));nr.run(ar);var sr=rr,or=function(e){return null==e?de.removeItem("SKYSPACE_APP_COUNT"):de.setItem("SKYSPACE_APP_COUNT",JSON.stringify(e)),{type:"SET_SKYSPACE_APP_COUNT",payload:e}},cr=function(e){return null==e&&(e=sr.getState().userSession),{type:"FETCH_SKYSPACE_APP_COUNT",payload:e}},ir=(a(1286),a(1288),a(1289),a(1290),a(62)),lr=a.n(ir),pr=a(766),ur=a(730),dr=a(405),fr=a.n(dr),mr=a(780),hr=a.n(mr),yr=a(779),gr=a.n(yr),br=function(e){Object(x.a)(a,e);var t=Object(O.a)(a);function a(e){var n;return Object(S.a)(this,a),(n=t.call(this,e)).modifySelected=function(e){var t=n.state.selectedItems,a=t.indexOf(e);a>-1?t.splice(a,1):t.push(e),n.setState({selectedItems:t}),n.props.onUpdate&&n.props.onUpdate(n.state.selectedItems)},n.state={items:Object.keys(n.props.itemsObj),hasOverflow:!1,canScrollLeft:!1,selectedItems:n.props.selectedItems,canScrollRight:!1},n.checkForOverflow=n.checkForOverflow.bind(Object(E.a)(n)),n.checkForScrollPosition=n.checkForScrollPosition.bind(Object(E.a)(n)),n.debounceCheckForOverflow=fr()(n.checkForOverflow,1e3),n.debounceCheckForScrollPosition=fr()(n.checkForScrollPosition,200),n.container=null,n}return Object(v.a)(a,[{key:"componentDidMount",value:function(){this.checkForOverflow(),this.checkForScrollPosition(),this.container.addEventListener("scroll",this.debounceCheckForScrollPosition)}},{key:"componentWillUnmount",value:function(){this.container.removeEventListener("scroll",this.debounceCheckForScrollPosition),this.debounceCheckForOverflow.cancel()}},{key:"componentDidUpdate",value:function(e,t){t.items.length!==this.state.items.length&&(this.checkForOverflow(),this.checkForScrollPosition()),this.state.selectedItems!==this.props.selectedItems&&this.setState({selectedItems:this.props.selectedItems}),JSON.stringify(this.state.items.sort())!==JSON.stringify(Object.keys(this.props.itemsObj).sort())&&this.setState({items:Object.keys(this.props.itemsObj)})}},{key:"checkForScrollPosition",value:function(){var e=this.container,t=e.scrollLeft,a=e.scrollWidth,n=e.clientWidth;this.setState({canScrollLeft:t>0,canScrollRight:t!==a-n})}},{key:"checkForOverflow",value:function(){var e=this.container,t=e.scrollWidth>e.clientWidth;this.setState({hasOverflow:t})}},{key:"scrollContainerBy",value:function(e){this.container.scrollBy({left:e,behavior:"smooth"})}},{key:"buildItems",value:function(){var e=this;return this.state.items.map((function(t){return r.a.createElement("li",{className:"item ".concat(e.state.selectedItems.indexOf(t)>-1?"active":""),key:t},e.props.itemsObj[t]&&r.a.createElement(bt.a,{arrow:!0,title:e.props.itemsObj[t][e.props.labelKey]&&e.props.itemsObj[t][e.props.labelKey].length>(e.props.showTooltipFrom?e.props.showTooltipFrom:10)?e.props.itemsObj[t][e.props.labelKey]:""},r.a.createElement(pr.a,{className:"cursor-pointer",label:e.props.itemsObj[t][e.props.labelKey],onClick:function(){return e.modifySelected(t)}})))}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.canScrollLeft,n=t.canScrollRight,s=this.props.type;return null==s?r.a.createElement("div",{style:{display:"flex",flexWrap:"wrap"},ref:function(t){e.container=t}},this.state.items.map((function(t){return r.a.createElement("div",{key:t},e.props.itemsObj[t]&&r.a.createElement(bt.a,{arrow:!0,title:e.props.itemsObj[t][e.props.labelKey]&&e.props.itemsObj[t][e.props.labelKey].length>(e.props.showTooltipFrom?e.props.showTooltipFrom:10)?e.props.itemsObj[t][e.props.labelKey]:""},r.a.createElement(pr.a,{icon:void 0,label:e.props.itemsObj[t][e.props.labelKey],onClick:function(){return e.modifySelected(t)},className:"item ".concat(e.state.selectedItems.indexOf(t)>-1?"active":""),size:"small"})))}))):"ADVANCE"===s?r.a.createElement("div",{className:"carousal-menu-root"},a&&r.a.createElement(bt.a,{title:"Delete",arrow:!0},r.a.createElement(F.a,{onClick:function(){e.scrollContainerBy(-200)}},r.a.createElement(gr.a,null))),r.a.createElement("ul",{className:"item-container",ref:function(t){e.container=t}},this.buildItems()),n&&r.a.createElement(bt.a,{title:"Delete",arrow:!0},r.a.createElement(F.a,{onClick:function(){e.scrollContainerBy(200)}},r.a.createElement(hr.a,null)))):void 0}}]),a}(n.PureComponent),kr=a(328),Sr=function(e){return{type:"CHANGE_MOBILE_MENU_STATE",payload:e}},vr=function(){return Sr(!sr.getState().snShowMobileMenu)};var Er=function(e){Object(x.a)(a,e);var t=Object(O.a)(a);function a(e){var n;return Object(S.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState({skyspaceName:e.target.value})},n.createSkyspace=Object(k.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.props.setLoaderDisplay(!0),e.next=3,za(n.props.userSession,n.state.skyspaceName);case 3:n.props.setLoaderDisplay(!1),n.props.fetchSkyspaceList(),n.closeModal();case 6:case"end":return e.stop()}}),e)}))),n.renameSkyspace=Object(k.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Will create skyspace"),n.props.setLoaderDisplay(!0),e.next=4,Ha(n.props.userSession,n.props.skyspaceName,n.state.skyspaceName);case 4:n.props.fetchSkyspaceDetail(),n.props.fetchSkyspaceList(),n.props.setLoaderDisplay(!1),n.closeModal();case 8:case"end":return e.stop()}}),e)}))),n.closeModal=function(){n.setState({skyspaceName:null}),n.props.handleClose()},n.handleSubmit=function(){switch(n.props.type){case"ADD_SKYSPACE":n.createSkyspace();break;case"RENAME_SKYSPACE":n.renameSkyspace();break;default:n.closeModal()}},n.state={skyspaceName:null},n}return Object(v.a)(a,[{key:"componentDidUpdate",value:function(){"RENAME_SKYSPACE"===this.props.type&&null==this.state.skyspaceName?this.setState({skyspaceName:this.props.skyspaceName}):""===this.props.type&&null!=this.state.skyspaceName&&this.setState({skyspaceName:null})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(G.a,{open:this.props.open,onClose:this.closeModal,"aria-labelledby":"form-dialog-title"},r.a.createElement(ee.a,{id:"form-dialog-title"},null!=this.props.title&&""!==this.props.title.trim()?this.props.title:"Add New Space"),r.a.createElement(X.a,null,r.a.createElement(kr.ValidatorForm,{onSubmit:this.handleSubmit},r.a.createElement(ur.a,{autoFocus:!0,margin:"dense",id:"name",label:"Enter Space Name",fullWidth:!0,value:this.state.skyspaceName,onChange:this.handleChange}))),r.a.createElement(Z.a,null,r.a.createElement(te.a,{onClick:this.closeModal,color:"primary",className:"btn-bg-color",variant:"contained"},"Cancel"),r.a.createElement(te.a,{onClick:this.handleSubmit,color:"primary",className:"btn-bg-color",variant:"contained"},"ADD_SKYSPACE"===this.props.type?"Create":"Rename"))))}}]),a}(r.a.Component),xr=Object(p.b)((function(e){return{showMobileMenu:e.snShowMobileMenu,userSession:e.userSession,person:e.person,skyspaceList:e.snSkyspaceList}}),(function(e){return Object(_t.bindActionCreators)({setMobileMenuDisplay:Sr,toggleMobileMenuDisplay:vr,fetchBlockstackPerson:Gn,setLoaderDisplay:Et,logoutPerson:Jn,setSkyspaceList:zn,fetchSkyspaceList:Hn,fetchSkyspaceDetail:Kn},e)}))(Er),Or=a(1306),wr=r.a.forwardRef((function(e,t){return r.a.createElement(ae.a,Object.assign({direction:"up",ref:t},e))})),Cr=function(e){Object(x.a)(a,e);var t=Object(O.a)(a);function a(e){var n;return Object(S.a)(this,a),(n=t.call(this,e)).resetOnClose=function(){n.setState({selectedSkyspaces:[]}),n.props.onClose()},n.save=function(){var e=JSON.parse(JSON.stringify(n.state.selectedSkyspaces));n.setState({selectedSkyspaces:[]}),n.props.onSave(e)},n.addSkyspace=function(){n.setState({skyspaceModal:{title:"Add New Skyspace",skyspaceName:"",type:"ADD_SKYSPACE"}}),n.handleAddSpaceOpen()},n.handleAddSpaceOpen=function(){n.setState({showAddSkyspace:!0})},n.handleAddSpaceClose=function(){n.setState({showAddSkyspace:!1,skyspaceModal:{title:"",skyspaceName:"",type:""}})},n.state={selectedSkyspaces:[],skyspaceModal:{title:"Add New Skyspace",skyspaceName:"",type:"ADD_SKYSPACE"},showAddSkyspace:!1},n}return Object(v.a)(a,[{key:"render",value:function(){var e,t,a=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(G.a,{open:this.props.open,onClose:this.resetOnClose,TransitionComponent:wr,keepMounted:!0,disableBackdropClick:null!==(e=this.props.disableBackdropClick)&&void 0!==e&&e,disableEscapeKeyDown:null!==(t=this.props.disableEscapeKeyDown)&&void 0!==t&&t,maxWidth:"lg","aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(ee.a,{id:"alert-dialog-title"},this.props.title||"Add this Skylink to Skyspaces"),r.a.createElement(X.a,null,r.a.createElement(Q.a,{id:"alert-dialog-description"},!this.props.showAddSkyspace&&r.a.createElement(br,{selectedItems:this.state.selectedSkyspaces,itemsObj:pe(null!=this.props.availableSkyspaces?this.props.availableSkyspaces:[]),labelKey:"label",onUpdate:function(e){console.log(a.state.selectedSkyspaces),a.setState({selectedSkyspaces:e})}}),this.props.showAddSkyspace&&r.a.createElement(Or.a,{multiple:!0,id:"tags-filled",filterSelectedOptions:!0,options:this.props.availableSkyspaces||[],freeSolo:!0,onChange:function(e,t,n){return a.setState({selectedSkyspaces:t})},renderTags:function(e,t){return e.map((function(e,a){return r.a.createElement(pr.a,Object.assign({variant:"outlined",label:e},t({index:a})))}))},renderInput:function(e){return r.a.createElement(ur.a,Object.assign({},e,{variant:"standard",label:"Select from Existing Skyspace or Add a New Skyspace",placeholder:"Select from Existing Skyspace or Add a New Skyspace"}))}}))),r.a.createElement(Z.a,null,r.a.createElement(te.a,{onClick:this.resetOnClose,autoFocus:!0,variant:"contained",color:"primary",className:"btn-20px app-bg-color"},"Cancel"),r.a.createElement(te.a,{onClick:this.save,autoFocus:!0,variant:"contained",color:"primary",className:"btn-20px app-bg-color"},"Save"))),this.props.showAddSkyspace&&r.a.createElement(xr,{open:this.state.showAddSkyspace,title:this.state.skyspaceModal.title,skyspaceName:this.state.skyspaceModal.skyspaceName,handleClickOpen:this.handleAddSpaceOpen,handleClose:this.handleAddSpaceClose,type:this.state.skyspaceModal.type}))}}]),a}(r.a.Component),jr=a(731),_r=Object(jr.a)((function(e){var t,a,n;return n={root:{flexGrow:1},content:(t={},Object(w.a)(t,e.breakpoints.up("sm"),{width:"calc(100% - ".concat(295,"px)"),marginLeft:295}),Object(w.a)(t,"backgroundColor",e.palette.whiteBgColor),Object(w.a)(t,"padding",e.spacing(3)),t),publicContent:(a={},Object(w.a)(a,e.breakpoints.up("sm"),{width:"calc(100% - ".concat(0,"px)")}),Object(w.a)(a,"backgroundColor",e.palette.whiteBgColor),Object(w.a)(a,"padding",e.spacing(3)),a),appsIcon:{color:e.palette.linksColor},reOrdered:{color:e.palette.linksColor},lowPriorIcon:{color:e.palette.linksColor},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary},input:{display:"none"},sharedSpaceButn:{color:"white",borderRadius:10},formControl:{margin:e.spacing(1),minWidth:120,marginRight:20},icon:{color:e.palette.primary.main},menuColor:{color:e.palette.linksColor}},Object(w.a)(n,"sharedSpaceButn",{color:"white",borderRadius:10}),Object(w.a)(n,"most_main_grid_gallery",{padding:"0px",width:"100%",margin:0}),Object(w.a)(n,"main_grid_gallery",{margin:"auto"}),Object(w.a)(n,"MaintabsPaper_gallery",{paddingTop:"10px",paddingRight:"35px",paddingBottom:"40px",boxShadow:"none",backgroundColor:e.palette.whiteBgColor}),Object(w.a)(n,"tabsPaper_gallery",{padding:"0px",boxShadow:"none",backgroundColor:e.palette.whiteBgColor}),Object(w.a)(n,"gallery_title",{color:e.palette.linksColor,textAlign:"left",fontWeight:"500",fontSize:"20px"}),Object(w.a)(n,"gallery_subTitle",{color:e.palette.primary.main,textAlign:"left",fontSize:"14px"}),Object(w.a)(n,"image_grid_gallery",{padding:"2px !important",display:"flex",justifyContent:"center",alignItems:"flex-end"}),Object(w.a)(n,"gallery_title_btns_grid",{display:"flex",alignItems:"center",flexWrap:"wrap"}),Object(w.a)(n,"gallery_title_head_Alltext",{background:"".concat(e.palette.lightGray),padding:"5px 15px",borderRadius:"5px",color:"".concat(e.palette.primary.textColor),fontSize:"13px"}),Object(w.a)(n,"gallery_title_head_Alltext_menu",{background:"".concat(e.palette.lightGray),padding:"15px 50px",borderRadius:"5px",color:"".concat(e.palette.primary.textColor),fontSize:"13px"}),Object(w.a)(n,"innerValue_All",{background:e.palette.spacesTabsCount,borderRadius:"100%",marginLeft:"7px",fontSize:"11px",padding:"3px",display:"inline-block",width:"25px",color:"".concat(e.palette.primary.main),textAlign:"center"}),Object(w.a)(n,"gallery_title_head_image_text",{background:"".concat(e.palette.lightGray),padding:"5px 15px",borderRadius:"5px",color:"".concat(e.palette.primary.textColor),fontSize:"13px",marginLeft:"15px"}),Object(w.a)(n,"menuverticalIcon_div",{background:"".concat(e.palette.lightGray),padding:"3px",borderRadius:"100%",marginLeft:"10px"}),Object(w.a)(n,"inner_image_icons",{position:"absolute",color:"white",paddingBottom:"10px"}),Object(w.a)(n,"titleBar_onSelect_img_grid_gallery",{marginBottom:"20px",background:"".concat(e.palette.lightGray)}),n})),Ar=a(229);function Ir(e){var t=_r(),a=Object(p.c)(),s=Object(n.useState)(0),o=Object(c.a)(s,2),i=o[0],l=o[1],u=Object(n.useState)(!1),d=Object(c.a)(u,2),f=d[0],m=d[1],h=Object(n.useState)(!1),y=Object(c.a)(h,2),g=y[0],b=y[1],k=Object(n.useState)([]),S=Object(c.a)(k,2),v=S[0],E=S[1],x=Object(n.useState)(),O=Object(c.a)(x,2),w=O[0],C=O[1],j=r.a.useState(!1),A=Object(c.a)(j,2),T=A[0],L=A[1],D=r.a.useState([]),R=Object(c.a)(D,2),F=R[0],K=R[1],z=Object(n.useRef)(null),H=Object(p.d)((function(e){return e.userSession})),Y=Object(p.d)((function(e){return e.snSkyspaceList})),W=function(e){a(Et(!0)),en(H,{skylink:e.skylink,fileName:e.name,action:"Download",contentLength:"",contentType:"",skhubId:e.skhubId,skyspaces:[],savedToSkySpaces:!1}).then((function(){a(Et(!1)),os(e.skylink,H)}))},G=function(){var t=[];return e.filteredApps.map((function(e){t.push({thumbnail:ss(e.thumbnail),original:ss(e.skylink),url:ss(e.skylink),title:e.name})})),t},J=function(t,a){var n;l(a+9*(e.page-1)),m(!0);null===z||void 0===z||null===(n=z.current)||void 0===n||n.fullScreen()},V=function(e){var t=e.skhubId;Va(H,t).then((function(e){return console.log("skyspacesForApp ",e),e=null==e?[]:e.skyspaceForSkhubIdList,Y.filter((function(t){return!e.includes(t)}))})).then((function(t){console.log("availableSkyspaces",t),null!=t&&t.length>0?(console.log("will show add to skyspace modal"),C(e),b(!0),E(t)):console.log("NO new skyspace available")}))},Z=function(e){var t=w;null!=e&&0!==e.lenghth&&(a(Et(!0)),Ja(H,t.skhubId,e).then((function(){a(Et(!1)),b(!1),C(),a(cr())})))},X=function(t){var n=t.skhubId;a(Et(!0)),"undefined"!=typeof e.skyspace&&e.skyspace?qa(H,e.skyspace,n).then((function(t){a(cr()),a(Et(!1)),e.onDelete()})):Ga(H,n,t.skyspaceList).then((function(t){a(Et(!1)),e.onDelete()}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"image-gallery",className:Object(ut.default)({"d-none":!f})},f&&r.a.createElement(pt.a,{images:G(),startIndex:i,onClose:function(e){return m(!1)}})),r.a.createElement(U.a,{container:!0,spacing:3,className:" most_main_grid_gallery ".concat(t.most_main_grid_gallery)},r.a.createElement(U.a,{item:!0,xs:12,className:t.main_grid_gallery,style:{paddingTop:"0px"}},r.a.createElement(Ar.a,{className:"".concat(t.paper," ").concat(t.MaintabsPaper_gallery)},r.a.createElement(Ar.a,{className:t.tabsPaper_gallery},T?r.a.createElement(U.a,{container:!0,spacing:3,style:{margin:"0px"}},r.a.createElement(U.a,{item:!0,xs:12,className:t.titleBar_onSelect_img_grid_gallery},r.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-between"}},r.a.createElement("div",null,r.a.createElement(te.a,{variant:"contained",color:"secondary",className:t.button,startIcon:r.a.createElement(B.a,{style:{color:"#1ed660"}}),size:"small",style:{background:"transparent",color:"#636f70",boxShadow:"none"}},"Select all"),r.a.createElement(te.a,{variant:"contained",color:"secondary",className:t.button,startIcon:r.a.createElement(_.a,{style:{color:"#ff3d3d"}}),size:"small",style:{background:"transparent",color:"#636f70",boxShadow:"none",marginLeft:"15px"}},"Delete"),r.a.createElement(te.a,{variant:"contained",color:"secondary",className:t.button,startIcon:r.a.createElement(I.a,{style:{color:"#1ed660"}}),size:"small",style:{background:"transparent",color:"#636f70",boxShadow:"none",marginLeft:"15px"}},"Share"),r.a.createElement(te.a,{variant:"contained",color:"secondary",className:t.button,startIcon:r.a.createElement(N.a,{style:{color:"#1ed660"}}),size:"small",style:{background:"transparent",color:"#636f70",boxShadow:"none",marginLeft:"15px"}},"Move to"),r.a.createElement(te.a,{variant:"contained",color:"secondary",className:t.button,startIcon:r.a.createElement(P.a,{style:{color:"#1ed660"}}),size:"small",style:{background:"transparent",color:"#636f70",boxShadow:"none",marginLeft:"15px"}},"Add to")),r.a.createElement("div",{style:{textAlign:"right"}},F.length," Selected",r.a.createElement(M.a,{onClick:function(){L(!T),e.handleUploadSection(!T),K([])},style:{color:"#1ed660",fontSize:"18px",cursor:"pointer"}}))))):null,r.a.createElement(U.a,{container:!0,spacing:3,style:{margin:"0px"}},e.filteredApps&&e.filteredApps.slice((e.page-1)*e.itemsPerPage,(e.page-1)*e.itemsPerPage+e.itemsPerPage).map((function(a,n){return r.a.createElement(U.a,{item:!0,lg:3,md:4,sm:6,xs:12,className:"image_grid_gallery ".concat(t.image_grid_gallery)},r.a.createElement("div",{className:"inner_image_icons ".concat(t.inner_image_icons)},e.isSelect&&r.a.createElement(r.a.Fragment,null,-1===e.arrSelectedAps.indexOf(a)&&r.a.createElement(Ct.a,{className:"selection-radio",onClick:function(){return e.onSelection(a)}}),e.arrSelectedAps.indexOf(a)>-1&&r.a.createElement(Ot.a,{className:"selection-radio",onClick:function(){return e.onSelection(a,!0)}})),!e.isSelect&&r.a.createElement(vt,{app:a,hash:e.hash,source:"img",hideTags:!0,hideDelete:null!=e.senderId,hideAdd:null!=e.senderId,onAdd:function(){return V(a)},onEdit:function(){return e.openSkyApp(a)},onDelete:function(){return X(a)},onDownload:function(){return W(a)}})),r.a.createElement("img",{alt:a.title,src:ss(a.thumbnail),style:{width:"100%",height:"250px",border:e.arrSelectedAps.indexOf(a)>-1?"2px solid #1ed660":null},onClick:function(){return function(t,a){e.isSelect?-1===e.arrSelectedAps.indexOf(t)?e.onSelection(t):e.onSelection(t,!0):J(0,a)}(a,n)},name:"1"}))}))))))),r.a.createElement(Cr,{userSession:H,open:g,availableSkyspaces:v,onClose:function(){return b(!1)},onSave:Z}))}function Tr(e){var t=Ir;return r.a.createElement(t,{filteredApps:e.filteredApps,page:e.page,skyspace:e.skyspace,itemsPerPage:e.itemsPerPage,openSkyApp:e.openSkyApp,onDelete:e.onDelete,onSelection:e.onSelection,isSelect:e.isSelect,arrSelectedAps:e.arrSelectedAps,hash:e.hash,senderId:e.senderId})}var Nr=a(546),Lr=a.n(Nr),Pr=function(){return{type:"CHANGE_TOPBAR_STATE",payload:!sr.getState().snTopbarDisplay}},Dr=function(e){return{type:"CHANGE_DESKTOP_MENU_STATE",payload:e}},Mr=function(){return Dr(!sr.getState().snShowDesktopMenu)},Rr=Object(jr.a)((function(e){var t;return t={root:{flexGrow:1},appsIcon:{color:e.palette.linksColor},reOrdered:{color:e.palette.linksColor},lowPriorIcon:{color:e.palette.linksColor},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary},input:{display:"none"},sharedSpaceButn:{color:"white",borderRadius:10},formControl:{margin:e.spacing(1),minWidth:120,marginRight:20},icon:{color:e.palette.primary.main},menuColor:{color:e.palette.linksColor}},Object(w.a)(t,"sharedSpaceButn",{color:"white",borderRadius:10}),Object(w.a)(t,"most_main_grid_gallery",{padding:"0px",width:"100%",margin:0}),Object(w.a)(t,"main_grid_gallery",{margin:"auto"}),Object(w.a)(t,"MaintabsPaper_gallery",{paddingTop:"10px",paddingRight:"35px",paddingBottom:"40px",boxShadow:"none",backgroundColor:e.palette.whiteBgColor}),Object(w.a)(t,"tabsPaper_gallery",{padding:"0px",boxShadow:"none",backgroundColor:e.palette.whiteBgColor}),Object(w.a)(t,"gallery_title",{color:e.palette.linksColor,textAlign:"left",fontWeight:"500",fontSize:"20px"}),Object(w.a)(t,"gallery_subTitle",{color:e.palette.primary.main,textAlign:"left",fontSize:"14px"}),Object(w.a)(t,"image_grid_gallery",{padding:"2px !important",display:"flex",justifyContent:"center",alignItems:"flex-end"}),Object(w.a)(t,"gallery_title_btns_grid",{display:"flex",alignItems:"center",flexWrap:"wrap"}),Object(w.a)(t,"gallery_title_head_Alltext",{background:"".concat(e.palette.lightGray),padding:"5px 15px",borderRadius:"5px",color:"".concat(e.palette.primary.textColor),fontSize:"13px"}),Object(w.a)(t,"gallery_title_head_Alltext_menu",{background:"".concat(e.palette.lightGray),padding:"15px 50px",borderRadius:"5px",color:"".concat(e.palette.primary.textColor),fontSize:"13px"}),Object(w.a)(t,"innerValue_All",{background:e.palette.spacesTabsCount,borderRadius:"100%",marginLeft:"7px",fontSize:"11px",padding:"3px",display:"inline-block",width:"25px",color:"".concat(e.palette.primary.main),textAlign:"center"}),Object(w.a)(t,"gallery_title_head_image_text",{background:"".concat(e.palette.lightGray),padding:"5px 15px",borderRadius:"5px",color:"".concat(e.palette.primary.textColor),fontSize:"13px",marginLeft:"15px"}),Object(w.a)(t,"menuverticalIcon_div",{background:"".concat(e.palette.lightGray),padding:"3px",borderRadius:"100%",marginLeft:"10px"}),Object(w.a)(t,"inner_image_icons",{position:"absolute",color:"white",paddingBottom:"10px"}),Object(w.a)(t,"titleBar_onSelect_img_grid_gallery",{marginBottom:"20px",background:"".concat(e.palette.lightGray)}),t}));function Br(e){var t=Rr(),a=Object(p.c)(),s=Object(n.useState)(!1),o=Object(c.a)(s,2),i=o[0],l=o[1],u=Object(n.useState)([]),d=Object(c.a)(u,2),f=d[0],m=d[1],h=Object(n.useState)(),y=Object(c.a)(h,2),g=y[0],b=y[1],k=Object(n.useState)(!1),S=Object(c.a)(k,2),v=S[0],E=S[1],x=Object(n.useState)([]),O=Object(c.a)(x,2),w=O[0],C=O[1],j=r.a.useState(!1),A=Object(c.a)(j,2),T=A[0],L=A[1],D=r.a.useState([]),R=Object(c.a)(D,2),F=R[0],K=R[1],z=Object(p.d)((function(e){return e.userSession})),H=Object(p.d)((function(e){return e.snSkyspaceList})),Y=function(e){a(Et(!0)),en(z,{skylink:e.skylink,fileName:e.name,action:"Download",contentLength:"",contentType:"",skhubId:e.skhubId,skyspaces:[],savedToSkySpaces:!1}).then((function(){a(Et(!1)),os(e.skylink,z)}))},W=function(e,t){a(Mr()),C([{url:ss(e.skylink),type:"video",altTag:e.name}]),a(Pr()),E(!0)},G=function(e){E(!1),C([]),a(Mr()),a(Pr())},J=function(e){var t=e.skhubId;Va(z,t).then((function(e){return console.log("skyspacesForApp ",e),e=null==e?[]:e.skyspaceForSkhubIdList,H.filter((function(t){return!e.includes(t)}))})).then((function(t){console.log("availableSkyspaces",t),null!=t&&t.length>0?(console.log("will show add to skyspace modal"),b(e),l(!0),m(t)):console.log("NO new skyspace available")}))},V=function(e){var t=g;null!=e&&0!==e.lenghth&&(a(Et(!0)),Ja(z,t.skhubId,e).then((function(){a(Et(!1)),l(!1),b(),a(cr())})))},Z=function(t){var n=t.skhubId;a(Et(!0)),"undefined"!=typeof e.skyspace&&e.skyspace?qa(z,e.skyspace,n).then((function(t){a(cr()),a(Et(!1)),e.onDelete()})):Ga(z,n,t.skyspaceList).then((function(t){a(Et(!1)),e.onDelete()}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a,{container:!0,spacing:3,className:" most_main_grid_gallery ".concat(t.most_main_grid_gallery)},r.a.createElement(U.a,{item:!0,xs:12,className:t.main_grid_gallery,style:{paddingTop:"0px"}},r.a.createElement(Ar.a,{className:"".concat(t.paper," ").concat(t.MaintabsPaper_gallery)},r.a.createElement(Ar.a,{className:t.tabsPaper_gallery},T?r.a.createElement(U.a,{container:!0,spacing:3,style:{margin:"0px"}},r.a.createElement(U.a,{item:!0,xs:12,className:t.titleBar_onSelect_img_grid_gallery},r.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-between"}},r.a.createElement("div",null,r.a.createElement(te.a,{variant:"contained",color:"secondary",className:t.button,startIcon:r.a.createElement(B.a,{style:{color:"#1ed660"}}),size:"small",style:{background:"transparent",color:"#636f70",boxShadow:"none"}},"Select all"),r.a.createElement(te.a,{variant:"contained",color:"secondary",className:t.button,startIcon:r.a.createElement(_.a,{style:{color:"#ff3d3d"}}),size:"small",style:{background:"transparent",color:"#636f70",boxShadow:"none",marginLeft:"15px"}},"Delete"),r.a.createElement(te.a,{variant:"contained",color:"secondary",className:t.button,startIcon:r.a.createElement(I.a,{style:{color:"#1ed660"}}),size:"small",style:{background:"transparent",color:"#636f70",boxShadow:"none",marginLeft:"15px"}},"Share"),r.a.createElement(te.a,{variant:"contained",color:"secondary",className:t.button,startIcon:r.a.createElement(N.a,{style:{color:"#1ed660"}}),size:"small",style:{background:"transparent",color:"#636f70",boxShadow:"none",marginLeft:"15px"}},"Move to"),r.a.createElement(te.a,{variant:"contained",color:"secondary",className:t.button,startIcon:r.a.createElement(P.a,{style:{color:"#1ed660"}}),size:"small",style:{background:"transparent",color:"#636f70",boxShadow:"none",marginLeft:"15px"}},"Add to")),r.a.createElement("div",{style:{textAlign:"right"}},F.length," Selected",r.a.createElement(M.a,{onClick:function(){L(!T),e.handleUploadSection(!T),K([])},style:{color:"#1ed660",fontSize:"18px",cursor:"pointer"}}))))):null,r.a.createElement(U.a,{container:!0,spacing:3,style:{margin:"0px"}},e.filteredApps&&e.filteredApps.slice((e.page-1)*e.itemsPerPage,(e.page-1)*e.itemsPerPage+e.itemsPerPage).map((function(a,n){return r.a.createElement(U.a,{item:!0,lg:3,md:4,sm:6,xs:12,className:"image_grid_gallery ".concat(t.image_grid_gallery)},r.a.createElement("div",{className:"inner_image_icons ".concat(t.inner_image_icons)},e.isSelect&&r.a.createElement(r.a.Fragment,null,-1===e.arrSelectedAps.indexOf(a)&&r.a.createElement(Ct.a,{className:"selection-radio",onClick:function(){return e.onSelection(a)}}),e.arrSelectedAps.indexOf(a)>-1&&r.a.createElement(Ot.a,{className:"selection-radio",onClick:function(){return e.onSelection(a,!0)}})),!e.isSelect&&r.a.createElement(vt,{app:a,hash:e.hash,source:"img",hideTags:!0,hideDelete:null!=e.senderId,hideAdd:null!=e.senderId,onAdd:function(){return J(a)},onEdit:function(){return e.openSkyApp(a)},onDelete:function(){return Z(a)},onDownload:function(){return Y(a)}})),r.a.createElement("img",{alt:a.title,src:ss(a.thumbnail),style:{width:"100%",height:"250px",border:e.arrSelectedAps.indexOf(a)>-1?"2px solid #1ed660":null},onClick:function(){return function(t,a){e.isSelect?-1===e.arrSelectedAps.indexOf(t)?e.onSelection(t):e.onSelection(t,!0):W(t)}(a)},name:"1"}))}))))))),v&&r.a.createElement("div",{className:"lightbox-container"},r.a.createElement(Lr.a,{id:"light-box",className:"light-box",data:w,startIndex:0,onCloseCallback:G})),r.a.createElement(Cr,{userSession:z,open:i,availableSkyspaces:f,onClose:function(){return l(!1)},onSave:V}))}function Ur(e){var t=Br;return r.a.createElement(t,{filteredApps:e.filteredApps,page:e.page,skyspace:e.skyspace,itemsPerPage:e.itemsPerPage,openSkyApp:e.openSkyApp,onDelete:e.onDelete,onSelection:e.onSelection,isSelect:e.isSelect,arrSelectedAps:e.arrSelectedAps,hash:e.hash,senderId:e.senderId})}var Fr=Object(jr.a)((function(e){return{spaceIcons:{color:e.palette.primary.main,fontSize:40,fontWeight:400},spaceName:{color:e.palette.primary.main,fontWeight:500},createAtTime:{color:e.palette.mediumGray,fontSize:13},status:{color:e.palette.linksColor,fontWeight:"bold"},tagsBg:{width:72,height:29,borderRadius:50,backgroundColor:e.palette.lightGreen,color:"black",paddingLeft:20,textAlign:"center",paddingRight:20,paddingTop:6,paddingBottom:6,marginLeft:15,fontSize:13,marginBottom:10},tagEditIcon:{color:e.palette.primary.main,fontSize:18},paperStyling:{padding:15,boxShadow:"0 0 10px rgba(0,0,0,.4)",borderRadius:"10px",backgroundColor:e.palette.headerBgColor}}})),Kr=a(783),zr=a.n(Kr),Hr=(a(1143),function(e){return{type:"UPDATE_CURRENT_AUDIO",payload:e}}),Yr=function(e){return{type:"CHANGE_AUDIO_STATUS",payload:e}};function Wr(e){var t=Object(p.c)(),a=Object(p.d)((function(e){return e.SnAudioPlayer.audioList})),n=Object(p.d)((function(e){return e.SnAudioPlayer.playing})),s=Object(p.d)((function(e){return e.SnAudioPlayer.currentAudio}));Object(p.d)((function(e){return e.SnAudioPlayer}));return r.a.createElement("div",{className:"audio-player-wrapper"},r.a.createElement(zr.a,{data:a,play:n,currentAudio:s,showLyricNormal:!1,showDetailLyric:!1,onPlayStatusChange:function(e,a){t(Yr(a))},onAudioChange:function(e,a){!function(e,a){e&&t(Hr(a))}(e,a)}}))}var Gr=a(392),Jr=a.n(Gr),Vr=a(227),Zr=a.n(Vr),Xr=a(547),Qr=a.n(Xr),qr=(a(784),a(516));function $r(e){var t=Fr(),a=Object(p.c)(),s=Object(n.useState)(!1),o=Object(c.a)(s,2),i=o[0],l=o[1],u=Object(n.useState)([]),d=Object(c.a)(u,2),f=d[0],m=d[1],h=Object(n.useState)(),y=Object(c.a)(h,2),g=y[0],b=y[1],k=Object(p.d)((function(e){return e.userSession})),S=Object(p.d)((function(e){return e.snSkyspaceList})),v=Object(p.d)((function(e){return e.SnAudioPlayer.currentAudio})),E=function(e){a(Et(!0)),en(k,{skylink:e.skylink,fileName:e.name,action:"Download",contentLength:"",contentType:"",skhubId:e.skhubId,skyspaces:[],savedToSkySpaces:!1}).then((function(){a(Et(!1)),os(e.skylink,k)}))},x=function(e){var t=e.skhubId;Va(k,t).then((function(e){return console.log("skyspacesForApp ",e),e=null==e?[]:e.skyspaceForSkhubIdList,S.filter((function(t){return!e.includes(t)}))})).then((function(t){console.log("availableSkyspaces",t),null!=t&&t.length>0?(console.log("will show add to skyspace modal"),b(e),l(!0),m(t)):console.log("NO new skyspace available")}))},O=function(e){var t=g;null!=e&&0!==e.lenghth&&(a(Et(!0)),Ja(k,t.skhubId,e).then((function(){a(Et(!1)),l(!1),b(),a(cr())})))},w=function(t){var n=t.skhubId;a(Et(!0)),"undefined"!=typeof e.skyspace&&e.skyspace?qa(k,e.skyspace,n).then((function(t){a(cr()),a(Et(!1)),e.onDelete()})):Ga(k,n,t.skyspaceList).then((function(t){a(Et(!1)),e.onDelete()}))};Object(n.useEffect)((function(){a({type:"SET_AUDIO_LIST",payload:e.filteredApps.map((function(e){return C(e)}))})}),[]);var C=function(e){return{name:e.name,src:ss(e.skylink),id:e.skhubId,img:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMjUgMjUiID48c3R5bGUgdHlwZT0idGV4dC9jc3MiPi5zdDB7ZmlsbC1ydWxlOmV2ZW5vZGQ7Y2xpcC1ydWxlOmV2ZW5vZGQ7fTwvc3R5bGU+PGc+PHBhdGggY2xhc3M9InN0MCIgZD0iTTEyIDNsLjAxIDEwLjU1Yy0uNTktLjM0LTEuMjctLjU1LTItLjU1QzcuNzkgMTMgNiAxNC43OSA2IDE3czEuNzkgNCA0LjAxIDRTMTQgMTkuMjEgMTQgMTdWN2g0VjNoLTZ6bS0xLjk5IDE2Yy0xLjEgMC0yLS45LTItMnMuOS0yIDItMiAyIC45IDIgMi0uOSAyLTIgMnoiLz48L2c+PC9zdmc+"}},j=function(t){var n=e.filteredApps.filter((function(e){return t===e.skhubId}));n.length&&(a(Hr(C(n[0]))),a(Yr(!0)))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a,{container:!0,spacing:3,style:{width:"100%",margin:"auto"}},e.filteredApps&&e.filteredApps.map((function(a,n){!v||(v.id,a.skhubId);return r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a,{item:!0,xs:12,sm:e.GridUi?6:12,style:{marginTop:10}},r.a.createElement(Ar.a,{className:t.paperStyling},r.a.createElement(U.a,{container:!0,spacing:3,style:{width:"100%",margin:"auto"}},r.a.createElement(U.a,{item:!0,xs:12},r.a.createElement("div",{style:{display:"flex",alignItems:"center",flexWrap:"wrap"}},r.a.createElement("div",null,r.a.createElement(Jr.a,{className:t.spaceIcons})),r.a.createElement("div",{style:{paddingLeft:20}},r.a.createElement(kt.a,{variant:"span",className:t.spaceName},lr()(a.name,100,{position:"middle"}))),r.a.createElement("div",{style:{paddingLeft:30}},r.a.createElement(kt.a,{variant:"span",className:t.createAtTime},a.contentType)),r.a.createElement("div",{style:{paddingLeft:30}},r.a.createElement(kt.a,{variant:"span",className:t.createAtTime},ls(a.contentLength))),r.a.createElement("div",{style:{paddingLeft:30}},r.a.createElement(kt.a,{variant:"span",className:t.createAtTime},Zr()(a.createTS).format("MM/DD/YYYY h:mm:ss a"))),e.isSelect&&r.a.createElement("div",{style:{marginLeft:"auto"}},-1===e.arrSelectedAps.indexOf(a)&&r.a.createElement(Ct.a,{className:"selection-radio",onClick:function(){return e.onSelection(a)}}),e.arrSelectedAps.indexOf(a)>-1&&r.a.createElement(Ot.a,{className:"selection-radio",onClick:function(){return e.onSelection(a,!0)}})),!e.isSelect&&r.a.createElement("div",{style:{marginLeft:"auto"}},r.a.createElement(bt.a,{title:"Play",arrow:!0},r.a.createElement(F.a,{onClick:function(){j(a.skhubId)},style:{color:ue}},r.a.createElement(Qr.a,{className:t.spaceIcons})))))),r.a.createElement(U.a,{item:!0,xs:12,style:{paddingTop:0,paddingBottom:0}},r.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},r.a.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"space-between"}},r.a.createElement(U.a,{item:!0,xs:12,style:{paddingTop:0,paddingBottom:0}},r.a.createElement(vt,{app:a,source:"img",hash:e.hash,hideDelete:null!=e.senderId,hideAdd:null!=e.senderId,onAdd:function(){return x(a)},onEdit:function(){return e.openSkyApp(a)},onDelete:function(){return w(a)},onDownload:function(){return E(a)}})))))))))}))),r.a.createElement(Cr,{userSession:k,open:i,availableSkyspaces:f,onClose:function(){return l(!1)},onSave:O}))}a(1156);function es(e){var t=$r;return r.a.createElement(t,{filteredApps:e.filteredApps,page:e.page,skyspace:e.skyspace,itemsPerPage:e.itemsPerPage,openSkyApp:e.openSkyApp,onDelete:e.onDelete,onSelection:e.onSelection,isSelect:e.isSelect,arrSelectedAps:e.arrSelectedAps,hash:e.hash,senderId:e.senderId,GridUi:e.GridUi})}var ts={all:{getLogo:function(){return r.a.createElement(Ge.a,null)},heading:"All"},video:{fileTypeList:["video/x-msvideo","video/mpeg","video/ogg","video/webm","video/3gpp","video/3gpp2","video/mp4"],getLogo:function(e){return r.a.createElement(Ye.a,{icon:"video",className:e||""})},heading:"Videos",cards:function(e,t,a,n,s,o,c,i,l,p,u){return r.a.createElement(Ur,{filteredApps:t,page:e,skyspace:a,itemsPerPage:n,openSkyApp:s,onDelete:p,onSelection:o,isSelect:c,arrSelectedAps:i,hash:l,senderId:u})}},pictures:{fileTypeList:["image/bmp","image/gif","image/x-icon","image/jpeg","image/png","image/svg+xml","image/tiff"],getLogo:function(e){return r.a.createElement(rt.a,{className:e||""})},heading:"Images",cards:function(e,t,a,n,s,o,c,i,l,p,u,d){return r.a.createElement(Tr,{filteredApps:t,page:e,skyspace:a,itemsPerPage:n,openSkyApp:s,onDelete:p,onSelection:o,isSelect:c,arrSelectedAps:i,hash:l,senderId:u})}},audio:{fileTypeList:["audio/aac","audio/mpeg"],getLogo:function(e){return r.a.createElement(Ye.a,{icon:"headphones",className:e||""})},heading:"Audio",cards:function(e,t,a,n,s,o,c,i,l,p,u,d){return r.a.createElement(es,{filteredApps:t,page:e,skyspace:a,itemsPerPage:n,openSkyApp:s,onDelete:p,onSelection:o,isSelect:c,arrSelectedAps:i,hash:l,senderId:u,GridUi:d})}},documents:{fileTypeList:["application/x-abiword","application/x-freearc","application/vnd.amazon.ebook","application/msword","text/html","text/plain","application/pdf"],getLogo:function(e){return r.a.createElement(et.a,{className:e||""})},heading:"Documents"},games:{getLogo:function(e){return r.a.createElement(Xe.a,{className:e||""})},heading:"Games"},blog:{getLogo:function(e){return r.a.createElement(Ye.a,{icon:"blog",className:e||""})},heading:"Blogs"},utilities:{getLogo:function(e){return r.a.createElement(it.a,{className:e||""})},heading:"Utilities"},software:{getLogo:function(e){return r.a.createElement(Ve.a,{className:e||""})},heading:"Software"},livestream:{getLogo:function(e){return r.a.createElement(at.a,{className:e||""})},heading:"LiveStream"},books:{getLogo:function(e){return r.a.createElement(qe.a,{className:e||""})},heading:"Books"},data:{getLogo:function(e){return r.a.createElement(ot.a,{className:e||""})},heading:"Data"}},as=function(){var e=JSON.parse(JSON.stringify(ts));return delete e.all,e},ns=function(){var e=JSON.parse(JSON.stringify(ts));delete e.all;var t=[];for(var a in e)if(e.hasOwnProperty(a)){var n={key:a,label:e[a].heading};t.push(n)}return t},rs=function(e){return null!=e&&null!=e.setting&&null!=e.setting.portal&&""!==e.setting.portal.trim()?e.setting.portal:me},ss=function(e,t){var a="";return 0===e.indexOf("http://")||0===e.indexOf("https://")?a=e:0===e.indexOf("sia://")?a=e.replace("sia://",rs(t)):46===e.length&&(a=rs(t)+e),a},os=function(e,t){var a=ss(e,t);""!==a&&window.open(a,"_blank")},cs=function(){var e=Object(k.a)(b.a.mark((function e(t){var a,n,r,s,o,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.file,n=t.url,r=null,s=new Promise((function(e){r=e})),(o=document.createElement("video")).crossOrigin="anonymous",o.src=n||URL.createObjectURL(a),console.log("video.src",o.src),o.onloadeddata=r,o.load(),e.next=11,s;case 11:return e.next=13,is(o);case 13:return c=e.sent,e.abrupt("return",c);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),is=function(){var e=Object(k.a)(b.a.mark((function e(t){var a,n,r,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=document.createElement("canvas"),n=t.videoWidth,r=t.videoHeight,a.width=n,a.height=r,a.getContext("2d").drawImage(t,0,0,n,r),e.next=9,Ue.a.canvasToFile(a,"image/jpeg");case 9:return s=e.sent,e.abrupt("return",s);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ls=function(e){if(null!=e&&!isNaN(e)){var t=Math.floor(Math.log(e)/Math.log(1024));return 1*(e/Math.pow(1024,t)).toFixed(2)+" "+["B","KB","MB","GB","TB","PB","EB","ZB","YB"][t]}},ps=function(){var e=Object(k.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ue.a)(t,{maxSizeMB:1,maxWidthOrHeight:256,useWebWorker:!0});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),us=function(e,t){var a=as(),n=Object.keys(a).find((function(t){return a[t].fileTypeList&&a[t].fileTypeList.indexOf(e)>-1}));n&&(t.type=n)},ds=function(e,t,a){return function(e,t){var a=[];return t.map((function(e){return a.push(e.skhubId)})),e.filter((function(e){return!a.includes(e.skhubId)}))}(Object(y.a)(new Set([].concat(Object(y.a)(t),Object(y.a)(e)))),a)},fs=function(e){var t="SKYID";return e.skydbseed?t="SKYDB_ID":e.skyid&&(t="SKYID"),t},ms=(a(1157),a(1302));a(1158);function hs(e){return r.a.createElement("svg",Object.assign({viewBox:"0 0 36 40",width:"36",height:"40"},e),r.a.createElement("g",{fill:"none",fillRule:"evenodd"},r.a.createElement("path",{d:"M35.5 16.207L19.793.5H2A1.5 1.5 0 00.5 2v36A1.5 1.5 0 002 39.5h32a1.5 1.5 0 001.5-1.5V16.207z",stroke:"#C5CEC7",fill:"#FFF"}),r.a.createElement("path",{d:"M20 1l15 15H22a2 2 0 01-2-2V1z",fill:"#C5CEC7"})))}function ys(e){return r.a.createElement("svg",Object.assign({width:38,height:42,viewBox:"0 0 38 42"},e),r.a.createElement("g",{fill:"none",fillRule:"evenodd"},r.a.createElement("path",{d:"M3 1h18l16 16v22a2 2 0 01-2 2H3a2 2 0 01-2-2V3a2 2 0 012-2zm12 24l3 3 5-5",stroke:"#57B560",strokeWidth:2,strokeLinejoin:"round"}),r.a.createElement("path",{d:"M21 2l15 15H23a2 2 0 01-2-2V2z",fill:"#57B560"})))}function gs(e){return r.a.createElement("svg",Object.assign({width:38,height:42,viewBox:"0 0 38 42"},e),r.a.createElement("g",{fill:"none",fillRule:"evenodd"},r.a.createElement("path",{d:"M3 1h18l16 16v22a2 2 0 01-2 2H3a2 2 0 01-2-2V3a2 2 0 012-2zm15 21v7m0 2v2",stroke:"#E65C5C",strokeWidth:2,strokeLinejoin:"round"}),r.a.createElement("path",{d:"M21 2l15 15H23a2 2 0 01-2-2V2z",fill:"#E65C5C"})))}function bs(e){return r.a.createElement("svg",Object.assign({width:26,height:26,viewBox:"0 0 26 26"},e),r.a.createElement("path",{d:"M13 25c6.627 0 12-5.373 12-12S19.627 1 13 1 1 6.373 1 13",stroke:"#171917",strokeWidth:2,fill:"none",fillRule:"evenodd",strokeLinejoin:"round"}))}function ks(e){return r.a.createElement("svg",Object.assign({width:12,height:14,viewBox:"0 0 12 14"},e),r.a.createElement("path",{d:"M8 1H4a3 3 0 00-3 3v6h0m4-6h5a1 1 0 011 1v7a1 1 0 01-1 1H5a1 1 0 01-1-1V5a1 1 0 011-1z",stroke:"currentColor",strokeWidth:2,fill:"none",fillRule:"evenodd",strokeLinejoin:"round"}))}a(1159);function Ss(){return r.a.createElement("div",{className:"loading-spinner"},r.a.createElement(bs,null))}function vs(e){var t=e.file,a=e.url,s=e.status,o=e.progress,i=e.error,l=Object(n.useState)(!1),p=Object(c.a)(l,2),u=p[0],d=p[1],f=Object(n.useRef)(null);Object(n.useEffect)((function(){if(u){var e=setTimeout((function(){d(!1)}),1500);return function(){return clearTimeout(e)}}}),[u,d]);var m=u?"Copied!":"Copy to clipboard";return r.a.createElement("div",{className:"upload-file"},r.a.createElement("div",{className:"upload-file-icon"},"uploading"===s||"processing"===s?r.a.createElement(hs,null):"error"===s?r.a.createElement(gs,null):r.a.createElement(ys,null)),r.a.createElement("div",{className:"upload-file-text"},r.a.createElement("h3",null,t.name),r.a.createElement("p",null,"uploading"===s&&function(e){return-1===e?"Waiting...":e>0?"Uploading ".concat(Math.round(100*e),"%"):"Uploading..."}(o),"processing"===s&&"Processing...","error"===s&&r.a.createElement("span",{className:"red-text"},i||"Upload failed."),"complete"===s&&r.a.createElement("a",{href:a,className:"url green-text",target:"_blank",rel:"noopener noreferrer"},a))),("uploading"===s||"processing"===s)&&r.a.createElement("div",{className:"upload-file-loading"},r.a.createElement(Ss,null)),"complete"===s&&r.a.createElement("button",{onClick:function(e){f.current.select(),document.execCommand("copy"),e.target.focus(),d(!0)},className:"upload-file-copy"},r.a.createElement("p",{className:"upload-file-copy-tooltip"},m),r.a.createElement("div",{className:"upload-file-copy-button"},"Copy Link",r.a.createElement(ks,null)),r.a.createElement("textarea",{value:a,ref:f,readOnly:!0})))}function Es(e){return r.a.createElement(ms.a,Object.assign({elevation:6,variant:"filled"},e))}var xs=r.a.forwardRef((function(e,t){var a=Object(p.c)(),s=Object(n.useState)([]),o=Object(c.a)(s,2),i=o[0],l=o[1],u=Object(n.useState)(!1),d=Object(c.a)(u,2),f=d[0],m=d[1],g=Object(n.useState)(!1),S=Object(c.a)(g,2),v=S[0],E=(S[1],null!=e.portal?e.portal:me),x=Object(n.useRef)(),O=new Zt.SkynetClient(E);Object(n.useEffect)((function(){a(Be(i)),e.onUploadProgress&&e.onUploadProgress(i)}),[i]),Object(n.useEffect)((function(){e.directoryMode||v?P.current.setAttribute("webkitdirectory","true"):P.current.removeAttribute("webkitdirectory")}),[e.directoryMode,v]);var C=function(e){return e.webkitRelativePath||e.path||e.name},j=function(e){var t=C(e),a=Ke.a.parse(t),n=a.root,r=a.dir,s=a.base,o=Ke.a.normalize(r).slice(n.length).split(Ke.a.sep).slice(1);return Ke.a.join.apply(Ke.a,Object(y.a)(o).concat([s]))},_=function(e){var t=C(e),a=Ke.a.parse(t),n=a.root,r=a.dir;return Ke.a.normalize(r).slice(n.length).split(Ke.a.sep)[0]},A=function(e){if(e.response){if(e.response.data.message)return"Upload failed with error: ".concat(e.response.data.message);var t=e.response.status,a=De.a.getStatusText(e.response.status);return"Upload failed, our server received your request but failed with status code: ".concat(t," ").concat(a)}return e.request?navigator.onLine?"Server failed to respond to your request, please try again later.":"You are offline, please connect to the internet and try again":"Critical error, please refresh the application and try again. ".concat(e.message)},I=function(){var t=Object(k.a)(b.a.mark((function t(a){var n,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(e.directoryMode||v)&&a.length&&(n=_(a[0]),a=[{name:n,directory:!0,files:a}]),l((function(e){return[].concat(Object(y.a)(a.map((function(e){return{file:e,status:"uploading"}}))),Object(y.a)(e))})),r=function(e,t){l((function(a){var n=a.findIndex((function(t){return t.file===e}));return[].concat(Object(y.a)(a.slice(0,n)),[Object(h.a)(Object(h.a)({},a[n]),t)],Object(y.a)(a.slice(n+1)))}))},t.next=5,a.reduce(function(){var t=Object(k.a)(b.a.mark((function t(a,n){var s,o,c,i,l,p;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a;case 2:if(!(n.size>Re()("1 GB"))){t.next=5;break}return r(n,{status:"error",error:"This file size exceeds the maximum allowed size of 1 GB."}),t.abrupt("return");case 5:if(e.onUploadStart&&e.onUploadStart(),!(s=n.type)||!s.startsWith("image")){t.next=14;break}return t.next=10,ps(n);case 10:return c=t.sent,t.next=13,O.uploadFile(c);case 13:o=t.sent;case 14:if(!s||!s.startsWith("video")){t.next=21;break}return t.next=17,cs({file:n});case 17:return i=t.sent,t.next=20,O.uploadFile(i);case 20:o=t.sent;case 21:return l=function(e){r(n,{status:1===e?"processing":"uploading",progress:e})},p=function(){var t=Object(k.a)(b.a.mark((function t(){var a,c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!n.directory){t.next=8;break}return c=n.files.reduce((function(e,t){return Object(h.a)(Object(h.a)({},e),{},Object(w.a)({},j(t),t))}),{}),t.next=5,O.uploadDirectory(c,encodeURIComponent(n.name),{onUploadProgress:l});case 5:a=t.sent,t.next=11;break;case 8:return t.next=10,O.uploadFile(n,{onUploadProgress:l});case 10:a=t.sent;case 11:return t.next=13,e.onUpload({skylink:Object(Zt.parseSkylink)(a),name:n.name,contentType:s,thumbnail:null!=o?Object(Zt.parseSkylink)(o):null,contentLength:n.size});case 13:r(n,{status:"complete",url:O.getSkylinkUrl(a)}),e.onUploadEnd&&e.onUploadEnd(),t.next=25;break;case 17:if(t.prev=17,t.t0=t.catch(0),!t.t0.response||t.t0.response.status!==De.a.TOO_MANY_REQUESTS){t.next=22;break}return r(n,{progress:-1}),t.abrupt("return",new Promise((function(e){return setTimeout((function(){return e(p())}),3e3)})));case 22:r(n,{status:"error",error:A(t.t0)}),m(!0),e.onUploadEnd&&e.onUploadEnd();case 25:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(){return t.apply(this,arguments)}}(),t.next=25,p();case 25:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),void 0);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();Object(n.useImperativeHandle)(t,(function(){return{handleDrop:I,gridRef:x}}));var T=Object(He.a)({onDrop:I}),N=T.getRootProps,L=T.getInputProps,P=(T.isDragActive,T.inputRef);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:""},r.a.createElement("div",Object.assign({container:!0,spacing:3,className:"drpZone_main_grid"},N(),{ref:x}),r.a.createElement(U.a,{item:!0,xs:12,className:"MuiDropzoneArea-root"},r.a.createElement("div",{style:{paddingTop:"20px",paddingBottom:"20px"}},r.a.createElement("div",null,r.a.createElement(Le.a,{style:{fontSize:"55px",color:"#c5c5c5",marginBottom:"10px"}})),r.a.createElement("span",{style:{fontSize:14,fontWeight:"bold",color:"#c5c5c5"}},"Drop a ",e.directoryMode||v?"directory":"file"," here or",r.a.createElement("span",{style:{color:"#1ed660",marginLeft:"3px"}},"click here to upload"))))),r.a.createElement("input",Object.assign({id:"idInp"},L(),{className:"offscreen"}))),i.length>0&&r.a.createElement("div",{className:"home-uploaded-files d-none"},i.map((function(e,t){return r.a.createElement(vs,Object.assign({key:t},e))}))),r.a.createElement(ze.a,{open:f,autoHideDuration:4e3,onClose:function(){return m(!1)}},r.a.createElement(Es,{onClose:function(){return m(!1)},severity:"error"},"Error on upload!")))})),Os=a(1303),ws=a(765),Cs=(a(734),a(1292)),js=(a(1304),a(118)),_s=a.n(js),As=r.a.forwardRef((function(e,t){return r.a.createElement(ae.a,Object.assign({direction:"up",ref:t},e))})),Is=function(e){Object(x.a)(a,e);var t=Object(O.a)(a);function a(){var e;Object(S.a)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).displayContent=function(){switch(e.props.type){case"public-share":return r.a.createElement(X.a,null,r.a.createElement(Q.a,{id:"alert-dialog-description"},"Skylinks are available at the following public link :"),r.a.createElement(Q.a,null,r.a.createElement(r.a.Fragment,null,e.props.content,r.a.createElement(bt.a,{title:"Copy Skylink to clipboard",arrow:!0},r.a.createElement(_s.a,{onClick:function(){return navigator.clipboard.writeText(e.props.content)},className:"cursor-pointer",style:{color:ue,paddingLeft:5}})))));default:return r.a.createElement(X.a,null,r.a.createElement(Q.a,{id:"alert-dialog-description"},e.props.content,e.props.showClipboardCopy&&r.a.createElement(bt.a,{title:e.props.clipboardCopyTooltip||"Copy Skylink to clipboard",arrow:!0},r.a.createElement(_s.a,{onClick:function(){return navigator.clipboard.writeText(e.props.content)},className:"cursor-pointer",style:{color:ue,paddingLeft:5}}))))}},e}return Object(v.a)(a,[{key:"render",value:function(){return r.a.createElement(G.a,{open:this.props.open,onClose:this.props.onClose,TransitionComponent:As,keepMounted:!0,maxWidth:"lg","aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(ee.a,{id:"alert-dialog-title"},this.props.title),this.displayContent(),r.a.createElement(Z.a,null,r.a.createElement(te.a,{onClick:this.props.onClose,autoFocus:!0,variant:"contained",color:"primary",className:"btn-bg-color",startIcon:r.a.createElement($.a,null)},"OK")))}}]),a}(r.a.Component);function Ts(e){return r.a.createElement(ms.a,Object.assign({elevation:6,variant:"filled"},e))}var Ns=function(e){Object(x.a)(a,e);var t=Object(O.a)(a);function a(e){var n;return Object(S.a)(this,a),(n=t.call(this,e)).launchSkyLink=function(e){os(e,n.props.snUserSetting)},n.removeFromSkyspace=Object(k.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.props.app.skhubId,"undefined"==typeof n.props.skyspace||!n.props.skyspace){e.next=6;break}return e.next=4,qa(n.props.userSession,n.props.skyspace,t);case 4:e.next=8;break;case 6:return e.next=8,Ga(n.props.userSession,t,n.props.app.skyspaceList);case 8:n.props.fetchSkyspaceAppCount(),n.props.setLoaderDisplay(!1),n.props.onDelete();case 11:case"end":return e.stop()}}),e)}))),n.handleSkyspaceAdd=function(e){var t=e.skhubId;Va(n.props.userSession,t).then((function(e){var t=[];return null!=e&&null!=e.skyspaceForSkhubIdList&&(t=e.skyspaceForSkhubIdList),n.props.snSkyspaceList.filter((function(e){return-1===t.indexOf(e)}))})).then((function(e){if(null!=e&&e.length>0)n.setState({showAddToSkyspace:!0,availableSkyspaces:e});else{var t=n.state.snInfoModal;t.open=!0,n.setState({snInfoModal:t})}}))},n.saveAddToSkyspaceChanges=function(){var e=Object(k.a)(b.a.mark((function e(t,a){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==a||0===a.lenghth){e.next=8;break}return n.props.setLoaderDisplay(!0),e.next=4,Ja(n.props.userSession,t.skhubId,a);case 4:n.props.setLoaderDisplay(!1),n.setState({showAddToSkyspace:!1}),n.props.fetchSkyspaceAppCount(),n.props.fetchSkyspaceDetail();case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),n.download=function(e){n.props.setLoaderDisplay(!0),en(n.props.userSession,{skylink:e.skylink,fileName:e.name,action:"Download",contentLength:"",contentType:"",skhubId:e.skhubId,skyspaces:[],savedToSkySpaces:!1}).then((function(){n.props.setLoaderDisplay(!1),n.launchSkyLink(e.skylink)}))},n.copyToClipboard=function(e){navigator.clipboard.writeText(n.props.app.skylink),n.setState({openCopySuccess:!0})},n.closeCopySucess=function(){n.setState({openCopySuccess:!1})},n.renderOtherSpaces=function(){if(n.props.allSpacesObj){var e=Object.keys(n.props.allSpacesObj).filter((function(e){var t;return n.props.allSpacesObj.hasOwnProperty(e)&&n.props.skyspace!==e&&(null===(t=n.props.allSpacesObj[e])||void 0===t?void 0:t.indexOf(n.props.app.skhubId))>-1}));return e&&e.length>0?r.a.createElement("div",null,r.a.createElement("span",{className:"pr-2 pl-2"},r.a.createElement("b",null,"Other Spaces:")),e.map((function(e,t){return r.a.createElement(pr.a,{key:t,label:e,variant:"outlined",size:"small",style:{backgroundColor:ue}})}))):""}},n.state={expanded:!1,openCopySuccess:!1,showAddToSkyspace:!1,isSelected:!1,availableSkyspaceToAddTo:[],snInfoModal:{open:!1,onClose:function(){var e=n.state.snInfoModal;e.open=!1,n.setState({snInfoModal:e})},title:"Add To Spaces",description:"This Skylink is already present in all Spaces."}},n.openSkyApp=n.openSkyApp.bind(Object(E.a)(n)),n.trimDescription=n.trimDescription.bind(Object(E.a)(n)),n}return Object(v.a)(a,[{key:"componentDidUpdate",value:function(e,t,a){e.isSelect!==this.props.isSelect&&this.setState({isSelected:!1})}},{key:"trimDescription",value:function(e,t){return e&&e.length>t?e.slice(0,t-3)+"...":e}},{key:"openSkyApp",value:function(e){this.props.onOpenSkyApp(e)}},{key:"render",value:function(){var e=this,t=this.props,a=t.app,n=t.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a,{item:!0,xs:12,sm:this.props.GridUi?6:12,style:{marginTop:10}},r.a.createElement(Ar.a,{className:n.paperStyling},r.a.createElement(U.a,{container:!0,spacing:3,style:{width:"100%",margin:"auto"}},r.a.createElement(U.a,{item:!0,xs:12},r.a.createElement("div",{style:{display:"flex",alignItems:"center",flexWrap:"wrap"}},r.a.createElement("div",null,null!=a.type&&le(a.type).map((function(e,t){return null!=ts[e]?ts[e].getLogo(n.spaceIcons):r.a.createElement(r.a.Fragment,null)}))),r.a.createElement("div",{style:{paddingLeft:20,cursor:"pointer"},onClick:function(){e.download(a)}},r.a.createElement(kt.a,{variant:"span",className:n.spaceName},lr()(a.name,100,{position:"middle"}))),r.a.createElement("div",{style:{paddingLeft:30}},r.a.createElement(kt.a,{variant:"span",className:n.createAtTime},a.contentType)),r.a.createElement("div",{style:{paddingLeft:30}},r.a.createElement(kt.a,{variant:"span",className:n.createAtTime},ls(a.contentLength))),r.a.createElement("div",{style:{paddingLeft:30}},r.a.createElement(kt.a,{variant:"span",className:n.createAtTime},Zr()(a.createTS).format("MM/DD/YYYY h:mm:ss a"))),this.props.isSelect&&r.a.createElement("div",{style:{marginLeft:"auto"}},-1===this.props.arrSelectedAps.indexOf(a)&&r.a.createElement(Ct.a,{className:n.tagEditIcon,onClick:function(){return e.props.onSelection(a)}}),this.props.arrSelectedAps.indexOf(a)>-1&&r.a.createElement(Ot.a,{className:n.tagEditIcon,onClick:function(){return e.props.onSelection(a,!0)}}))),r.a.createElement("div",{className:(n.createAtTime,n.skylink)},a.skylink," ",r.a.createElement(bt.a,{title:"Copy Skylink to clipboard",arrow:!0},r.a.createElement(_s.a,{onClick:this.copyToClipboard,className:"cursor-pointer",style:{color:ue,paddingLeft:5}})))),r.a.createElement(U.a,{item:!0,xs:12,style:{paddingTop:0}},r.a.createElement("div",{style:{paddingLeft:62}},this.trimDescription(a.description,200),this.renderOtherSpaces())),r.a.createElement(U.a,{item:!0,xs:12,style:{paddingTop:0,paddingBottom:0}},r.a.createElement(vt,{app:a,hash:this.props.hash,hideDelete:null!=this.props.senderId,hideAdd:null!=this.props.senderId,onAdd:function(){return e.handleSkyspaceAdd(a)},onEdit:function(){return e.openSkyApp(a)},onLaunch:function(){return e.launchSkyLink(a.skylink)},onDelete:function(){return e.removeFromSkyspace()},onDownload:function(){return e.download(a)}}))))),r.a.createElement(Cr,{userSession:this.props.userSession,open:this.state.showAddToSkyspace,availableSkyspaces:this.state.availableSkyspaces,onClose:function(){return e.setState({showAddToSkyspace:!1})},onSave:function(t){return e.saveAddToSkyspaceChanges(a,t)}}),r.a.createElement(Is,{open:this.state.snInfoModal.open,onClose:this.state.snInfoModal.onClose,title:this.state.snInfoModal.title,content:this.state.snInfoModal.description}),r.a.createElement(ze.a,{open:this.state.openCopySuccess,autoHideDuration:3e3,onClose:this.closeCopySucess},r.a.createElement(Ts,{onClose:this.closeCopySucess,severity:"success"},"Skylink successfully copied to clipboard!")))}}]),a}(r.a.Component),Ls=Object(ht.a)(dt)(Object(p.b)((function(e){return{isShowing:e.snLoader,snApps:e.snApps,snUserSetting:e.snUserSetting,snSkyspaceList:e.snSkyspaceList,userSession:e.userSession}}),(function(e){return Object(_t.bindActionCreators)({setLoaderDisplay:Et,fetchAppDetail:Ln,fetchSkyspaceAppCount:cr,fetchSkyspaceDetail:Kn},e)}))(Ns)),Ps=function(e){return{type:"ACT_TY_SET_PUBLIC_HASH",payload:e}},Ds=function(e){return{type:"ACT_TY_SET_PUBLIC_IN_MEMORY",payload:e}};var Ms=a(1300),Rs=function(e){Object(x.a)(a,e);var t=Object(O.a)(a);function a(e){var n;return Object(S.a)(this,a),(n=t.call(this,e)).onChange=n.onChange.bind(Object(E.a)(n)),n}return Object(v.a)(a,[{key:"onChange",value:function(e,t){this.props.onChange(t)}},{key:"getPaginationCount",value:function(){var e=this.props.totalCount;return Math.ceil(e/9)}},{key:"render",value:function(){var e=this.props.page;return r.a.createElement(Ms.a,{count:this.getPaginationCount(),page:e,onChange:this.onChange,color:"primary",style:{margin:"auto"},className:"cards-pagination"})}}]),a}(r.a.Component),Bs=a(793),Us=a.n(Bs),Fs=a(792),Ks=a.n(Fs),zs=a(334),Hs=a.n(zs),Ys=function(e){var t=e.file,a=t.file,n=t.progress,s=t.status,o=t.url;return r.a.createElement("div",{className:Hs.a.wrapperItem},r.a.createElement("div",{className:Hs.a.leftSide},r.a.createElement("div",{className:Hs.a.progressBar},r.a.createElement("div",{style:{width:"".concat(100*(isNaN(n)||"error"===s?0:n),"%")}})),r.a.createElement("label",null,a.directory?a.name:a.path),r.a.createElement("label",null,"complete"!==s?s:function(e){return r.a.createElement(r.a.Fragment,null,lr()(e,40),r.a.createElement(_s.a,{onClick:function(){return t=e,void navigator.clipboard.writeText(t);var t},className:"cursor-pointer icn-app-bg-clr",style:{fontSize:15}}))}(o))),r.a.createElement("span",{className:Hs.a.percentage},100*(isNaN(n)||"error"===s?0:n.toFixed(2)),"%"))},Ws=a(446),Gs=a.n(Ws),Js=Object(jr.a)((function(e){return{root:{border:"1px solid ".concat(e.palette.lightGreen),backgroundColor:e.palette.headerBgColor,color:e.palette.linksColor}}})),Vs=Object(p.b)((function(e){return{fileProgress:e.snUploadList}}))((function(e){var t=e.fileProgress,a=(e.uploadFile,t.length),s=Object(n.useState)(!1),o=Object(c.a)(s,2),i=o[0],l=o[1],p=Js();Object(n.useEffect)((function(){i&&l(!1)}),[a]);return a>0?r.a.createElement("div",{className:"".concat(Gs.a.wrapper," ").concat(p.root),style:i?{overflowY:"hidden"}:{}},r.a.createElement("div",{className:Gs.a.uploadFileStatusTitle+" app-bg-color cursor-pointer",onClick:function(){return l(!i)}},"File Upload",!i&&r.a.createElement(Ks.a,{className:"cursor-pointer"}),i&&r.a.createElement(Us.a,{className:"cursor-pointer"})),r.a.createElement("div",{className:Gs.a.progressContainer,style:i?{height:0}:{}},t&&t.length>0?t.map((function(e,t){return r.a.createElement(Ys,{key:t,file:e})})):null)):null})),Zs=(a(1160),a(531),function(){return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row c4-row-div"},r.a.createElement("div",{className:"col-xl-4 col-lg-4 col-md-4 col-sm-3 image-logo_col-footer"}),r.a.createElement("div",{className:"col-xl-4 col-lg-4 col-md-6 col-sm-8"},r.a.createElement("div",{className:"ccolm2-main-div"},r.a.createElement(d.b,{rel:"noopener noreferrer",href:"https://github.com/skynethubio/skhub-appstore-ui#donation",target:"_blank",className:"span-donate"},"Donate"),r.a.createElement(d.b,{rel:"noopener noreferrer",target:"_blank",href:"https://skyspace.hns.siasky.net/skapp/SkySpaces-Privacy Notice.pdf",className:"span-privacy"},"Privacy"),r.a.createElement(d.b,{rel:"noopener noreferrer",target:"_blank",href:"https://skyspace.hns.siasky.net/skapp/SkySpaces-Terms.pdf",className:"span-terms"},"Terms"),r.a.createElement("a",{href:"https://twitter.com/HelloSkySpaces",target:"_blank",rel:"noopener noreferrer",className:"span-twitter"},r.a.createElement("i",{class:"fab fa-twitter"})),r.a.createElement("a",{href:"https://discord.gg/w7TWJR",target:"_blank",rel:"noopener noreferrer",className:"span-twitter"},r.a.createElement("i",{class:"fab fa-discord"})),r.a.createElement("a",{href:"https://feedback-skyspaces.herokuapp.com",target:"_blank",rel:"noopener noreferrer",className:"span-twitter"},r.a.createElement("i",{class:"far fa-comment"})),r.a.createElement("a",{href:"mailto:hello@skyspaces.io",target:"_blank",rel:"noopener noreferrer",className:"span-twitter"},r.a.createElement("i",{class:"far fa-envelope"})))),r.a.createElement("div",{className:"col-xl-4 col-lg-4 col-md-2 col-12"})))}),Xs=a(38),Qs=a(1240),qs=a(316),$s=a.n(qs),eo=Object(jr.a)((function(e){var t;return t={root:{flexGrow:1},appsIcon:{color:e.palette.linksColor},reOrdered:{color:e.palette.linksColor},lowPriorIcon:{color:e.palette.linksColor},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary},input:{display:"none"},sharedSpaceButn:{color:"white",borderRadius:10},formControl:{margin:e.spacing(1),minWidth:120,marginRight:20},icon:{color:e.palette.primary.main},menuColor:{color:e.palette.linksColor}},Object(w.a)(t,"sharedSpaceButn",{color:"white",borderRadius:10}),Object(w.a)(t,"most_main_grid_gallery",{padding:"0px",width:"100%",margin:0}),Object(w.a)(t,"main_grid_gallery",{margin:"auto"}),Object(w.a)(t,"MaintabsPaper_gallery",{paddingTop:"10px",paddingRight:"35px",paddingBottom:"40px",boxShadow:"none",backgroundColor:e.palette.whiteBgColor}),Object(w.a)(t,"tabsPaper_gallery",{padding:"0px",boxShadow:"none",backgroundColor:e.palette.whiteBgColor}),Object(w.a)(t,"gallery_title",{color:e.palette.linksColor,textAlign:"left",fontWeight:"500",fontSize:"20px"}),Object(w.a)(t,"gallery_subTitle",{color:e.palette.primary.main,textAlign:"left",fontSize:"14px"}),Object(w.a)(t,"image_grid_gallery",{padding:"2px !important",display:"flex",justifyContent:"center",alignItems:"flex-end"}),Object(w.a)(t,"gallery_title_btns_grid",{display:"flex",alignItems:"center",flexWrap:"wrap"}),Object(w.a)(t,"gallery_title_head_Alltext",{background:"".concat(e.palette.lightGray),padding:"5px 15px",borderRadius:"5px",color:"".concat(e.palette.primary.textColor),fontSize:"13px"}),Object(w.a)(t,"gallery_title_head_Alltext_menu",{background:"".concat(e.palette.lightGray),padding:"15px 50px",borderRadius:"5px",color:"".concat(e.palette.primary.textColor),fontSize:"13px"}),Object(w.a)(t,"innerValue_All",{background:e.palette.spacesTabsCount,borderRadius:"100%",marginLeft:"7px",fontSize:"11px",padding:"3px",display:"inline-block",width:"25px",color:"".concat(e.palette.primary.main),textAlign:"center"}),Object(w.a)(t,"gallery_title_head_image_text",{background:"".concat(e.palette.lightGray),padding:"5px 15px",borderRadius:"5px",color:"".concat(e.palette.primary.textColor),fontSize:"13px",marginLeft:"15px"}),Object(w.a)(t,"menuverticalIcon_div",{background:"".concat(e.palette.lightGray),padding:"3px",borderRadius:"100%",marginLeft:"10px"}),Object(w.a)(t,"inner_image_icons",{position:"absolute",color:"white",paddingBottom:"10px"}),Object(w.a)(t,"titleBar_onSelect_img_grid_gallery",{marginBottom:"20px",background:"".concat(e.palette.lightGray)}),t}));function to(e){eo(),Object(Xs.a)();var t=r.a.useState(null),a=Object(c.a)(t,2),n=a[0],s=a[1],o=Boolean(n),i=o?"simple-popover":void 0;return r.a.createElement("div",{className:"most_main_grid_gallery"},r.a.createElement($s.a,{onClick:function(e){s(e.currentTarget)},style:{color:"#1ed660",cursor:"pointer"}}),r.a.createElement(Qs.a,{id:i,open:o,anchorEl:n,onClose:function(){s(null)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},e.children))}Object(ht.a)((function(e){return{input:{borderRadius:4,position:"relative",backgroundColor:"white",color:e.palette.linksColor,fontSize:16,padding:"10px 26px 10px 12px","&:focus":{backgroundColor:"white"}}}}))(W.a);var ao=function(e){Object(x.a)(a,e);var t=Object(O.a)(a);function a(e){var n;return Object(S.a)(this,a),(n=t.call(this,e)).setActiveStep=function(e){return n.setState({activeStep:e})},n.setFilterSelection=function(e){return n.setState({filterSelection:e})},n.setGridUi=function(e){return n.setState({GridUi:e})},n.handleUploadSection=function(e){n.setIsTrue(e)},n.handleChange=function(e){n.setFilterSelection(e.target.value)},n.getStepContent=function(e){switch(e){case 0:case 1:case 2:case 3:return{};default:return"unknown step"}},n.getStepContentForList=function(e){switch(e){case 0:case 1:case 2:case 3:return{};default:return"unknown step"}},n.updateSwitches=function(e){var t=n.state.filterCriteria;t.switchFilterList=e,n.setState({filterCriteria:t})},n.updateTagFilterList=function(e){var t=n.state.filterCriteria;t.tagFilterList=e,t.page=1,n.setState({filterCriteria:t})},n.udpdatePage=function(e){var t=n.state.filterCriteria;t.page=e,n.setState({filterCriteria:t})},n.getSearchKeyFromQuery=function(){var e=n.props.location.search;return decodeURIComponent(e.replace("?query=",""))},n.getCategoryWiseCount=function(){var e,t={};return(null===(e=n.props.snApps)||void 0===e?void 0:e.length)>0&&n.props.snApps.forEach((function(e){e&&(t[e.type]=t[e.type]?t[e.type]+1:1)})),t},n.tagFilter=function(e){return!e||0===n.state.filterCriteria.tagFilterList.length||le(e.type).filter((function(e){return n.state.filterCriteria.tagFilterList.indexOf(e)>-1})).length>0},n.handleSkyspaceAdd=function(e){var t=e.skhubId;Va(n.props.userSession,t).then((function(e){return console.log("skyspacesForApp ",e),null==e&&(e=[]),n.props.snSkyspaceList.filter((function(t){return!e.includes(t)}))})).then((function(e){console.log("availableSkyspaces",e),null!=e&&e.length>0?n.setState({showAddToSkyspace:!0,availableSkyspaces:e}):console.log("NO new skyspace available")}))},n.selectApp=function(e,t){var a=n.state.arrSelectedAps;if(t){var r=a.indexOf(e);r>-1&&a.splice(r,1)}else a.push(e);n.setState({arrSelectedAps:a})},n.renderCards=function(e,t,a,s){var o=n.state.filterCriteria.tagFilterList,c="";return null!=o&&o.length>0&&(c=o[0]),null!=ts[c]&&null!=ts[c].cards?ts[c].cards(t,e,s,9,n.openSkyApp,(function(e,t){return n.selectApp(e,t)}),n.state.isSelect,n.state.arrSelectedAps,n.state.hash,(function(){return n.getAppList(n.state.category,n.state.skyspace,n.state.fetchAllSkylinks)}),n.state.senderId,n.state.GridUi):r.a.createElement(U.a,{container:!0,spacing:3,style:{width:"100%",margin:"auto"}},e.slice(9*(t-1),9*(t-1)+9).map((function(t,a){return 1,r.a.createElement(Ls,{key:a,app:t,GridUi:n.state.GridUi,hash:n.state.hash,isSelect:n.state.isSelect,arrSelectedAps:n.state.arrSelectedAps,skyspace:s,senderId:n.state.senderId,allSpacesObj:n.props.snSkyspaceDetail,cardCount:e.length,onSelection:function(e,t){return n.selectApp(e,t)},onOpenSkyApp:n.openSkyApp,onDelete:function(){n.props.fetchSkyspaceDetail(),n.getAppList(n.state.category,n.state.skyspace,n.state.fetchAllSkylinks)}})})))},n.createSkylinkPublicShare=Object(k.a)(b.a.mark((function e(){var t,a,r,s,o,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===n.state.arrSelectedAps.length){e.next=15;break}return n.props.setLoaderDisplay(!0),r=da({data:n.state.arrSelectedAps,history:[{creationDate:new Date}]}),s=(null===(t=n.props.snUserSetting)||void 0===t||null===(a=t.setting)||void 0===a?void 0:a.portal)||me,e.next=6,new Zt.SkynetClient(s).uploadFile(r);case 6:(o=e.sent)&&(o={skylink:Object(Zt.parseSkylink)(o)}),(c={skylink:"",fileName:"",contentLength:"",contentType:"",httpMetadata:"",action:"",skhubId:"",skyspaces:[],savedToSkySpaces:!1}).fileName="Public Share",c.skylink=o.skylink,c.action="Public Share",en(n.props.userSession,c),n.setState({showInfoModal:!0,onInfoModalClose:function(){return n.setState({showInfoModal:!1})},infoModalContent:"https://skyspace.hns.".concat(n.state.portalHost,"/skapp/index.html#/").concat("public-sharing/","?content=").concat(o.skylink)}),n.props.setLoaderDisplay(!1);case 15:case"end":return e.stop()}}),e)}))),n.deleteFromPublic=function(e){if(e.preventDefault(),n.state.isSelect&&n.state.arrSelectedAps.length>0){console.log("public apps to delete ",n.state.arrSelectedAps);var t=n.props.snPublicInMemory;t.deletedSkapps=Object(y.a)(new Set([].concat(Object(y.a)(t.deletedSkapps),Object(y.a)(n.state.arrSelectedAps)))),n.props.setApps(ds(n.props.snApps,t.addedSkapps,t.deletedSkapps))}},n.onPublicUpload=function(e){var t=Object(h.a)(Object(h.a)({},At()),e);us(t.contentType,t),t.skhubId=Object(Os.a)();var a=n.props.snPublicInMemory;a.addedSkapps=Object(y.a)(new Set([t].concat(Object(y.a)(a.addedSkapps)))),n.props.setApps(ds(n.props.snApps,a.addedSkapps,a.deletedSkapps))},n.onUpload=function(){var e=Object(k.a)(b.a.mark((function e(t){var a,r,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n.state.hash){e.next=4;break}n.onPublicUpload(t),e.next=22;break;case 4:return(a=Object(h.a)(Object(h.a)({},At()),t)).skyspaceList=[n.state.skyspace],us(a.contentType,a),e.next=9,Ra(n.props.userSession,a,n.props.snPerson);case 9:return r=e.sent,e.next=12,Ja(n.props.userSession,r,[n.state.skyspace]);case 12:return n.getAppList(n.state.category,n.state.skyspace,n.state.fetchAllSkylinks,n.state.hash,n.state.senderId),n.props.fetchSkyspaceAppCount(),(s=Object(h.a)(Object(h.a)({},{skylink:"",fileName:"",contentLength:"",contentType:"",httpMetadata:"",action:"",skhubId:"",skyspaces:[],savedToSkySpaces:!1}),a)).fileName=a.name,s.action="Upload",s.skyspaces=a.skyspaceList,s.savedToSkySpaces=!0,s.skhubId=r,e.next=22,en(n.props.userSession,s);case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.addPublicSpaceToAccount=function(){var e=Object(k.a)(b.a.mark((function e(t){var a,r,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=null,n.props.setLoaderDisplay(!0),e.next=5,fa(n.state.hash,n.props.snPublicInMemory);case 5:r=e.sent,n.props.setLoaderDisplay(!1),s="/login?sharedhash="+((null===(a=r)||void 0===a?void 0:a.skylink)||n.state.hash),document.location.href="https://skyspace.hns.siasky.net/#"+s;case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.savePublicSpace=function(){var e=Object(k.a)(b.a.mark((function e(t){var a,r,s,o,c,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n.props.setLoaderDisplay(!0),e.next=4,ua(n.state.hash);case 4:return a=e.sent,r=ds(a.data,n.props.snPublicInMemory.addedSkapps,n.props.snPublicInMemory.deletedSkapps),a.history[a.history.length-1].skylink=n.state.hash,a.history.push({creationDate:new Date}),a.data=r,s=da(a),o=-1===document.location.origin.indexOf("localhost")?document.location.origin:me,e.next=13,new Zt.SkynetClient(o).uploadFile(s);case 13:c=e.sent,n.props.setLoaderDisplay(!1),i=document.location.href.replace(n.state.hash,Object(Zt.parseSkylink)(c)),n.setState({showInfoModal:!0,infoModalContent:i,onInfoModalClose:function(){n.setState({showInfoModal:!1}),document.location.href=i}});case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.selectPublicAll=function(e,t){e.preventDefault(),n.setState({isSelect:!0,arrSelectedAps:t})},n.cancelPublicSelect=function(e){e.preventDefault(),n.setState({isSelect:!1,arrSelectedAps:[]})},n.publicSelect=function(e){e.preventDefault(),n.setState({isSelect:!0,arrSelectedAps:[]})},n.addSelectedAppsToSpaces=function(){var e=Object(k.a)(b.a.mark((function e(t,a){var r,s,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.props.setLoaderDisplay(!0),r=Object(m.a)(t),e.prev=2,r.s();case 4:if((s=r.n()).done){e.next=10;break}return o=s.value,e.next=8,Ja(n.props.userSession,o.skhubId,a);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:n.props.fetchSkyspaceAppCount(),n.setState({showAddToSkyspace:!1}),n.props.setLoaderDisplay(!1);case 21:case"end":return e.stop()}}),e,null,[[2,12,15,18]])})));return function(t,a){return e.apply(this,arguments)}}(),n.deleteSelectedApps=function(){var e=Object(k.a)(b.a.mark((function e(t){var a,r,s,o,c,i,l,p,u,d;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.props.setLoaderDisplay(!0),a=Object(m.a)(t),e.prev=2,a.s();case 4:if((r=a.n()).done){e.next=15;break}return s=r.value,e.next=8,Va(n.props.userSession,s.skhubId);case 8:return o=e.sent.skyspaceForSkhubIdList,e.next=11,Ga(n.props.userSession,s.skhubId,o);case 11:return e.next=13,Fa(n.props.userSession,s.skhubId);case 13:e.next=4;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),a.e(e.t0);case 20:return e.prev=20,a.f(),e.finish(20);case 23:return n.setState({arrSelectedAps:[]}),c=n.state,i=c.skyspace,l=c.category,p=c.fetchAllSkylinks,c.page,u=c.hash,d=c.senderId,e.next=27,n.getAppList(l,i,p,u,d);case 27:n.props.fetchSkyspaceAppCount(),n.setState({showConfirmModal:!1}),n.props.setLoaderDisplay(!1);case 30:case"end":return e.stop()}}),e,null,[[2,17,20,23]])})));return function(t){return e.apply(this,arguments)}}(),n.moveSelectedAppsToSpaces=function(){var e=Object(k.a)(b.a.mark((function e(t,a){var r,s,o,c,i,l,p,u,d;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.props.setLoaderDisplay(!0),r=Object(m.a)(t),e.prev=2,r.s();case 4:if((s=r.n()).done){e.next=10;break}return o=s.value,e.next=8,qa(n.props.userSession,n.state.skyspace,o.skhubId);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:return n.props.setLoaderDisplay(!1),e.next=21,n.addSelectedAppsToSpaces(t,a);case 21:return n.props.setLoaderDisplay(!0),c=n.state,i=c.skyspace,l=c.category,p=c.fetchAllSkylinks,c.page,u=c.hash,d=c.senderId,e.next=25,n.getAppList(l,i,p,u,d);case 25:n.setState({showMoveToSkyspace:!1,arrSelectedAps:[]}),n.props.setLoaderDisplay(!1);case 27:case"end":return e.stop()}}),e,null,[[2,12,15,18]])})));return function(t,a){return e.apply(this,arguments)}}(),n.isUploadProgress=function(){var e,t=Object(m.a)(n.props.snUploadList);try{for(t.s();!(e=t.n()).done;){if("complete"!==e.value.status)return!0}}catch(a){t.e(a)}finally{t.f()}return!1},n.totalProgress=function(){},n.state={goToApp:!1,senderId:null,loadingAllSpacesInfo:!0,showAddToSkyspace:!1,showMoveToSkyspace:!1,skyappId:"",apps:[],allSpacesObj:null,error:null,fetchAllSkylinks:!1,category:null,skyspace:null,searchKey:"",filteredApps:[],tagFilterList:[],filterCriteria:{searchString:"",page:1,tagFilterList:[],switchFilterList:[]},isSelect:!1,arrSelectedAps:[],hash:null,showInfoModal:!1,showConfirmModal:!1,infoModalContent:null,isDir:!1,portalHost:"siasky.net",activeStep:0,filterSelection:"emp",isTrue:!1,GridUi:!0},n.openSkyApp=n.openSkyApp.bind(Object(E.a)(n)),n.handleSrchSbmt=n.handleSrchSbmt.bind(Object(E.a)(n)),n.handleSrchKeyChng=n.handleSrchKeyChng.bind(Object(E.a)(n)),n.getFilteredApps=n.getFilteredApps.bind(Object(E.a)(n)),n.uploadEleRef=r.a.createRef(),n}return Object(v.a)(a,[{key:"handleSrchSbmt",value:function(e){e.preventDefault()}},{key:"handleSrchKeyChng",value:function(e,t){null!=e&&e.preventDefault();var a=this.state.filterCriteria;a.page=1,this.setState({searchKey:null!=e?e.target.value:t,filterCriteria:a})}},{key:"searchFilter",value:function(e,t){if(!t||""===t.trim())return e;for(var a in e)if(e[a]&&e[a].toLowerCase().equals(t.toLowerCase()))return e}},{key:"openSkyApp",value:function(e){var t=this.state.category,a=this.state.skyspace,n="";null!=t&&""!==t.trim()?n=e.id:(null!=a&&""!==a.trim()||this.state.fetchAllSkylinks)&&(n=e.skhubId),this.setState({goToApp:!0,skyappId:encodeURIComponent(n)})}},{key:"getAppList",value:function(){var e=Object(k.a)(b.a.mark((function e(t,a,n,r){var s,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=this.getSenderId(),null!=t&&this.props.fetchApps(t),null==a){e.next=13;break}if(null==s){e.next=12;break}return this.props.setLoaderDisplay(!0),e.next=7,kn(this.props.userSession,decodeURIComponent(s),a);case 7:o=e.sent,this.props.setLoaderDisplay(!1),this.props.setApps(o),e.next=13;break;case 12:this.props.fetchSkyspaceApps({session:this.props.userSession,skyspace:a});case 13:null!=r&&(this.props.setDesktopMenuState(!1),this.props.setPortalsListAction(Ne),this.props.fetchPublicApps(r)),!0===n?(this.handleSrchKeyChng(null,this.getSearchKeyFromQuery()),this.props.fetchAllSkylinks({session:this.props.userSession})):this.handleSrchKeyChng(null,"");case 15:case"end":return e.stop()}}),e,this)})));return function(t,a,n,r){return e.apply(this,arguments)}}()},{key:"getSenderId",value:function(){if(this.props.location.pathname.indexOf("imported-spaces")>-1)return this.props.match.params.sender}},{key:"componentDidMount",value:function(){var e=this.props.match.params.skyspace,t=this.props.match.params.category,a=this.getSenderId(),n=this.props.location.search.indexOf("?content=")>-1?this.props.location.search.replace("?content=","").trim():"",r=""===n?null:n;r&&this.props.setPublicHash(r);var s="/skylinks"===this.props.match.path,o=this.getLocation(this.props.snUserSetting.setting.portal).host;this.setState({skyspace:e,category:t,fetchAllSkylinks:s,page:1,hash:r,senderId:a,portalHost:o}),this.props.fetchSkyspaceDetail(),this.getAppList(t,e,s,r,a)}},{key:"getLocation",value:function(e){var t=e.match(/^(https?\:)\/\/(([^:\/?#]*)(?:\:([0-9]+))?)([\/]{0,1}[^?#]*)(\?[^#]*|)(#.*|)$/);return t&&{href:e,protocol:t[1],host:t[2],hostname:t[3],port:t[4],pathname:t[5],search:t[6],hash:t[7]}}},{key:"componentDidUpdate",value:function(e,t,a){var n=this.props.match.params.skyspace,r=this.props.match.params.category,s=this.getSenderId(),o=this.props.location.search.indexOf("?content=")>-1?this.props.location.search.replace("?content=","").trim():"",c=""===o?null:o,i="/skylinks"===this.props.match.path;(this.state.category!==r||this.state.hash!==c||this.state.skyspace!==n||this.state.fetchAllSkylinks!==i||this.state.senderId!==s||i&&this.getSearchKeyFromQuery()!==this.state.searchKey)&&(this.props.fetchSkyspaceDetail(),this.updateTagFilterList([]),this.setState({skyspace:n,hash:c,fetchAllSkylinks:i,category:r,arrSelectedAps:[],isSelect:!1,page:1,senderId:s}),c&&this.props.setPublicHash(c),this.getAppList(r,n,i,c,s))}},{key:"getFilteredApps",value:function(){var e=this.state.searchKey;return this.props.snApps.filter(this.tagFilter).filter((function(t){if(!e||""===e.trim())return t;for(var a in t)if(t.hasOwnProperty(a)&&"category"!==a&&null!=t[a]&&t[a].toString().toLowerCase().indexOf(e.toLowerCase())>-1)return t;return""}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.goToApp,n=t.skyappId,s=t.fetchAllSkylinks,o=this.props.classes,c=this.state.filterCriteria.page,i=this.state.filterCriteria.tagFilterList,l="";null!=i&&i.length>0&&(l=i[0]);var p=this.getCategoryWiseCount(),u=this.state.skyspace;if(a){var d=this.state.category,m="";return null!=d&&""!==d.trim()?m="category":(null!=u&&""!==u.trim()||s)&&(m="skyspace"),null!=this.state.senderId?r.a.createElement(f.a,{to:"/imported-skyapps/".concat(encodeURIComponent(this.state.senderId),"/").concat(n,"?source=").concat(m)}):r.a.createElement(f.a,{to:"/skyapps/"+n+"?source="+m})}var h=this.getFilteredApps();return r.a.createElement("main",{className:this.state.hash?o.publicContent:o.content},r.a.createElement("div",{style:{paddingTop:70,minHeight:"calc(100vh - 100px)"}},r.a.createElement(U.a,{container:!0,className:"most_main_grid_gallery",spacing:3,style:{width:"99%",margin:"auto"}},r.a.createElement(U.a,{item:!0,lg:2,md:2,sm:12,xs:12},r.a.createElement(kt.a,{className:o.gallery_title},"Spaces"),r.a.createElement(kt.a,{className:o.gallery_subTitle},null==this.state.hash&&u,null!=this.state.hash&&"Public Space")),h.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a,{item:!0,lg:10,md:10,sm:12,xs:12,className:"".concat(o.gallery_title_btns_grid," ","most_main_grid_gallery_style")},r.a.createElement(kt.a,{onClick:function(){return e.updateTagFilterList([])},variant:"span",className:"gallery_title_head_Alltext ".concat(o.gallery_title_head_Alltext),style:null!=this.state.filterCriteria&&0===this.state.filterCriteria.tagFilterList.length?{backgroundColor:"APP_BG_COLOR"}:{}},"All",r.a.createElement(kt.a,{variant:"span",className:o.innerValue_All}," ",this.props.snApps&&this.props.snApps.length)),Object.keys(as()).filter((function(e){return p[e]&&"0"!=p[e]})).map((function(t,a){return a<3&&r.a.createElement(kt.a,{onClick:function(){return e.updateTagFilterList([t])},variant:"span",key:a,className:"gallery_title_head_image_text ".concat(o.gallery_title_head_image_text)},r.a.createElement("span",{style:{fontSize:"20px"}},ts[t].getLogo(o.categoryFilterLogo)),"\xa0 ",as()[t].heading,r.a.createElement(kt.a,{variant:"span",className:o.innerValue_All},p[t]?p[t]:0))})),r.a.createElement("div",{className:"".concat(o.menuverticalIcon_div," ","menu_icon_top")},r.a.createElement(to,{onItemClick:function(t){return e.updateTagFilterList([t])},itemLabel:function(e){return as()[e].heading},showCount:!0},Object.keys(as()).filter((function(e){return p[e]&&"0"!=p[e]})).map((function(t,a){return a>=3&&r.a.createElement("div",{style:{paddingTop:10,paddingBottom:10,cursor:"pointer"}},r.a.createElement(kt.a,{onClick:function(){return e.updateTagFilterList([t])},variant:"span",className:"gallery_title_head_Alltext ".concat(o.gallery_title_head_Alltext_menu)},as()[t].heading,r.a.createElement(kt.a,{variant:"span",className:o.innerValue_All},p[t]?p[t]:0)))}))))),null==this.state.hash&&h.length>0&&null==this.state.senderId&&this.state.isSelect&&r.a.createElement(U.a,{container:!0,spacing:3,style:{margin:"0px"}},r.a.createElement(U.a,{item:!0,xs:12,className:o.titleBar_onSelect_img_grid_gallery},r.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-between"}},r.a.createElement("div",null,r.a.createElement(te.a,{variant:"contained",color:"secondary",className:o.button,onClick:function(){return e.setState({arrSelectedAps:h})},startIcon:r.a.createElement(B.a,{style:{color:"#1ed660"}}),size:"small",style:{background:"transparent",color:"#636f70",boxShadow:"none"}},"Select all"),r.a.createElement(te.a,{variant:"contained",color:"secondary",onClick:function(){return e.state.arrSelectedAps.length>0&&e.setState({showConfirmModal:!0})},className:o.button,startIcon:r.a.createElement(_.a,{style:{color:"#ff3d3d"}}),size:"small",style:{background:"transparent",color:"#636f70",boxShadow:"none",marginLeft:"15px"}},"Delete"),r.a.createElement(te.a,{variant:"contained",color:"secondary",className:o.button,onClick:function(){return e.state.arrSelectedAps.length>0&&e.createSkylinkPublicShare()},startIcon:r.a.createElement(I.a,{style:{color:"#1ed660"}}),size:"small",style:{background:"transparent",color:"#636f70",boxShadow:"none",marginLeft:"15px"}},"Public Share"),r.a.createElement(te.a,{variant:"contained",color:"secondary",className:o.button,onClick:function(){alert("Try Private-Share from left navigation,\n This feature will be enabled on this icon soon")},startIcon:r.a.createElement("i",{class:"fas fa-people-arrows icon_private_share"}),size:"small",style:{background:"transparent",color:"#636f70",boxShadow:"none",marginLeft:"15px"}},"Private Share"),r.a.createElement(te.a,{variant:"contained",onClick:function(){return e.state.arrSelectedAps.length>0&&e.setState({showMoveToSkyspace:!0})},color:"secondary",className:o.button,startIcon:r.a.createElement(N.a,{style:{color:"#1ed660"}}),size:"small",style:{background:"transparent",color:"#636f70",boxShadow:"none",marginLeft:"15px"}},"Move to"),r.a.createElement(te.a,{variant:"contained",color:"secondary",className:o.button,onClick:function(){return e.state.arrSelectedAps.length>0&&e.setState({showAddToSkyspace:!0})},startIcon:r.a.createElement(P.a,{style:{color:"#1ed660"}}),size:"small",style:{background:"transparent",color:"#636f70",boxShadow:"none",marginLeft:"15px"}},"Add to")),r.a.createElement("div",{style:{textAlign:"right"},className:o.selected_count},this.state.arrSelectedAps.length," Selected",r.a.createElement(M.a,{onClick:function(){return e.setState({isSelect:!1,arrSelectedAps:[]})},style:{color:"#1ed660",fontSize:"18px",cursor:"pointer"}})))))),this.isTrue?null:r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a,{item:!0,lg:null!=this.state.hash?12:6,md:null!=this.state.hash?12:6,sm:12,xs:12,style:{display:"flex",alignItems:"flex-end"}},r.a.createElement("input",{accept:"image/*",className:o.input,id:"contained-button-file",multiple:!0,type:"file"}),r.a.createElement("div",{className:"d-none"},r.a.createElement(xs,{name:"files",ref:this.uploadEleRef,directoryMode:this.state.isDir,onUpload:this.onUpload,portal:rs(this.props.snUserSetting)})),null==this.state.hash&&r.a.createElement("label",{htmlFor:"contained-button-file"},r.a.createElement(te.a,{onClick:function(){return e.uploadEleRef.current.gridRef.current.click()},variant:"contained",color:"primary",style:{color:"white",borderRadius:10},component:"span",type:"button",startIcon:r.a.createElement(ie.a,{style:{color:"white"}})},"Upload")),null!=this.state.hash&&h.length>0&&r.a.createElement("label",{htmlFor:"contained-button-file"},r.a.createElement(te.a,{onClick:function(){return e.uploadEleRef.current.gridRef.current.click()},variant:"contained",color:"primary",style:{color:"white",borderRadius:10},component:"span",type:"button",startIcon:r.a.createElement(ie.a,{style:{color:"white"}})},"Upload"),r.a.createElement(te.a,{variant:"contained",type:"button",onClick:this.addPublicSpaceToAccount,color:"primary",style:{color:"white",borderRadius:10},component:"span",startIcon:r.a.createElement(ie.a,{style:{color:"white"}})},"Add To Skyspaces"),r.a.createElement(te.a,{variant:"contained",type:"button",onClick:this.savePublicSpace,color:"primary",style:{color:"white",borderRadius:10},component:"span",startIcon:r.a.createElement(ie.a,{style:{color:"white"}})},"Save"),r.a.createElement(te.a,{variant:"contained",type:"button",onClick:this.deleteFromPublic,color:"primary",style:{color:"white",borderRadius:10},component:"span",startIcon:r.a.createElement(ie.a,{style:{color:"white"}})},"Delete"),r.a.createElement(te.a,{variant:"contained",onClick:function(t){return e.selectPublicAll(t,h)},color:"primary",type:"button",style:{color:"white",borderRadius:10},component:"span",startIcon:r.a.createElement(ie.a,{style:{color:"white"}})},"Select All"),!this.state.isSelect&&r.a.createElement(te.a,{variant:"contained",onClick:this.publicSelect,color:"primary",style:{color:"white",borderRadius:10},component:"span",startIcon:r.a.createElement(ie.a,{style:{color:"white"}})},"Select"),this.state.isSelect&&r.a.createElement(te.a,{onClick:this.cancelPublicSelect,variant:"contained",color:"primary",style:{color:"white",borderRadius:10},component:"span",startIcon:r.a.createElement(ie.a,{style:{color:"white"}})},"Cancel")),r.a.createElement(ws.a,{xsDown:!0},r.a.createElement("span",{style:{marginLeft:20}}),r.a.createElement(F.a,{"aria-label":"delete",onClick:function(){return e.setGridUi(!0)}},r.a.createElement(z.a,{className:o.appsIcon})),r.a.createElement(F.a,{"aria-label":"delete",onClick:function(){return e.setGridUi(!1)}},r.a.createElement(Y.a,{className:o.reOrdered})))),r.a.createElement(U.a,{item:!0,lg:6,md:6,sm:12,xs:12,style:{display:"flex",alignItems:"center",justifyContent:"flex-end"}},null==this.state.hash&&h.length>0&&null==this.state.senderId&&r.a.createElement(r.a.Fragment,null,!this.state.isSelect&&r.a.createElement(te.a,{variant:"contained",onClick:function(){return e.setState({isSelect:!0,arrSelectedAps:[]})},color:"primary",className:o.sharedSpaceButn,startIcon:r.a.createElement(oe.a,{style:{color:"white"}})},"Select"))))),this.renderCards(h,c,0,u),r.a.createElement(U.a,{item:!0,xs:12,style:{display:"flex"}},r.a.createElement(Rs,{page:c,totalCount:h.length,onChange:this.udpdatePage})),r.a.createElement(U.a,{item:!0,xs:12,style:{display:"flex"}},"audio"===l&&r.a.createElement(Wr,null))),r.a.createElement(re,{title:"Confirm Delete Skapps",content:"Are you sure you want to permanently delete the Skapps and remove it from all Skyspace?",open:this.state.showConfirmModal,onNo:function(){return e.setState({showConfirmModal:!1})},onYes:function(){return e.deleteSelectedApps(e.state.arrSelectedAps)}}),r.a.createElement(Is,{open:this.state.showInfoModal,onClose:this.state.onInfoModalClose,title:"Public Share Link",type:"public-share",content:this.state.infoModalContent}),r.a.createElement(Cr,{userSession:this.props.userSession,open:this.state.showAddToSkyspace,availableSkyspaces:this.props.snSkyspaceList.filter((function(t){return t!==e.state.skyspace})),onClose:function(){return e.setState({showAddToSkyspace:!1})},onSave:function(t){return e.addSelectedAppsToSpaces(e.state.arrSelectedAps,t)}}),r.a.createElement(Cr,{userSession:this.props.userSession,title:"Select Skyspaces To Move To",open:this.state.showMoveToSkyspace,availableSkyspaces:this.props.snSkyspaceList.filter((function(t){return t!==e.state.skyspace})),onClose:function(){return e.setState({showMoveToSkyspace:!1})},onSave:function(t){return e.moveSelectedAppsToSpaces(e.state.arrSelectedAps,t)}}),r.a.createElement("div",null,r.a.createElement(Vs,null),r.a.createElement(Zs,null)))}}]),a}(r.a.Component),no=Object(ht.a)(C)(Object(p.b)((function(e){return{isShowing:e.snLoader,snApps:e.snApps,snUploadList:e.snUploadList,userSession:e.userSession,snSkyspaceList:e.snSkyspaceList,snSkyspaceDetail:e.snSkyspaceDetail,snUserSetting:e.snUserSetting,snPublicInMemory:e.snPublicInMemory,snPerson:e.person}}),(function(e){return Object(_t.bindActionCreators)({setLoaderDisplay:Et,fetchApps:Ft,fetchSkyspaceApps:Wt,fetchAllSkylinks:Yt,fetchSkyspaceDetail:Kn,fetchPublicApps:Kt,setDesktopMenuState:Dr,setPortalsListAction:Zn,setPublicHash:Ps,setPublicInMemory:Ds,setApps:Ht,fetchSkyspaceAppCount:cr,setUploadList:Be},e)}))(ao)),ro=a(319),so=a.n(ro),oo=a(426),co=a.n(oo),io=a(432),lo=a.n(io),po=a(268),uo=a.n(po),fo=a(431),mo=a.n(fo),ho=a(274),yo=a.n(ho),go=a(228),bo=a.n(go),ko=a(321),So=a.n(ko),vo=a(428),Eo=a.n(vo),xo=a(429),Oo=a.n(xo),wo=a(430),Co=a.n(wo),jo=a(433),_o=a.n(jo),Ao=a(427),Io=a.n(Ao),To=a(322),No=a.n(To),Lo=a(434),Po=a.n(Lo);var Do=function(e){var t;return{root:{flexGrow:1},content:(t={},Object(w.a)(t,e.breakpoints.up("sm"),{width:"calc(100% - ".concat(295,"px)"),marginLeft:295}),Object(w.a)(t,"backgroundColor",e.palette.whiteBgColor),Object(w.a)(t,"padding",e.spacing(3)),t),contentBgColor:{backgroundColor:e.palette.whiteBgColor},spaceIcon:{color:e.palette.primary.main,fontSize:"20px"},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary},most_main_grid_actvHstry:{padding:"0px",width:"100%",margin:0},main_grid_actvHstry:{margin:"auto"},MaintabsPaper_actvHstry:{paddingTop:"10px",paddingRight:"35px",paddingBottom:"40px",boxShadow:"none",backgroundColor:e.palette.whiteBgColor},tabsPaper_actvHstry:{padding:"0px",boxShadow:"none",backgroundColor:e.palette.whiteBgColor},actvHstry_title:{color:e.palette.linksColor,textAlign:"left",fontWeight:"500",fontSize:"20px",paddingBottom:"30px"},search_main_div:{display:"flex"},srch_inpt:{paddingLeft:"40px",backgroundColor:e.palette.headerBgColor,"&&&:focus":{borderColor:"none",boxShadow:"none"}}}},Mo={Add:r.a.forwardRef((function(e,t){return r.a.createElement(co.a,Object.assign({},e,{ref:t}))})),Check:r.a.forwardRef((function(e,t){return r.a.createElement(uo.a,Object.assign({},e,{ref:t}))})),Clear:r.a.forwardRef((function(e,t){return r.a.createElement(bo.a,Object.assign({},e,{ref:t}))})),Delete:r.a.forwardRef((function(e,t){return r.a.createElement(_.a,Object.assign({},e,{ref:t}))})),DetailPanel:r.a.forwardRef((function(e,t){return r.a.createElement(yo.a,Object.assign({},e,{ref:t}))})),Edit:r.a.forwardRef((function(e,t){return r.a.createElement(So.a,Object.assign({},e,{ref:t}))})),Export:r.a.forwardRef((function(e,t){return r.a.createElement(Io.a,Object.assign({},e,{ref:t}))})),Filter:r.a.forwardRef((function(e,t){return r.a.createElement(Eo.a,Object.assign({},e,{ref:t}))})),FirstPage:r.a.forwardRef((function(e,t){return r.a.createElement(Oo.a,Object.assign({},e,{ref:t}))})),LastPage:r.a.forwardRef((function(e,t){return r.a.createElement(Co.a,Object.assign({},e,{ref:t}))})),NextPage:r.a.forwardRef((function(e,t){return r.a.createElement(yo.a,Object.assign({},e,{ref:t}))})),PreviousPage:r.a.forwardRef((function(e,t){return r.a.createElement(mo.a,Object.assign({},e,{ref:t}))})),ResetSearch:r.a.forwardRef((function(e,t){return r.a.createElement(bo.a,Object.assign({},e,{ref:t}))})),Search:r.a.forwardRef((function(e,t){return r.a.createElement(No.a,Object.assign({},e,{ref:t}))})),SortArrow:r.a.forwardRef((function(e,t){return r.a.createElement(lo.a,Object.assign({},e,{ref:t}))})),ThirdStateCheck:r.a.forwardRef((function(e,t){return r.a.createElement(_o.a,Object.assign({},e,{ref:t}))})),ViewColumn:r.a.forwardRef((function(e,t){return r.a.createElement(Po.a,Object.assign({},e,{ref:t}))}))},Ro=Do;function Bo(e){return r.a.createElement(ms.a,Object.assign({elevation:6,variant:"filled"},e))}var Uo=function(e){Object(x.a)(a,e);var t=Object(O.a)(a);function a(e){var n;return Object(S.a)(this,a),(n=t.call(this,e)).onSaveToSkyspace=function(e){n.props.skyapp.skhubId=e.skhubId,n.props.skyapp.skylink=e.skylink,n.props.skyapp.name=e.fileName,n.props.setSkappDetail(n.props.skyapp),null!=n.props.person||n.props.userSession.isSignInPending()?n.setState({saveToSkyspace:!0}):de.setItem("SKYAPP_DETAIL",JSON.stringify(n.props.skyapp))},n.loadAvailableAction=function(e){return!1===e.savedToSkySpaces?r.a.createElement(bt.a,{title:"Add to Spaces",arrow:!0},r.a.createElement(F.a,{onClick:function(){return n.onSaveToSkyspace(e)}},r.a.createElement(gt.a,{className:n.props.classes.spaceIcon}))):r.a.createElement("div",null,e.skyspaces)},n.copyToClipboard=function(e,t){navigator.clipboard.writeText(t),n.setState({openCopySuccess:!0})},n.closeCopySucess=function(){n.setState({openCopySuccess:!1})},n.udpdatePage=function(e){n.setState({page:e})},n.getFilteredHistory=function(){var e=9*(n.state.page-1),t=e+9;return n.props.history.slice(e,t)},n.selectAll=function(e){console.log(e.target.checked)},n.deleteSelectedHistory=function(){var e=Object(k.a)(b.a.mark((function e(t){var a,r,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.props.setLoaderDisplay(!0),t&&n.props.history&&n.props.history.length===t.length?an(n.props.userSession).then((function(){n.props.fetchHistory(n.props.userSession),n.props.setLoaderDisplay(!1)})):(a=Object(y.a)(n.props.history),r=t.map((function(e){return e.tableData.id})),s=a.filter((function(e){return!r.includes(e.tableData.id)})),tn(n.props.userSession,s).then((function(e){n.props.fetchHistory(n.props.userSession),n.props.setLoaderDisplay(!1)})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={page:1,saveToSkyspace:!1,openCopySuccess:!1,columns:[{title:"File Name",field:"fileName",render:function(e){return r.a.createElement("div",null,r.a.createElement("span",{className:"font-weight-bold h6",color:"black"},e.fileName),r.a.createElement("br",null),r.a.createElement(bt.a,{title:e.skylink,arrow:!0},r.a.createElement("span",null,lr()(e.skylink,11,{position:"middle"}))),r.a.createElement(bt.a,{title:"Copy Skylink to clipboard",arrow:!0},r.a.createElement(_s.a,{onClick:function(t){return n.copyToClipboard(t,e.skylink)},className:"cursor-pointer",style:{color:ue,paddingLeft:10},value:e.skylink})),r.a.createElement("br",null),r.a.createElement("font",{color:"primary"},e.contentType,"  ")," | ",r.a.createElement("font",{color:"primary"},e.contentLength&&!isNaN(e.contentLength)&&ls(e.contentLength)," "))}},{title:"Activity Time",field:"timestamp",type:"datetime"},{title:"Activity Type",field:"action"},{title:"Spaces",field:"skyspaces",render:function(e){return e.skyspaces?n.loadAvailableAction(e):"N/A"}}]},n.props.fetchHistory(n.props.userSession),n}return Object(v.a)(a,[{key:"render",value:function(){var e=this,t=this.state.columns,a=this.props.classes;return this.state.saveToSkyspace?r.a.createElement(f.a,{to:"/register"}):r.a.createElement("main",{className:a.content},r.a.createElement("div",{style:{paddingTop:40}},r.a.createElement(U.a,{container:!0,spacing:3,className:a.most_main_grid_actvHstry},r.a.createElement(U.a,{item:!0,xs:12,className:a.main_grid_actvHstry},r.a.createElement(Ar.a,{className:"".concat(a.paper," ").concat(a.MaintabsPaper_actvHstry)},r.a.createElement(Ar.a,{className:a.tabsPaper_actvHstry},r.a.createElement(U.a,{container:!0,spacing:3,style:{paddingBottom:"10px"}},r.a.createElement(U.a,{item:!0,xs:12},r.a.createElement("div",{style:{paddingTop:"40px",display:"flex",justifyContent:"space-between"}},r.a.createElement(kt.a,{className:a.actvHstry_title},"Activity History"),r.a.createElement("div",{className:a.search_main_div},r.a.createElement("span",null,r.a.createElement("i",{className:"fas fa-search srch-icon-inside-field-input",style:{position:"relative",top:"8px"}})),r.a.createElement("input",{className:"form-control mr-sm-2 ".concat(a.srch_inpt),type:"search",placeholder:"Search","aria-label":"Search"}))),r.a.createElement("div",{style:{display:"flex",justifyContent:"center",boxShadow:"0 0 10px rgba(0,0,0,.4)",borderRadius:"10px"}}),r.a.createElement("div",{style:{paddingTop:"40px",display:"flex",justifyContent:"space-between"}}),r.a.createElement("div",{style:{display:"flex",justifyContent:"center",boxShadow:"0 0 10px rgba(0,0,0,.4)",borderRadius:"10px"}},r.a.createElement(so.a,{icons:Mo,title:"Activity History",columns:t,data:this.props.history,options:{selection:!0,sorting:!0,actionsColumnIndex:-1},actions:[{tooltip:"Remove Selected Activity History",icon:Mo.Delete,onClick:function(t,a){e.deleteSelectedHistory(a)}}]})))))))),r.a.createElement("div",{className:"container-fluid register-container"},r.a.createElement(ze.a,{open:this.state.openCopySuccess,autoHideDuration:4e3,onClose:this.closeCopySucess},r.a.createElement(Bo,{onClose:this.closeCopySucess,severity:"success"},"Skylink successfully copied to clipboard!"))),r.a.createElement("div",null,r.a.createElement(Zs,null))))}}]),a}(r.a.Component),Fo=Object(ht.a)(Ro)(Object(p.b)((function(e){return{userSession:e.userSession,history:e.snHistory,person:e.person,skyapp:e.snAppDetail}}),(function(e){return Object(_t.bindActionCreators)({setLoaderDisplay:Et,fetchHistory:Vn,setSkappDetail:Un},e)}))(Uo)),Ko=a(525),zo=a(526),Ho=function(e){var t;return{root:{flexGrow:1},content:(t={},Object(w.a)(t,e.breakpoints.up("sm"),{width:"calc(100% - ".concat(295,"px)"),marginLeft:295}),Object(w.a)(t,"backgroundColor",e.palette.whiteBgColor),t),input:{color:e.palette.linksColor,borderBottom:"1px solid white !important"},desc:{color:e.palette.linksColor,border:"1px solid white !important"},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary},most_main_grid_ef:{padding:"0px",width:"100%",margin:0},main_grid_ef:{margin:"auto"},MaintabsPaper_ef:{paddingTop:"10px",paddingRight:"35px",paddingBottom:"40px",boxShadow:"none",backgroundColor:e.palette.headerBgColor},tabsPaper_ef:{padding:"0px",boxShadow:"none",backgroundColor:e.palette.headerBgColor},title1_ef:{textAlign:"left",color:"".concat(e.palette.linksColor)},titleOng_ef:{textAlign:"left",color:"".concat(e.palette.primary.main),fontSize:"12px",fontWeight:"600",paddingBottom:"30px"},lable_skylink_inpt_ef:{textAlign:"left",color:"".concat(e.palette.primary.main),fontSize:"12px",fontWeight:"600"},lable_fileName_inpt_ef:{textAlign:"left",color:"".concat(e.palette.primary.main),fontSize:"12px",fontWeight:"600",marginTop:"30px"},skylinkUrl_txtfld:{marginBottom:"30px"},description_inpt_ef:{width:"100%"},selectSpaces_title:{color:e.palette.primary.main,textAlign:"left",fontWeight:"500",fontSize:"20px"},selectSpace_title_btns_grid:{display:"flex",alignItems:"center",flexWrap:"wrap"},selectSpaces_title_head_Alltext:{background:"".concat(e.palette.lightGray),padding:"5px 10px",borderRadius:"50px",color:"".concat(e.palette.primary.textColor),fontSize:"13px"},ss_title_head_image_text:{background:"".concat(e.palette.lightGray),padding:"5px 10px",borderRadius:"50px",color:"".concat(e.palette.primary.textColor),fontSize:"13px",marginLeft:"15px",border:"1px solid white"},padding_l_10:{paddingLeft:"10px"},ef_delbtn:{marginRight:"20px",background:"#ff3d3d","&&&:focus":{outline:"none"},"&&&:hover":{background:"#ff3d3d"}},formControl:{width:"100%"},fullWidth:{width:"100%"},active:{backgroundColor:"#1ed660"},ef_saveBtn:{marginRight:"20px",color:"white","&&&:focus":{outline:"none"}},ef_doneBtn:{marginRight:"20px",color:"white","&&&:focus":{outline:"none"}}}},Yo=(a(1237),a(527)),Wo=a(331),Go=a.n(Wo),Jo=a(551),Vo=a.n(Jo);var Zo=a(269),Xo=a.n(Zo),Qo=a(323),qo=a.n(Qo),$o=Object(jr.a)(Ho),ec=function(e){var t=$o();return r.a.createElement(U.a,{container:!0,spacing:3},r.a.createElement(U.a,{item:!0,xs:12,style:{display:"flex",justifyContent:"flex-end"}},!e.isRegister&&e.isAppOwner&&r.a.createElement(te.a,{variant:"contained",color:"secondary",size:"small",type:"button",onClick:function(t){return e.onDelete(t,"DELETE")},id:"btnDelete",startIcon:r.a.createElement(qo.a,null),className:t.ef_delbtn},"Delete"),(e.isRegister||e.edit,e.isAppOwner&&r.a.createElement(te.a,{variant:"contained",color:"primary",size:"small",type:"submit",className:"".concat(t.button,"  ").concat(t.ef_saveBtn),startIcon:r.a.createElement(Xo.a,null)},"Save")),!e.isRegister&&r.a.createElement(te.a,{variant:"contained",color:"primary",size:"small",className:"".concat(t.button,"  ").concat(t.ef_doneBtn),startIcon:r.a.createElement(oe.a,null),onClick:function(t){return e.onDone(t)},type:"button"},"Done")))},tc=function(e){Object(x.a)(a,e);var t=Object(O.a)(a);function a(e){var n;return Object(S.a)(this,a),(n=t.call(this,e)).handleAddSpaceOpen=function(){n.setState({showAddSkyspace:!0})},n.handleAddSpaceClose=function(){n.setState({showAddSkyspace:!1,skyspaceModal:{title:"",skyspaceName:"",type:""}})},n.addSkyspace=function(e){e.preventDefault(),e.stopPropagation(),console.log("add skypace clicked"),n.setState({skyspaceModal:{title:"Add New Skyspace",skyspaceName:"",type:"ADD_SKYSPACE"}}),n.handleAddSpaceOpen()},n.handleInfoModalClose=function(){n.setState({snInfoModal:{open:!1,title:"",description:"",onClose:function(){}},redirectToAllApps:!0})},n.handleSecretIdDlgClose=function(){n.setState({openSecretIdDlg:!1,redirectToAllApps:!0})},n.handleSkylinkCreationSuccess=function(e){n.props.setLoaderDisplay(!1),n.props.fetchSkyspaceAppCount();var t="updated";n.state.isRegister?t="saved":"DELETE"===e&&(t="deleted");var a={open:!0,title:"Status : Success",description:"Skylink has been "+t+" Successfully.",onClose:n.handleInfoModalClose};n.setState({snInfoModal:a})},n.categorySpecificTask=function(){var e=Object(k.a)(b.a.mark((function e(t){var a,r,s,o,c,i,l,p,u,d,f,m,h;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=rs(n.props.snUserSetting),r=a+Object(Zt.parseSkylink)(t.skylink),e.next=4,fetch(r);case 4:return s=e.sent,e.next=7,s.blob();case 7:o=e.sent,t.contentType=s.headers.get("content-type"),t.contentLength=s.headers.get("content-length"),c=new Zt.SkynetClient(a),e.t0=t.type,e.next="pictures"===e.t0?14:"video"===e.t0?34:57;break;case 14:return e.prev=14,e.next=17,Ue.a.getDataUrlFromFile(o);case 17:return l=e.sent,e.next=20,Ue.a.getFilefromDataUrl(l,"image");case 20:return p=e.sent,e.next=23,ps(p);case 23:return u=e.sent,e.next=26,pa(u,c);case 26:i=e.sent,e.next=32;break;case 29:e.prev=29,e.t1=e.catch(14),console.error("Skyspaces handled exception p",e.t1);case 32:return t.thumbnail=null!=i?Object(Zt.parseSkylink)(i):"",e.abrupt("break",58);case 34:if(e.prev=34,!(ts[t.type].fileTypeList.indexOf(t.contentType)>-1)){e.next=50;break}return d=document.querySelector("#hidden-upload-video"),f=null,m=new Promise((function(e){return f=e})),d.src=r,d.onloadeddata=f,d.load(),e.next=44,m;case 44:return e.next=46,is(d);case 46:return h=e.sent,e.next=49,pa(h,c);case 49:i=e.sent;case 50:e.next=55;break;case 52:e.prev=52,e.t2=e.catch(34),console.error("Skyspaces handled exception v",e.t2);case 55:return t.thumbnail=null!=i?Object(Zt.parseSkylink)(i):"",e.abrupt("break",58);case 57:console.log("default");case 58:case"end":return e.stop()}}),e,null,[[14,29],[34,52]])})));return function(t){return e.apply(this,arguments)}}(),n.handleSubmit=function(){var e=Object(k.a)(b.a.mark((function e(t,a){var r,s,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),r=!1,e.t0=b.a.keys(n.props.skyapp);case 3:if((e.t1=e.t0()).done){e.next=10;break}if(s=e.t1.value,n.props.skyapp.hasOwnProperty(s)&&(r=r||n.onSubmitValidateField(s)),!r){e.next=8;break}return e.abrupt("break",10);case 8:e.next=3;break;case 10:if(!r){e.next=12;break}return e.abrupt("return");case 12:if(n.props.setLoaderDisplay(!0),null!=a){e.next=20;break}return e.next=16,n.categorySpecificTask(n.props.skyapp);case 16:o="",Ra(n.props.userSession,n.props.skyapp,n.props.person).then((function(e){if(o=n.props.skyapp.skhubId?n.props.skyapp.skhubId:e,null!=n.props.skyapp.skyspaceList){if(n.props.skyapp.skyspaceList.length>0)return Ja(n.props.userSession,o,n.props.skyapp.skyspaceList)}else null==n.props.skyapp.skyspaceList&&(n.props.skyapp.skyspaceList=[]);if(null!=n.props.snAppSkyspaces&&n.props.snAppSkyspaces.skyspaceForSkhubIdList&&n.props.snAppSkyspaces.skyspaceForSkhubIdListlength>0){var t=n.props.snAppSkyspaces.skyspaceForSkhubIdList.filter((function(e){return!n.props.skyapp.skyspaceList.includes(e)}));if(null!=t&&t.length>0)return Ga(n.props.userSession,o,t)}return""})).then((function(){var e={skylink:"",fileName:"",contentLength:"",contentType:"",httpMetadata:"",action:"",skhubId:"",skyspaces:[],savedToSkySpaces:!1};if(e.skhubId=n.props.skyapp.skhubId,e.skylink=n.props.skyapp.skylink,e.fileName=n.props.skyapp.name,e.action="Upload",e.skyspaces=n.props.skyapp.skyspaceList,e.savedToSkySpaces=!!(n.props.skyapp.skyspaceList&&n.props.skyapp.skyspaceList.length>0),n.props.skyapp.contentLength&&n.props.skyapp.contentType)e.contentLength=n.props.skyapp.contentLength,e.contentType=n.props.skyapp.contentType,en(n.props.userSession,e);else{var t=rs(n.props.snUserSetting)+n.props.skyapp.skylink;la(t).pipe(Object(Rt.a)((function(t){return e.contentLength=t.contentLength,e.contentType=t.contentType,n.handleChange(t.contentLength,{key:"contentLength"}),n.handleChange(t.contentType,{key:"contentType"}),e}))).subscribe((function(t){Ra(n.props.userSession,n.props.skyapp,n.props.person).then((function(){en(n.props.userSession,e).then((function(){return t}))}))}),(function(e){return e}))}})).then((function(){n.handleSkylinkCreationSuccess()})).catch((function(e){n.props.setLoaderDisplay(!1)})),e.next=21;break;case 20:"DELETE"===a&&Fa(n.props.userSession,n.props.skyapp.skhubId).then((function(){if(null!=n.props.skyapp.skyspaceList){var e=n.props.skyapp.skyspaceList.length,t=0;n.props.skyapp.skyspaceList.forEach((function(a,r){qa(n.props.userSession,a,n.props.skyapp.skhubId).then((function(a){++t===e&&n.handleSkylinkCreationSuccess("DELETE")}))}))}else n.handleSkylinkCreationSuccess("DELETE")}));case 21:return e.abrupt("return");case 22:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),n.handleChange=function(e,t){var a=n.props.skyapp;if(null==n.props.snAppSkyspaces||null!=n.props.snAppSkyspaces.isAppOwner&&!1!==n.props.snAppSkyspaces.isAppOwner){var r="";if(null!=t)r=t.key,null!=t.isArray&&!0===t.isArray?!0===t.pop?a[r].remove(e):a[r].push(e):!0===t.isCallback?a[r]=t.callback(a[r],e):a[r]=e;else{var s=e.target.type;a[r=e.target.name]="checkbox"===s?e.target.checked:e.target.value}n.validateField(r)}},n.setTypeFromFile=function(e){var t=as(),a=Object.keys(t).find((function(a){return t[a].fileTypeList&&t[a].fileTypeList.indexOf(e)>-1}));a&&n.handleChange(a,{key:"type"})},n.onUpload=function(e){n.props.setLoaderDisplay(!0),n.handleChange(e.skylink,{key:"skylink"}),n.handleChange(e.name,{key:"name"}),n.handleChange(e.thumbnail,{key:"thumbnail"}),n.setTypeFromFile(e.fileType);var t={skylink:"",fileName:"",contentLength:"",contentType:"",httpMetadata:"",action:"",skhubId:"",skyspaces:[],savedToSkySpaces:!1};t.skylink=e.skylink,t.fileName=e.title,t.action="Upload",t.savedToSkySpaces=!1,n.props.skyapp.skhubId=ka("BLOCKSTACK:"+n.props.person.profile.decentralizedID+":"+e.skylink),t.skhubId=n.props.skyapp.skhubId;var a=rs(n.props.snUserSetting)+e.skylink;la(a).pipe(Object(Rt.a)((function(e){return t.contentLength=e.contentLength,t.contentType=e.contentType,en(n.props.userSession,t).then((function(){n.handleChange(e.contentLength,{key:"contentLength"}),n.handleChange(e.contentType,{key:"contentType"})})),t}))).subscribe((function(e){return console.log("getSkylinkHeader : contentLength : "+e.contentLength),n.props.setLoaderDisplay(!1),e}),(function(e){return n.props.setLoaderDisplay(!1),e}))},n.getSkyspaceListForCarousalMenu=function(){if(null!=n.props.snSkyspaceList){var e={};return n.props.snSkyspaceList.forEach((function(t){e[t]={label:t}})),e}},n.setTypeAutoCompleteValue=function(){var e=ns().filter((function(e){return e.key===n.props.skyapp.type}));return null!=e&&e.length>0?e[0]:null},n.state={showLoader:!1,openSecretIdDlg:!1,redirectToAllApps:!1,edit:!1,isRegister:!1,openEnableEditDlg:!1,isAppOwner:!1,snInfoModal:{open:!1,title:"",description:"",onClose:function(){}},showAddSkyspace:!1,skyspaceModal:{title:"Add New Skyspace",skyspaceName:null,type:"ADD_SKYSPACE"},errorObj:It()},n.handleDoneBtn=n.handleDoneBtn.bind(Object(E.a)(n)),n.handleEditBtn=n.handleEditBtn.bind(Object(E.a)(n)),n}return Object(v.a)(a,[{key:"handleEditBtn",value:function(){this.setState({openEnableEditDlg:!0})}},{key:"handleDoneBtn",value:function(){this.setState({redirectToAllApps:!0})}},{key:"componentDidMount",value:function(){if("/register"===this.props.match.path)this.setState({isRegister:!0,isAppOwner:!0}),this.props.setAppSkyspces({skyspaceForSkhubIdList:[],isAppOwner:!0});else{var e=decodeURIComponent(this.props.match.params.id),t=this.props.match.params.sender;t=t&&decodeURIComponent(t),e,this.setState({isRegister:!1}),this.getSkyAppDetails(e,t)}}},{key:"componentWillUnmount",value:function(){this.props.fetchEmptyApp()}},{key:"getSkyAppDetails",value:function(){var e=Object(k.a)(b.a.mark((function e(t,a){var n,r=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=8;break}return this.props.setLoaderDisplay(!0),e.next=4,Cn(this.props.userSession,a,[t]);case 4:return(n=e.sent)&&n.length>0&&this.props.setAppDetail(n[0]),this.props.setLoaderDisplay(!1),e.abrupt("return");case 8:Ba(this.props.userSession).then((function(e){null!=e&&e.skhubIdList.includes(t)&&r.setState({isAppOwner:!0})})).then((function(){r.props.location.search;console.log("tester",null!=r.props.snAppSkyspaces&&r.props.snAppSkyspaces.isAppOwner),r.props.fetchSkyspaceAppDetail({skyAppId:t,session:r.props.userSession})}));case 9:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e,t,a){if("/register"!==this.props.match.path){var n=this.props.match.params,r=n.id;n.sender;r,this.state.isRegister&&this.setState({isRegister:!1})}else this.state.isRegister||(this.setState({isRegister:!0,isAppOwner:!0}),this.props.setAppSkyspces({skyspaceForSkhubIdList:[],isAppOwner:!0}),this.props.fetchEmptyApp(),this.props.setAppSkyspces([]))}},{key:"onSubmitValidateField",value:function(e){var t=this.state.errorObj,a=this.props.skyapp[e],n=!1;if(null!=this.props.snAppSkyspaces&&!0===this.props.snAppSkyspaces.isAppOwner)switch(e){case"skylink":try{Object(Zt.parseSkylink)(a)}catch(r){t[e]=!0,t[e+".errorMsg"]=r,n=!0}break;case"skyspaceList":try{a&&a.length>0||(t[e]=!0,t[e+".errorMsg"]="please select atleast one Space for this Skylink. Its mandatory field.",n=!0)}catch(r){t[e]=!0,t[e+".errorMsg"]=r,n=!0}break;case"name":case"type":t[e]=null==a||""===a.trim(),n=t[e]}return this.setState({errorObj:t}),n}},{key:"validateField",value:function(e){var t=this.state.errorObj,a=this.props.skyapp[e],n=!1;if(null!=this.props.snAppSkyspaces&&!0===this.props.snAppSkyspaces.isAppOwner)switch(e){case"name":case"skylink":case"type":t[e]=null==a||""===a.trim(),n=t[e]}return this.setState({errorObj:t}),n}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.showLoader,s=a.redirectToAllApps,o=a.isRegister,c=a.edit,i=a.errorObj,l=this.props.skyapp;null!=this.props.snAppSkyspaces&&this.props.snAppSkyspaces.isAppOwner;return s?r.a.createElement(f.a,{to:"/history"}):n?r.a.createElement("div",{className:"loader"}):r.a.createElement(r.a.Fragment,null,r.a.createElement("main",{className:t.content},r.a.createElement("div",{style:{paddingTop:70,minHeight:"calc(100vh - 100px)"}},r.a.createElement(U.a,{container:!0,spacing:3,className:"most_main_grid_ef ".concat(t.most_main_grid_ef)},r.a.createElement(U.a,{item:!0,xs:12,className:t.main_grid_ef},r.a.createElement(Ar.a,{className:"".concat(t.paper," ").concat(t.MaintabsPaper_ef)},r.a.createElement(Ar.a,{className:t.tabsPaper_ef},r.a.createElement(kt.a,{className:t.title1_ef}," Add File/Folder in a Space "),r.a.createElement(kr.ValidatorForm,{ref:"form",onSubmit:this.handleSubmit,onError:function(e){return console.log(e)}},r.a.createElement(U.a,{container:!0,spacing:1},r.a.createElement("video",{src:"",muted:!0,controls:!0,crossOrigin:"anonymous",loop:!0,className:"d-none",id:"hidden-upload-video"}),r.a.createElement(U.a,{item:!0,xs:12},r.a.createElement(ur.a,{id:"skylink",name:"skylink",label:"Skylink URL",error:i.skylink,fullWidth:!0,value:l.skylink,autoComplete:"off",helperText:"Please provide 46 character skylink."+(i.skylink&&""!==i["skylink.errorMsg"]?"Details:"+i["skylink.errorMsg"]:""),onInput:function(e){e.target.value=e.target.value.slice(0,200)},onChange:this.handleChange})),r.a.createElement(U.a,{item:!0,xs:12},r.a.createElement(ur.a,{id:"name",name:"name",label:"File Name"+(l.bookmark||l.permission?"*":""),fullWidth:!0,error:i.name,value:l.name,autoComplete:"off",onChange:this.handleChange,helperText:i.name?"File name is a mandatory field.":"Max 200 characters. "+(l.bookmark||l.permission?"This is a mandatory field.":""),onInput:function(e){e.target.value=e.target.value.slice(0,200)}})),r.a.createElement(U.a,{item:!0,xs:12},r.a.createElement(Ko.a,{className:t.fullWidth,error:i.description},r.a.createElement(ur.a,{InputProps:{className:t.desc},className:t.description_inpt_ef,placeholder:"Description...",variant:"outlined",value:l.description,label:"Description*",autoComplete:"off",name:"description",id:"mui-theme-provider-outlined-input",onInput:function(e){e.target.value=e.target.value.slice(0,500)},onChange:this.handleChange}),r.a.createElement(Yo.a,null,"Max 500 characters. "+(i.name?"This is a mandatory field.":"")))),r.a.createElement(U.a,{item:!0,xs:12,className:"select-grid"},r.a.createElement(Ko.a,{className:t.formControl,error:i.skyspaceList,style:{width:"100%"}},r.a.createElement(U.a,{item:!0,xs:2,sm:2},"SkySpace"+(l.bookmark||l.permission?"*":"")),r.a.createElement(U.a,{item:!0,xs:10,sm:9},r.a.createElement("div",null,null!=this.props.snSkyspaceList&&this.props.snSkyspaceList.length>0?r.a.createElement(br,{selectedItems:null!=this.props.snAppSkyspacesToChange&&null!=this.props.snAppSkyspacesToChange.skyspaceForSkhubIdList?this.props.snAppSkyspacesToChange.skyspaceForSkhubIdList:[],itemsObj:this.getSkyspaceListForCarousalMenu(),labelKey:"label",onUpdate:function(t){return e.handleChange(t,{key:"skyspaceList"})}}):r.a.createElement(U.a,{item:!0,xs:12,sm:10,justify:"flex-start"},r.a.createElement(bt.a,{title:"Create New Space",arrow:!0},r.a.createElement(F.a,{onClick:this.addSkyspace,justify:"flex-start"},r.a.createElement(gt.a,{style:{color:ue,fontSize:25}}))))),r.a.createElement(Yo.a,null,"Please select atleast one Space (mandatory field)"+(l.permission?"This is a mandatory field.":""))))),r.a.createElement(U.a,{item:!0,xs:12,className:"select-grid"},r.a.createElement(Ko.a,{className:t.formControl,error:i.tags},r.a.createElement(Go.a,{value:l.tags,onAdd:function(t){return e.handleChange(t,{key:"tags",isArray:!0})},onDelete:function(t,a){e.handleChange(t,{key:"tags",isCallback:!0,callback:function(e,t){return e.splice(t,1),e}})}}),r.a.createElement(Yo.a,null,"Please select tags. "+(l.permission?"This is a mandatory field.":"")))),r.a.createElement(U.a,{item:!0,xs:12,className:"select-grid"},r.a.createElement(Ko.a,{className:t.formControl,error:i.type},r.a.createElement(Or.a,{options:ns(),getOptionLabel:function(e){return e.label},value:this.setTypeAutoCompleteValue(),name:"type",onChange:function(t,a){e.handleChange(null==a?null:a.key,{key:"type"})},renderInput:function(e){return r.a.createElement(ur.a,Object.assign({},e,{label:"Category",margin:"normal"}))}}),r.a.createElement(Yo.a,null,"Please select category. This is a mandatory field."))),2===l.category&&r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a,{item:!0,xs:12,sm:10},r.a.createElement(ur.a,{id:"git_url",name:"git_url",label:"Github/GitLab URL",fullWidth:!0,value:l.git_url,autoComplete:"off",onChange:this.handleChange})),r.a.createElement(U.a,{item:!0,xs:12,sm:10},r.a.createElement(ur.a,{id:"demo_url",name:"demo_url",label:"Demo URL",fullWidth:!0,value:l.demo_url,autoComplete:"off",onChange:this.handleChange})),r.a.createElement(U.a,{item:!0,xs:12,sm:10},r.a.createElement(ur.a,{id:"developer",name:"developer",label:"Developed By",fullWidth:!0,value:l.developer,autoComplete:"off",onChange:this.handleChange})),r.a.createElement(U.a,{item:!0,xs:12,sm:10},r.a.createElement(ur.a,{id:"appStatus",name:"appStatus",label:"App Status",fullWidth:!0,value:l.appStatus,autoComplete:"off",onChange:this.handleChange})),r.a.createElement(U.a,{item:!0,xs:12,sm:10},r.a.createElement(ur.a,{id:"support",name:"support",label:"Support",fullWidth:!0,value:l.support,autoComplete:"off",onChange:this.handleChange}))),r.a.createElement(U.a,{item:!0,xs:12,className:Vo()({"button-grid":!0})},r.a.createElement(ec,{isRegister:o,isAppOwner:null!=this.props.snAppSkyspaces&&this.props.snAppSkyspaces.isAppOwner,edit:c,onDelete:this.handleSubmit,onEdit:this.handleEditBtn,onDone:this.handleDoneBtn}))))))))),r.a.createElement("div",null,r.a.createElement(Zs,null))),r.a.createElement(Is,{open:this.state.snInfoModal.open,onClose:this.state.snInfoModal.onClose,title:this.state.snInfoModal.title,content:this.state.snInfoModal.description}),r.a.createElement(xr,{open:this.state.showAddSkyspace,title:this.state.skyspaceModal.title,skyspaceName:this.state.skyspaceModal.skyspaceName,handleClickOpen:this.handleAddSpaceOpen,handleClose:this.handleAddSpaceClose,type:this.state.skyspaceModal.type}))}}]),a}(r.a.Component),ac=Object(ht.a)(Ho)(Object(p.b)((function(e){return{isShowing:e.snLoader,skyapp:e.snAppDetail,userSession:e.userSession,person:e.person,snSkyspaceList:e.snSkyspaceList,snInfoModalState:e.snInfoModalState,snAppSkyspaces:e.snAppSkyspaceList,snUserSetting:e.snUserSetting,snAppSkyspacesToChange:JSON.parse(JSON.stringify(e.snAppSkyspaceList))}}),(function(e){return Object(_t.bindActionCreators)({setLoaderDisplay:Et,fetchAppDetail:Ln,fetchSkyspaceAppDetail:Pn,fetchEmptyApp:Dn,createSkapp:Bn,setInfoModalState:Tn,setAppSkyspces:Nn,fetchSkyspaceAppCount:cr,setAppDetail:Rn},e)}))(tc)),nc=(a(754),a(1218),a(1219),a(795)),rc=a.n(nc),sc=function(e){var t;return{dashboardCont:{display:"flex",flexDirection:"row",marginLeft:28,marginTop:25,alignItems:"center"},spaceIcon:{color:e.palette.primary.main,fontSize:"20px"},spacesLink:{color:e.palette.primary.main,paddingLeft:30},iconStyling:{fontSize:"20px"},spacesCont:{display:"flex",justifyContent:"space-between",paddingTop:10,paddingBottom:10},linkName:{paddingLeft:30,color:e.palette.linksColor,textDecoration:"none"},spacelinkName:{paddingLeft:30,fontSize:15,color:e.palette.linksColor},editIconStyle:{fontSize:23,paddingRight:5,color:e.palette.mediumGray},shareIconStyle:{fontSize:15,color:e.palette.mediumGray},shareIconStyleNew:{fontSize:15,color:e.palette.mediumGray,paddingLeft:10},list:Object(w.a)({width:295},e.breakpoints.up("sm"),{display:"none !important"}),fullList:{width:"auto"},spaceBookIcon:{fontSize:15,color:e.palette.mediumGray,position:"relative",left:12},spacesNumber:{color:e.palette.primary.main,fontSize:13,paddingLeft:6},spaceLinkStyle:{display:"flex",alignItems:"center",justifyContent:"space-between",color:e.palette.linksColor,paddingTop:10,paddingBottom:10},linksStyles:{display:"flex",alignItems:"center",color:e.palette.linksColor,paddingTop:10,paddingBottom:10},sideNavContainer:{paddingTop:100,margin:"auto",width:"80%"},sideNavContainerForDrawer:{paddingTop:20,margin:"auto",width:"80%"},drawerPaper:{width:295,borderRight:"none",backgroundColor:e.palette.lightGray},mainExampleDrawer:{backgroundColor:e.palette.lightGray},content:(t={},Object(w.a)(t,e.breakpoints.up("sm"),{width:"calc(100% - ".concat(295,"px)"),marginLeft:295}),Object(w.a)(t,"backgroundColor",e.palette.whiteBgColor),Object(w.a)(t,"padding",e.spacing(3)),t),contentBgColor:{backgroundColor:e.palette.whiteBgColor},content2:Object(w.a)({},e.breakpoints.up("sm"),{width:"100%",marginLeft:0}),drawer:Object(w.a)({},e.breakpoints.up("sm"),{width:295,flexShrink:0}),sideProf_div:{marginTop:"10px",height:"180px",background:"white",overflowY:"scroll",paddingBottom:"20px",backgroundColor:e.palette.whiteBgColor},innerSideProf_div:{display:"flex",padding:"20px"},innerSideProf2_div:{display:"flex",padding:"0px 20px 0px 20px"},icon_sub_title_div:{fontSize:"12px",padding:"3px 0px 0px 20px",color:"".concat(e.palette.primary.textColor)},sharedSpace_names:{color:e.palette.linksColor},image_logo_sideBarfooter:{display:"flex",justifyContent:"center"}}},oc=a(803),cc=(a(1220),a(804)),ic=a.n(cc),lc=(a(536),a(137)),pc=(a(1242),a(801),a(1247),a(802),a(1298),a(796),a(748),a(800),r.a.forwardRef((function(e,t){return r.a.createElement(ae.a,Object.assign({direction:"up",ref:t},e))})));var uc=Object(jr.a)((function(e){return{typography:{padding:e.spacing(1)}}}));function dc(e){var t=uc(),a=Object(p.c)(),s=Object(n.useState)(null),o=Object(c.a)(s,2),i=o[0],l=o[1],u=Object(n.useState)(!1),d=Object(c.a)(u,2),f=d[0],h=d[1],g=Object(n.useState)(null),S=Object(c.a)(g,2),v=S[0],E=S[1],x=Object(n.useState)([]),O=Object(c.a)(x,2),w=O[0],C=O[1],j=Object(p.d)((function(e){return e.userSession}));Object(n.useEffect)((function(){l(""),C([])}),[e.open]);var _=function(){var t=Object(k.a)(b.a.mark((function t(){var a,n,r,s,o,c,i,l,p;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a={},n=Object(m.a)(w),t.prev=2,n.s();case 4:if((r=n.n()).done){t.next=34;break}if(s=r.value,o=e.sharedWithObj[s].spaces.indexOf(e.skyspaceName),0!==e.sharedWithObj[s].spaces.length){t.next=10;break}t.next=30;break;case 10:a[s]=[],c=Object(m.a)(e.sharedWithObj[s].spaces),t.prev=12,c.s();case 14:if((i=c.n()).done){t.next=22;break}return l=i.value,t.next=18,Xa(j,l);case 18:p=t.sent,a[s]=[].concat(Object(y.a)(a[s]),Object(y.a)(p.skhubIdList));case 20:t.next=14;break;case 22:t.next=27;break;case 24:t.prev=24,t.t0=t.catch(12),c.e(t.t0);case 27:return t.prev=27,c.f(),t.finish(27);case 30:if(!a[s]){t.next=32;break}return t.delegateYield(b.a.mark((function t(){var n,r,c,i;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(y.a)(new Set(Object(y.a)(a[s]))),e.sharedWithObj[s].skylinks=e.sharedWithObj[s].skylinks.filter((function(e){return n.indexOf(e)>-1})),t.next=4,On(s);case 4:return r=t.sent,t.next=7,jn(j,s,e.sharedWithObj[s].skylinks,e.sharedWithObj);case 7:return c=t.sent,r[c[0]]=c[1],i=ke+e.skyspaceName+".json",delete r[i],t.next=13,Aa(j,"skhub/shared/"+s,r);case 13:return e.sharedWithObj[s].spaces.splice(o,1),t.next=16,yn(e.userSession,e.sharedWithObj);case 16:return t.next=18,An(e.userSession,e.sharedWithObj[s].spaces,e.sharedWithObj[s].userid,e.sharedWithObj);case 18:case"end":return t.stop()}}),t)}))(),"t1",32);case 32:t.next=4;break;case 34:t.next=39;break;case 36:t.prev=36,t.t2=t.catch(2),n.e(t.t2);case 39:return t.prev=39,n.f(),t.finish(39);case 42:case"end":return t.stop()}}),t,null,[[2,36,39,42],[12,24,27,30]])})));return function(){return t.apply(this,arguments)}}(),A=function(){var t=Object(k.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,a(Et(!0)),!(w.length>0)){t.next=5;break}return t.next=5,_();case 5:if(!i||""===i.trim()){t.next=8;break}return t.next=8,An(e.userSession,[e.skyspaceName],i,e.sharedWithObj);case 8:a(Et(!1)),e.onNo(),t.next=17;break;case 12:t.prev=12,t.t0=t.catch(0),a(Et(!1)),C([]),h(!0);case 17:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(G.a,{open:e.open,onClose:e.onNo,TransitionComponent:pc,keepMounted:!0,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(ee.a,{id:"alert-dialog-title"},e.title),r.a.createElement(X.a,null,r.a.createElement(Q.a,{id:"alert-dialog-description"},e.content,"(Hint: User can access PublicKey by clicking on profile icon on left top corner)"),r.a.createElement(U.a,{container:!0,spacing:1,direction:"row"},r.a.createElement(U.a,{item:!0,xs:12},r.a.createElement(r.a.Fragment,null,e.sharedWithObj&&Object.keys(e.sharedWithObj).filter((function(e){return-1===w.indexOf(e)})).filter((function(t){return e.sharedWithObj[t].spaces.indexOf(e.skyspaceName)>-1})).map((function(t,a){return r.a.createElement(bt.a,{title:e.sharedWithObj[t].userid,arrow:!0},r.a.createElement(pr.a,{key:a,label:lr()(e.sharedWithObj[t].userid,30),onDelete:function(){return function(e){return C([].concat(Object(y.a)(w),[e]))}(t)},color:"primary",variant:"outlined"}))})),r.a.createElement(ur.a,{id:"recipientId",name:"recipientId",label:"Recipient's PublicKey",fullWidth:!0,value:i,autoComplete:"off",helperText:"Please enter recipient's publicKey",onChange:function(e){E(e.target),l(e.target.value)}}),r.a.createElement(Qs.a,{id:"id",open:f,anchorEl:v,onClose:function(){return h(!1)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},r.a.createElement(kt.a,{className:t.typography},"The user has not created an account with Skyspaces!")))))),r.a.createElement(Z.a,null,r.a.createElement(te.a,{onClick:e.onNo,autoFocus:!0,variant:"contained",color:"secondary",className:"btn-bg-color",startIcon:r.a.createElement(V.a,null)},"Cancel"),r.a.createElement(te.a,{onClick:function(e){return A()},autoFocus:!0,disabled:(null==i||""===i.trim())&&0===w.length,variant:"contained",color:"primary",className:"btn-bg-color",startIcon:r.a.createElement($.a,null)},"OK"))))}a(755);var fc=a(435),mc=a.n(fc),hc=a(532),yc=a(797),gc=a.n(yc),bc=a(533),kc=a.n(bc),Sc=a(799),vc=a.n(Sc),Ec=a(798),xc=a.n(Ec);var Oc=function(e){return{type:"SET_IMPORTED_SPACE",payload:e}},wc=r.a.forwardRef((function(e,t){return r.a.createElement(ae.a,Object.assign({direction:"up",ref:t},e))}));var Cc=Object(jr.a)((function(e){return{typography:{padding:e.spacing(1)}}})),jc=function(e){Cc();var t=Object(p.c)(),a=Object(n.useState)(null),s=Object(c.a)(a,2),o=s[0],i=s[1],l=Object(p.d)((function(e){return e.userSession})),u=function(){var a=Object(k.a)(b.a.mark((function a(){var n;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t(Et(!0)),a.next=3,gn(l,[o]);case 3:n=a.sent,t(Oc(n)),t(Et(!1)),i(""),e.onNo();case 8:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();return r.a.createElement(G.a,{open:e.open,onClose:e.onNo,TransitionComponent:wc,keepMounted:!0,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(ee.a,{id:"alert-dialog-title"},"Add Shared Spaces (Private Sharing Between Users)"),r.a.createElement(X.a,null,r.a.createElement(Q.a,{id:"alert-dialog-description"},'Please enter "PublicKey" of the user who has shared a space with you',r.a.createElement("br",null),"(Hint: User can access PublicKey by clicking on profile icon on left top corner)"),r.a.createElement(ur.a,{id:"recipientId",name:"recipientId",label:"Sender's PublicKey",fullWidth:!0,value:o,autoComplete:"off",helperText:"Please enter PublicKey",onChange:function(e){return i(e.target.value)}})),r.a.createElement(Z.a,null,r.a.createElement(te.a,{onClick:e.onNo,autoFocus:!0,variant:"contained",color:"secondary",className:"btn-bg-color",startIcon:r.a.createElement(V.a,null)},"Cancel"),r.a.createElement(te.a,{onClick:u,autoFocus:!0,variant:"contained",color:"primary",className:"btn-bg-color",startIcon:r.a.createElement($.a,null)},"OK")))},_c=a(534),Ac=function(e){Object(x.a)(a,e);var t=Object(O.a)(a);function a(e){var n;return Object(S.a)(this,a),(n=t.call(this,e)).importSharedSpace=function(){n.setState({showImportSkyspaceModal:!0})},n.handleClickOpen=function(){n.setState({showAddSkyspace:!0})},n.handleClose=function(){n.setState({showAddSkyspace:!1,skyspaceModal:{title:"",skyspaceName:"",type:""}})},n.renameSkySpace=function(e,t){e.preventDefault(),e.stopPropagation(),console.log("renameSkySpace before open modal",t,window.location),n.setState({skyspaceModal:{title:"Rename Skyspace",skyspaceName:t,type:"RENAME_SKYSPACE"}}),n.handleClickOpen()},n.addSkyspace=function(e){e.preventDefault(),e.stopPropagation(),console.log("add skypace clicked"),n.setState({skyspaceModal:{title:"Add New Skyspace",skyspaceName:"",type:"ADD_SKYSPACE"}}),n.handleClickOpen()},n.deleteSkyspace=function(){var e=Object(k.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.props.setLoaderDisplay(!0),e.next=3,za(n.props.userSession,t,!0);case 3:n.props.fetchSkyspaceList(),n.props.fetchSkyspaceDetail(),n.props.setLoaderDisplay(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.getSkyspace=function(e,t){e.preventDefault(),e.stopPropagation(),Za(n.props.userSession,t)},n.refreshSkyspace=function(e){e.preventDefault(),e.stopPropagation(),n.props.fetchSkyspaceList(),n.props.fetchSkyspaceAppCount()},n.addDummySkyspace=function(e){e.preventDefault(),e.stopPropagation(),_a(n.props.userSession,"skhub/skyspaces/dummy.json",{props:"1"}).then((function(e){return e})).catch((function(e){}))},n.removeDummySkyspace=function(e){e.preventDefault(),e.stopPropagation(),Ta(n.props.userSession,"skhub/skyspaces/dummy.json").then((function(e){return e})).catch((function(e){}))},n.onDelete=function(e,t){e.preventDefault(),e.stopPropagation(),n.setState({showConfModal:!0,skyspaceToDel:t,confModalDescription:"This action will permanently remove your "+t+" skyspace. Do you want to continue?"})},n.launchShareModal=function(){var e=Object(k.a)(b.a.mark((function e(t,a){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),t.stopPropagation(),n.props.setLoaderDisplay(!0),e.next=5,hn(n.props.userSession);case 5:r=e.sent,n.props.setLoaderDisplay(!1),n.setState({showShareSkyspaceModal:!0,skyspaceToShare:a,sharedWithObj:r});case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),n.state={showAddSkyspace:!1,sharedWithObj:null,showConfModal:!1,showShareSkyspaceModal:!1,confModalDescription:null,skyspaceToDel:null,skyspaceToShare:null,showImportSkyspaceModal:!1,skyspaceModal:{title:"Add New Skyspace",skyspaceName:null,type:"ADD_SKYSPACE"}},n}return Object(v.a)(a,[{key:"render",value:function(){var e,t,a=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:this.props.classes.spaceLinkStyle},r.a.createElement("span",null,r.a.createElement(hc.a,{className:this.props.classes.spaceIcon}),r.a.createElement(kt.a,{variant:"span",style:{paddingLeft:"30px"}},"Spaces")),r.a.createElement("span",null,r.a.createElement(gc.a,{className:this.props.classes.spaceIcon,onClick:this.refreshSkyspace}),r.a.createElement(mc.a,{className:this.props.classes.spaceIcon,onClick:this.addSkyspace}))),null!=this.props.skyspaceList&&this.props.skyspaceList.map((function(e){return r.a.createElement("div",{className:a.props.classes.spacesCont,key:e},r.a.createElement(d.c,{activeClassName:"active",onClick:function(){return a.props.isMobile&&a.props.toggleMobileMenuDisplay()},to:"/skyspace/"+e},r.a.createElement("span",null,r.a.createElement(kc.a,{className:a.props.classes.spaceBookIcon}),r.a.createElement(kt.a,{variant:"span",className:a.props.classes.spacelinkName},lr()(e,20),r.a.createElement("span",{className:a.props.classes.spacesNumber},"(",a.props.snSkyspaceAppCount&&a.props.snSkyspaceAppCount[e],")")))),r.a.createElement("span",null,r.a.createElement(mt.a,{className:a.props.classes.shareIconStyle,onClick:function(t){return a.renameSkySpace(t,e)}}),r.a.createElement(xc.a,{className:a.props.classes.shareIconStyle,onClick:function(t){return a.onDelete(t,e)}}),r.a.createElement("a",{onClick:function(t){return a.launchShareModal(t,e)},className:a.props.classes.shareIconStyleNew,title:"Private Share"},r.a.createElement("i",{class:"fas fa-people-arrows icon_private_share_menu"}))))})),r.a.createElement("div",{className:this.props.classes.spaceLinkStyle},r.a.createElement("span",null,r.a.createElement(_c.a,{className:this.props.classes.iconStyling}),r.a.createElement(kt.a,{variant:"span",style:{paddingLeft:"25px"}},"Shared Spaces")),r.a.createElement("span",null,r.a.createElement(mc.a,{className:this.props.classes.spaceIcon,onClick:this.importSharedSpace}))),r.a.createElement("div",{className:this.props.classes.sideProf_div},null===(e=this.props.snImportedSpace)||void 0===e||null===(t=e.sharedByUserList)||void 0===t?void 0:t.filter((function(e){var t,n;return(null===(t=a.props.snImportedSpace)||void 0===t||null===(n=t.senderToSpacesMap[e])||void 0===n?void 0:n.skyspaceList.length)>0})).map((function(e){var t,n;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:a.props.classes.innerSideProf_div,key:e},r.a.createElement("div",{className:a.props.classes.icon_side_inner_div},r.a.createElement(vc.a,{className:a.props.classes.spaceIcon})),r.a.createElement("div",{style:{paddingLeft:"20px",marginTop:"-5px"}},r.a.createElement("span",{style:{fontSize:"12px"},className:a.props.classes.sharedSpace_names},lr()(e,18)),null===(t=a.props.snImportedSpace)||void 0===t||null===(n=t.senderToSpacesMap[e])||void 0===n?void 0:n.skyspaceList.map((function(t){return r.a.createElement(d.c,{activeClassName:"active",key:t,className:"imported-space-nav-link",onClick:function(){return a.props.isMobile&&a.props.toggleMobileMenuDisplay()},to:"/imported-spaces/"+encodeURIComponent(e)+"/"+t},r.a.createElement("div",{className:a.props.classes.icon_sub_title_div},"# ",lr()(t,20)))})))))}))),r.a.createElement(xr,{open:this.state.showAddSkyspace,title:this.state.skyspaceModal.title,skyspaceName:this.state.skyspaceModal.skyspaceName,handleClickOpen:this.handleClickOpen,handleClose:this.handleClose,type:this.state.skyspaceModal.type}),r.a.createElement(re,{open:this.state.showConfModal,onYes:function(){a.setState({showConfModal:!1}),a.deleteSkyspace(a.state.skyspaceToDel)},onNo:function(){return a.setState({showConfModal:!1})},title:"Warning!",content:this.state.confModalDescription}),r.a.createElement(dc,{open:this.state.showShareSkyspaceModal,onYes:function(){a.setState({showShareSkyspaceModal:!1})},skyspaceName:this.state.skyspaceToShare,userSession:this.props.userSession,onNo:function(){return a.setState({showShareSkyspaceModal:!1})},title:"Share Space: ".concat(this.state.skyspaceToShare),content:this.state.confModalDescription,sharedWithObj:this.state.sharedWithObj}),r.a.createElement(jc,{open:this.state.showImportSkyspaceModal,onYes:function(){a.setState({showImportSkyspaceModal:!1})},userSession:this.props.userSession,onNo:function(){return a.setState({showImportSkyspaceModal:!1})},title:"Add Shared Space"}))}}]),a}(r.a.Component),Ic=Object(ht.a)(sc,{withTheme:!0})(Object(p.b)((function(e){return{showMobileMenu:e.snShowMobileMenu,userSession:e.userSession,skyspaceList:e.snSkyspaceList,person:e.person,snSkyspaceAppCount:e.snSkyspaceAppCount,snImportedSpace:e.snImportedSpace}}),(function(e){return Object(_t.bindActionCreators)({setMobileMenuDisplay:Sr,toggleMobileMenuDisplay:vr,fetchSkyspaceList:Hn,setLoaderDisplay:Et,setSkyspaceList:zn,fetchSkyspaceAppCount:cr,fetchSkyspaceDetail:Kn},e)}))(Ac));a(1221),a(735);var Tc=a(750);Object(jr.a)((function(e){return{root:{position:"relative"},bottom:{color:e.palette.grey["light"===e.palette.type?200:700]},top:{color:"#1a90ff",animationDuration:"550ms",position:"absolute",left:0},circle:{strokeLinecap:"round"}}}));var Nc=Object(jr.a)({root:{flexGrow:1}});Object(ht.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:e.palette.grey["light"===e.palette.type?200:700]},bar:{borderRadius:5,backgroundColor:"#1a90ff"}}}))(Tc.a);function Lc(e){var t=Object(n.useState)(null),a=Object(c.a)(t,2),s=a[0],o=a[1];Nc();return Object(n.useEffect)((function(){o(e.syncStatus)}),[e.syncStatus]),r.a.createElement(r.a.Fragment,null,null==s&&r.a.createElement("a",{class:"button-sync"},r.a.createElement("div",{class:"initial"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},r.a.createElement("path",{d:"M370.72 133.28C339.458 104.008 298.888 87.962 255.848 88c-77.458.068-144.328 53.178-162.791 126.85-1.344 5.363-6.122 9.15-11.651 9.15H24.103c-7.498 0-13.194-6.807-11.807-14.176C33.933 94.924 134.813 8 256 8c66.448 0 126.791 26.136 171.315 68.685L463.03 40.97C478.149 25.851 504 36.559 504 57.941V192c0 13.255-10.745 24-24 24H345.941c-21.382 0-32.09-25.851-16.971-40.971l41.75-41.749zM32 296h134.059c21.382 0 32.09 25.851 16.971 40.971l-41.75 41.75c31.262 29.273 71.835 45.319 114.876 45.28 77.418-.07 144.315-53.144 162.787-126.849 1.344-5.363 6.122-9.15 11.651-9.15h57.304c7.498 0 13.194 6.807 11.807 14.176C478.067 417.076 377.187 504 256 504c-66.448 0-126.791-26.136-171.315-68.685L48.97 471.03C33.851 486.149 8 475.441 8 454.059V320c0-13.255 10.745-24 24-24z"})),r.a.createElement("p",null,"Sync Now"))),"syncing"==s&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{class:"button-sync"},r.a.createElement("div",{class:"syncing"},r.a.createElement("svg",{class:"sync-spinner",width:"18px",height:"18px",viewBox:"0 0 18 18",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("circle",{class:"sync-path",fill:"none","stroke-width":"3","stroke-linecap":"round",cx:"9",cy:"9",r:"7.5"})),r.a.createElement("p",null,"Syncing...")))),"synced"==s&&r.a.createElement("div",{class:"button-sync"},r.a.createElement("div",{class:"success"},r.a.createElement("svg",{class:"sync-success",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},r.a.createElement("path",{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"})),r.a.createElement("p",null,"Synced"))))}var Pc=a(535),Dc=a.n(Pc),Mc=Object(jr.a)(sc);function Rc(e){var t=Mc(),a=Object(p.c)(),s=(Object(f.g)(),Object(Xs.a)(),Object(n.useState)(null)),o=Object(c.a)(s,2),i=o[0],l=o[1],u=Object(p.d)((function(e){return e.snShowMobileMenu})),m=Object(p.d)((function(e){return e.snShowDesktopMenu})),h=Object(p.d)((function(e){return e.userSession})),y=(Object(p.d)((function(e){return e.snSkyspaceList})),Object(p.d)((function(e){return e.person}))),g=Object(p.d)((function(e){return e.snIsDataOutOfSync}));Object(n.useEffect)((function(){l(1==g?null:"synced")}),[g]),Dc()(Object(k.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oa(xe);case 2:if(t=e.sent,!g&&void 0!==t&&null!==t){e.next=9;break}return l("syncing"),e.next=7,Pa(h,null,null);case 7:"success"==e.sent?(l("synced"),a(aa(!1))):(l(null),a(aa(!0)));case 9:case"end":return e.stop()}}),e)}))),9e4);var S=function(e){return r.a.createElement(r.a.Fragment,null,e&&u&&r.a.createElement("div",null,r.a.createElement("img",{src:"https://skyspaces.io/static/media/SkySpaces_g.531bd028.png",style:{width:200,height:50,marginBottom:15}})),r.a.createElement(kt.a,{variant:"span"},"AutoSync Check Every 90 Seconds"),r.a.createElement(U.a,{container:!0},r.a.createElement(Lc,{syncStatus:i})),r.a.createElement("div",{className:t.linksStyles},r.a.createElement(oc.a,{className:t.iconStyling}),r.a.createElement(d.c,{to:"/upload",activeClassName:"active",onClick:function(){return e&&Sr(!1)},className:t.linkName},r.a.createElement(kt.a,{variant:"span"},"Upload"))),r.a.createElement("div",{className:t.linksStyles},r.a.createElement(ic.a,{className:t.iconStyling}),r.a.createElement(d.c,{to:"/register",activeClassName:"active",onClick:function(){return e&&Sr(!1)},className:t.linkName},r.a.createElement(kt.a,{variant:"span"},"New"))),r.a.createElement(r.a.Fragment,null,null!=y&&r.a.createElement(Ic,{isMobile:e,toggleMobileMenuDisplay:function(){return a(vr())}})),r.a.createElement("div",{style:{paddingTop:"40px"}},r.a.createElement("div",{className:t.image_logo_sideBarfooter},r.a.createElement("img",{src:"https://skyspaces.io/static/media/Sia.7dd07c88.svg",height:"60",width:"60"}))))};return m&&y&&r.a.createElement("nav",{className:t.drawer,"aria-label":"mailbox folders"},r.a.createElement(ws.a,{xsDown:!0,implementation:"css"},r.a.createElement(lc.a,{classes:{paper:t.drawerPaper},variant:"permanent",open:!0},r.a.createElement("div",{className:"main-example"},r.a.createElement("div",{className:t.sideNavContainer},S())))),r.a.createElement(ws.a,{smUp:!0,implementation:"css"},u&&r.a.createElement("div",{className:t.list,role:"presentation"},r.a.createElement("div",{id:"mobile-menu",className:"main-example ".concat(t.mainExampleDrawer)},r.a.createElement("div",{className:t.sideNavContainerForDrawer},S(!0))))))}var Bc=a(542),Uc=a(738),Fc=a(810),Kc=a.n(Fc),zc=function(e){return null==e?de.removeItem("USER_SESSION"):(e.skydbseed||"SKYID"==e.idp)&&de.setItem("USER_SESSION",JSON.stringify(e)),{type:"SET_USER_SESSION",payload:e}};var Hc=a(809),Yc=a.n(Hc),Wc=a(805),Gc=a.n(Wc),Jc=a(806),Vc=a.n(Jc),Zc=a(537),Xc=a.n(Zc),Qc=a(807),qc=a.n(Qc),$c=a(808),ei=a.n($c),ti=a(538),ai=a.n(ti),ni=Object(jr.a)((function(e){return{menuTop:{marginTop:25},profilePicStyling:{boxShadow:"0 0 10px rgba(0,0,0,.4)",backgroundColor:e.palette.whiteBgColor,borderRadius:"50%",width:90,height:90,display:"flex",justifyContent:"center",alignItems:"center",fontWeight:"bold",color:e.palette.primary.main,cursor:"pointer",fontSize:45,marginTop:30,marginLeft:65,marginRight:65},camereIconContainer:{width:25,height:25,backgroundColor:e.palette.primary.main,display:"flex",justifyContent:"center",alignItems:"center",borderRadius:50,position:"relative",left:123,top:-20},userIdStyle:{fontSize:14,color:e.palette.linksColor,fontWeight:500},userNameStyle:{fontSize:18,color:e.palette.linksColor,fontWeight:500,borderBottom:"1px solid ".concat(e.palette.primary.main),paddingBottom:20},menuListContainers:{display:"flex",fontSize:16,alignItems:"center",paddingTop:8,paddingBottom:8,cursor:"pointer",color:e.palette.linksColor},menuBackGroundColor:{backgroundColor:e.palette.headerBgColor}}}));var ri=function(e){var t,a,n,s=e.userMenu,o=e.setUserMenu,c=ni(),i=Object(p.c)(),l=Object(f.g)(),u=Object(p.d)((function(e){return e.person})),m=Object(p.d)((function(e){return e.userSession})),h=Object(p.d)((function(e){return e.snDarkMode})),y=function(){o(null)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Qs.a,{className:c.menuTop,open:Boolean(s),anchorEl:s,onClose:y,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},classes:{paper:"py-8"}},r.a.createElement(qr.a,{p:2,className:c.menuBackGroundColor},r.a.createElement("div",{className:c.profilePicStyling,onClick:function(){return l.push("/profile")}},null===u||void 0===u||null===(t=u.profile)||void 0===t||null===(a=t.username)||void 0===a?void 0:a.charAt(0).toUpperCase()),r.a.createElement("div",{className:c.camereIconContainer},r.a.createElement(Gc.a,{style:{fontSize:13,color:"white"}})),r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(kt.a,{className:c.userIdStyle},"Welcome"),r.a.createElement("div",null,r.a.createElement(kt.a,{className:c.userNameStyle},null===u||void 0===u||null===(n=u.profile)||void 0===n?void 0:n.username))),r.a.createElement("div",{style:{marginTop:20}},r.a.createElement(d.b,{to:"/settings"},r.a.createElement("div",{className:c.menuListContainers,onClick:y}," ",r.a.createElement(Vc.a,{style:{fontSize:18}}),r.a.createElement("div",{style:{paddingLeft:20}},r.a.createElement(kt.a,{variant:"span"},"Setting")))),r.a.createElement("div",{className:c.menuListContainers,onClick:y},r.a.createElement(Xc.a,{style:{fontSize:18}}),r.a.createElement("div",{style:{paddingLeft:20}},r.a.createElement(kt.a,{variant:"span"},"Backup"))),r.a.createElement(d.b,{to:"/history"},r.a.createElement("div",{className:c.menuListContainers,onClick:y},r.a.createElement(qc.a,{style:{fontSize:18}}),r.a.createElement("div",{style:{paddingLeft:20}},r.a.createElement(kt.a,{variant:"span"},"History")))),r.a.createElement("div",{className:c.menuListContainers,style:{paddingTop:0,paddingBottom:0}},r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},r.a.createElement(ei.a,{style:{fontSize:18}}),r.a.createElement("div",{style:{paddingLeft:20}},r.a.createElement(kt.a,{variant:"span"},"Dark mode"))),r.a.createElement("div",{style:{marginLeft:40}},r.a.createElement(Cs.a,{name:"checkedA",checked:h,onChange:function(e){var t=e.target.checked;localStorage.setItem("darkMode",t),i(function(e){return localStorage.setItem("darkMode",JSON.stringify(e)),{type:"ACT_TY_CHANGE_DARK_MODE_STATE",payload:e}}(t))},inputProps:{"aria-label":"secondary checkbox"}}))),r.a.createElement("div",{className:c.menuListContainers,onClick:function(){y(),e.onShowSkyDbPublicKey()}},r.a.createElement(Yc.a,{style:{fontSize:18}}),r.a.createElement("div",{style:{paddingLeft:20}},r.a.createElement(kt.a,{variant:"span"},"Show App Public Key"))),r.a.createElement("div",{className:c.menuListContainers,onClick:function(){i(Jn(m))}},r.a.createElement(ai.a,{style:{fontSize:18}}),r.a.createElement("div",{style:{paddingLeft:20}},r.a.createElement(kt.a,{variant:"span"},"Sign out")))))))},si=function(e){Object(x.a)(a,e);var t=Object(O.a)(a);function a(e){var n;return Object(S.a)(this,a),(n=t.call(this,e)).userMenuClick=function(e){n.setState({userMenu:e.currentTarget})},n.gotoSkydbLogin=function(){var e=n.getPublicToAccHash(),t="";e&&(t="?sharedhash="+e),n.props.history.push("/login"+t)},n.getPublicToAccHash=function(){return new URLSearchParams(n.props.location.search).get("sharedhash")},n.handleClick=function(e){n.setState({anchorEl:null==e?null:e.currentTarget})},n.logout=function(){n.props.logoutPerson(n.props.userSession),n.handleClick()},n.handleSettings=function(){n.handleClick(),n.props.history.push("/settings")},n.onDownload=function(){console.log("topbar download button clicked")},n.clearAllStorage=Object(k.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.props.setLoaderDisplay(!0),e.next=3,fn(n.props.userSession);case 3:localStorage.clear(),n.props.setLoaderDisplay(!0),n.logout();case 6:case"end":return e.stop()}}),e)}))),n.showSkydbPublicKey=function(){n.handleClick(),n.setState({showInfoModal:!0,infoModalContent:n.props.person.appPublicKey})},n.state={anchorEl:null,userMenu:null,showInfoModal:!1,onInfoModalClose:function(){return n.setState({showInfoModal:!1})},infoModalContent:"public"},n}return Object(v.a)(a,[{key:"componentDidMount",value:function(){var e=Object(k.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.props.person){e.next=4;break}this.props.userSession.isSignInPending&&this.props.userSession.isSignInPending()?this.props.fetchBlockstackPerson(this.props.userSession):null!=this.getPublicToAccHash()&&this.gotoSkydbLogin(),e.next=9;break;case 4:return e.t0=this.props,e.next=7,En(this.props.userSession||je);case 7:e.t1=e.sent,e.t0.setImportedSpace.call(e.t0,e.t1);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t,a,n=this,s=this.props.classes;return r.a.createElement(r.a.Fragment,null,null!=this.props.person&&r.a.createElement(ri,{userMenu:this.state.userMenu,setUserMenu:function(e){return n.setState({userMenu:e})},onShowSkyDbPublicKey:this.showSkydbPublicKey}),null==this.props.person&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"login-butn-main-out-div"},r.a.createElement("button",{onClick:this.gotoSkydbLogin,type:"button",class:"btn btn-sm butn-out-login-nvbr d-none"},"Login")),r.a.createElement("div",{className:"signUp-butn-main-out-div"},r.a.createElement("button",{style:{border:"1px solid #1ed660"},type:"button",class:"btn  btn-sm butn-out-signup d-none"},"Sign up"))),this.props.person&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{onClick:this.userMenuClick,className:s.avatar},null===(e=this.props.person)||void 0===e||null===(t=e.profile)||void 0===t||null===(a=t.username)||void 0===a?void 0:a.charAt(0).toUpperCase())),r.a.createElement(Is,{open:this.state.showInfoModal,onClose:this.state.onInfoModalClose,title:"Skydb Public Key",showClipboardCopy:!0,clipboardCopyTooltip:"Copy Public Key To Clipboard",content:this.state.infoModalContent}))}}]),a}(r.a.Component),oi=Object(p.b)((function(e){return{showMobileMenu:e.snShowMobileMenu,userSession:e.userSession,snPortalsList:e.snPortalsList,snApps:e.snApps,person:e.person,triggerSignIn:e.snTriggerSignin,snUserSetting:e.snUserSetting,snTopbarDisplay:e.snTopbarDisplay,snShowDesktopMenu:e.snShowDesktopMenu,snPublicHash:e.snPublicHash,snPublicInMemory:e.snPublicInMemory}}),(function(e){return Object(_t.bindActionCreators)({setMobileMenuDisplay:Sr,toggleMobileMenuDisplay:vr,fetchBlockstackPerson:Gn,logoutPerson:Jn,toggleDesktopMenuDisplay:Mr,setUserSession:zc,setPerson:Yn,setPersonGetOtherData:Wn,fetchPublicApps:Kt,setLoaderDisplay:Et,fetchAppsSuccess:zt,setApps:Ht,setImportedSpace:Oc},e)}))(Object(f.i)(Object(ht.a)((function(e){return{avatar:{boxShadow:"0 0 10px rgba(0,0,0,.4)",backgroundColor:e.palette.primary.main,borderRadius:"50%",width:45,height:45,display:"flex",justifyContent:"center",alignItems:"center",fontWeight:"bold",color:"white",cursor:"pointer"}}}))(si))),ci=Object(jr.a)((function(e){return{root:{display:"flex"},headerBgColorSet:{backgroundColor:e.palette.headerBgColor},searchBarBg:{backgroundColor:e.palette.centerBar},portalFormControl:{marginBottom:10},appBar:{zIndex:e.zIndex.drawer+1},drawer:{width:240,flexShrink:0},menuButton:Object(w.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),drawerPaper:{width:240},content:{flexGrow:1,padding:e.spacing(3)},searchBarForm:{width:"100%",display:"flex"},appLogo:{color:e.palette.mediumGray,fontSize:35,marginRight:20},toolbar:e.mixins.toolbar}}));function ii(e){return r.a.createElement(ms.a,Object.assign({elevation:6,variant:"filled"},e))}function li(e){var t,a,s=ci(),o=Object(p.c)(),i=Object(f.g)(),l=Object(n.useState)(""),u=Object(c.a)(l,2),d=u[0],m=u[1],h=Object(n.useState)(!1),y=Object(c.a)(h,2),g=y[0],S=y[1],v=Object(n.useState)(me),E=Object(c.a)(v,2),x=(E[0],E[1],Object(n.useState)(!1)),O=Object(c.a)(x,2),C=O[0],j=O[1],_=Object(n.useState)(""),A=Object(c.a)(_,2),I=A[0],T=(A[1],Object(n.useState)("")),N=Object(c.a)(T,2),L=(N[0],N[1],Object(n.useState)(!1)),P=Object(c.a)(L,2),D=(P[0],P[1],Object(n.useState)(!1)),M=Object(c.a)(D,2),R=M[0],B=M[1],U=Object(p.d)((function(e){return e.snShowMobileMenu})),K=(Object(p.d)((function(e){return e.userSession})),Object(p.d)((function(e){return e.snPortalsList}))),H=(Object(p.d)((function(e){return e.snApps})),Object(p.d)((function(e){return e.person}))),Y=(Object(p.d)((function(e){return e.snTriggerSignin})),Object(p.d)((function(e){return e.snUserSetting}))),W=Object(p.d)((function(e){return e.snTopbarDisplay})),G=Object(p.d)((function(e){return e.snShowDesktopMenu})),J=Object(p.d)((function(e){return e.snPublicHash})),V=Object(p.d)((function(e){return e.snPublicInMemory}));Object(n.useEffect)((function(){var e=localStorage.getItem("darkMode");B("true"===e)}),[]);var Z,X=function(){var e=Object(k.a)(b.a.mark((function e(t){var a,n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("on trigger search"),t.preventDefault(),t.stopPropagation(),null==J){e.next=19;break}if(null!=d&&""!==d.trim()){e.next=11;break}return e.next=7,ua(J);case 7:a=e.sent,o(Ht(ds(a.data,V.addedSkapps,V.deletedSkapps))),e.next=17;break;case 11:return o(Et(!0)),e.next=14,ua(J);case 14:n=e.sent,r=ds(n.data,V.addedSkapps,V.deletedSkapps).filter((function(e){if(!d||""===d.trim())return e;for(var t in e)if(e.hasOwnProperty(t)&&"category"!==t&&null!=e[t]&&e[t].toString().toLowerCase().indexOf(d.toLowerCase())>-1)return e;return""})),o(zt(r));case 17:e.next=20;break;case 19:i.push("/skylinks?query="+encodeURIComponent(d));case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(e){J&&e.preventDefault()};return r.a.createElement(r.a.Fragment,null,W&&r.a.createElement("div",null,r.a.createElement("div",{className:"container-fluid main-container"},r.a.createElement("nav",{className:"navbar navbar-light hdr-nvbr-main ".concat(s.headerBgColorSet)},null!=H&&r.a.createElement(lc.a,{anchor:"left",open:U,onClose:function(){return o(Sr(!1))}},r.a.createElement(Rc,null)),null!=H&&r.a.createElement(F.a,{id:"toggle-menu-icon",className:"menu-button-styling",onClick:function(){return o(Sr(!0))}},r.a.createElement(Kc.a,null)),(null!=H||J)&&r.a.createElement("div",{className:"ribbon"},r.a.createElement("span",null,"ALPHA")),null==H?r.a.createElement("div",{className:"ribbonMiddle"},r.a.createElement("span",null,"ALPHA")):"",r.a.createElement("a",{className:"navbar-brand".concat(" ",null==H?"auth-navi-brand":"navi-brnd"," ").concat(null==H&&"logoAlignMent")},r.a.createElement("img",(t={style:{cursor:"pointer"},onClick:Q,src:"https://skyspaces.io/static/media/SkySpaces_g.531bd028.png",width:"30",height:"30",className:"d-inline-block align-top",alt:"",loading:"lazy"},Object(w.a)(t,"height","40"),Object(w.a)(t,"width","170"),t)),(null!=H||J)&&r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:X,className:s.searchBarForm},r.a.createElement("div",{className:"search_main_div",style:{marginLeft:"auto"}},r.a.createElement("span",null,r.a.createElement("i",{className:"fas fa-search srch-icon-inside-field-input"})),r.a.createElement("input",{className:"form-control mr-sm-2 srch_inpt ".concat(s.searchBarBg),style:{border:"".concat(!0===R?"none":"1px solid lightgray")},type:"search",placeholder:"Search in SkySpaces or download Skylink","aria-label":"Search",onChange:function(e){return m(e.target.value)}}),r.a.createElement("div",{className:"srch_btn_main_div"},r.a.createElement("button",{className:"btn srch_btn_nvbar",type:"button",onClick:function(){console.log("ondownload");try{var e=Object(Zt.parseSkylink)(d);os(e,Y)}catch(t){S(!0)}}},r.a.createElement("label",{for:"hidden-search-inpt"},r.a.createElement("i",{className:"fa fa-download icon_download_nvbar"}))),r.a.createElement("input",{type:"file",id:"hidden-search-inpt"})))))),r.a.createElement("a",{className:"small_logo_nvbrnd"},r.a.createElement("img",(a={style:{cursor:"pointer"},onClick:Q,src:rc.a,width:"30",height:"30",className:" smallLogo_header",alt:"",loading:"lazy"},Object(w.a)(a,"height","35"),Object(w.a)(a,"width","35"),a))),null!=H&&r.a.createElement("div",{className:"srch_btn_out_main_div"},r.a.createElement("button",{className:"btn srch_btn_nvbar"},r.a.createElement("label",{for:"hidden-search-inpt"},r.a.createElement("i",{className:"fa fa-download icon_download_nvbar"}))),r.a.createElement("input",{type:"file",id:"hidden-search-inpt"})),r.a.createElement("div",{className:"btn-icons-nvbr-div",style:{display:"flex",alignItems:"center"}},r.a.createElement("div",{className:"butn-th-main-div"},r.a.createElement("a",{href:"https://skyapps.hns.siasky.net",target:"_blank",rel:"noopener noreferrer"},r.a.createElement(bt.a,{title:"Skynet AppStore",arrow:!0},r.a.createElement(z.a,{className:s.appLogo})))),J&&(Z="Change Portal",r.a.createElement(Ko.a,{className:s.portalFormControl},r.a.createElement(Bc.a,{labelId:"demo-simple-select-label",id:"pulic-share-portal",value:Z,onChange:function(e){return t=e.target.value,void(document.location.href=document.location.href.replace(document.location.origin,new URL(t).origin));var t}},r.a.createElement(Uc.a,{className:"d-none",value:Z},"Change Portal"),document.location.origin.indexOf("localhost")>-1&&r.a.createElement(Uc.a,{value:document.location.origin},document.location.origin),K&&K.portals.map((function(e,t){return r.a.createElement(Uc.a,{key:t,value:e.url},e.name)}))))),G&&null==J&&r.a.createElement(oi,null))))),r.a.createElement(ze.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:g,autoHideDuration:3e3,onClose:function(){return S(!1)},TransitionComponent:"Fade"},r.a.createElement(ii,{onClose:function(){return S(!1)},severity:"error"},"Invalid Skylink ! Please enter valid 46 character skylink to Download.")),r.a.createElement(Is,{open:C,onClose:function(){j(!1)},title:"Public Share Link",type:"public-share",content:I}))}var pi=a(251),ui=a(1294),di=a(811),fi=function(e){var t;return{root:{flexGrow:1},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary},content:(t={},Object(w.a)(t,e.breakpoints.up("sm"),{width:"calc(100% - ".concat(295,"px)"),marginLeft:295}),Object(w.a)(t,"backgroundColor",e.palette.whiteBgColor),Object(w.a)(t,"padding",e.spacing(3)),t),formControl:{width:"100%"},most_main_grid_settings:{padding:"0px",width:"100%",margin:0},main_grid_settings:{margin:"auto"},MaintabsPaper_settings:{paddingTop:"10px",paddingRight:"35px",paddingBottom:"40px",boxShadow:"none",backgroundColor:e.palette.whiteBgColor},tabsPaper_settings:{padding:"0px",boxShadow:"none",backgroundColor:e.palette.whiteBgColor},settings_title:{color:e.palette.linksColor,textAlign:"left",fontWeight:"500",fontSize:"20px",paddingBottom:"30px"},backup_btn_div:{padding:"30px 0px",display:"flex",justifyContent:"flex-end"},backup_btn:{backgroundColor:e.palette.primary.main,"&&&:focus":{outline:"none"},"&&&:hover":{backgroundColor:"darkgreen"}},lable_skylink_inpt_settings:{textAlign:"left",color:"".concat(e.palette.primary.main),fontSize:"12px",fontWeight:"600",paddingBottom:"10px"},skynetPortal_inpt:{width:"90%",textAlign:"left",borderBottom:"1px solid white"},skynetPortal_MI:{color:"".concat(e.palette.primary.main)},save_btn_settings:{"&&&:focus":{outline:"none !important"}}}};var mi={Add:r.a.forwardRef((function(e,t){return r.a.createElement(co.a,Object.assign({},e,{ref:t}))})),Check:r.a.forwardRef((function(e,t){return r.a.createElement(uo.a,Object.assign({},e,{ref:t}))})),Clear:r.a.forwardRef((function(e,t){return r.a.createElement(bo.a,Object.assign({},e,{ref:t}))})),Delete:r.a.forwardRef((function(e,t){return r.a.createElement(_.a,Object.assign({},e,{ref:t}))})),DetailPanel:r.a.forwardRef((function(e,t){return r.a.createElement(yo.a,Object.assign({},e,{ref:t}))})),Edit:r.a.forwardRef((function(e,t){return r.a.createElement(So.a,Object.assign({},e,{ref:t}))})),Export:r.a.forwardRef((function(e,t){return r.a.createElement(Io.a,Object.assign({},e,{ref:t}))})),Filter:r.a.forwardRef((function(e,t){return r.a.createElement(Eo.a,Object.assign({},e,{ref:t}))})),FirstPage:r.a.forwardRef((function(e,t){return r.a.createElement(Oo.a,Object.assign({},e,{ref:t}))})),LastPage:r.a.forwardRef((function(e,t){return r.a.createElement(Co.a,Object.assign({},e,{ref:t}))})),NextPage:r.a.forwardRef((function(e,t){return r.a.createElement(yo.a,Object.assign({},e,{ref:t}))})),PreviousPage:r.a.forwardRef((function(e,t){return r.a.createElement(mo.a,Object.assign({},e,{ref:t}))})),ResetSearch:r.a.forwardRef((function(e,t){return r.a.createElement(bo.a,Object.assign({},e,{ref:t}))})),Search:r.a.forwardRef((function(e,t){return r.a.createElement(No.a,Object.assign({},e,{ref:t}))})),SortArrow:r.a.forwardRef((function(e,t){return r.a.createElement(lo.a,Object.assign({},e,{ref:t}))})),ThirdStateCheck:r.a.forwardRef((function(e,t){return r.a.createElement(_o.a,Object.assign({},e,{ref:t}))})),ViewColumn:r.a.forwardRef((function(e,t){return r.a.createElement(Po.a,Object.assign({},e,{ref:t}))}))},hi=fi,yi=Object(pi.a)({palette:{primary:{main:"#4caf50"},secondary:{main:"#ff9100"},info:{main:"#4caf50"}}});function gi(e){return r.a.createElement(ms.a,Object.assign({elevation:6,variant:"filled"},e))}var bi=function(e){Object(x.a)(a,e);var t=Object(O.a)(a);function a(e){var n;return Object(S.a)(this,a),(n=t.call(this,e)).closeSaveAlertMsg=function(){n.setState({saveAlertMsg:!1,alertMessage:null})},n.updatePortalData=function(){var e=Object(k.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.props.setLoaderDisplay(!0),(a=n.props.snPortalsList).portals=t,ln(n.props.userSession,a).then((function(e){n.props.setLoaderDisplay(!1),n.props.fetchPortalsListAction()}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handlePortalURLChange=function(){var e=Object(k.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.props.setLoaderDisplay(!0),(a=n.state.userSetting).setting.portal=t,n.setState({userSetting:a}),e.next=6,rn(n.props.userSession,n.state.userSetting);case 6:n.props.setUserSettingAction(n.state.userSetting),n.props.setLoaderDisplay(!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handlePortalChange=function(e){console.log(e.target.type);var t=n.state.userSetting;t.setting.portal=e.target.value,n.setState({userSetting:t})},n.handleDataSyncPrefChange=function(e){console.log(e.target.type);var t=n.state.userSetting;t.setting.dataSyncPref=e.target.value,n.setState({userSetting:t})},n.handleSave=function(){var e=Object(k.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.props.setLoaderDisplay(!0),e.next=3,rn(n.props.userSession,n.state.userSetting);case 3:n.props.setUserSettingAction(n.state.userSetting),n.props.setLoaderDisplay(!1),null!=t&&t.hideAlert||n.setState({saveAlertMsg:!0});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.loadUserSetting=Object(k.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nn(n.props.userSession);case 2:t=e.sent,n.props.fetchPortalsListAction(),n.setState({userSetting:t});case 5:case"end":return e.stop()}}),e)}))),n.createBackup=function(){var e=Object(k.a)(b.a.mark((function e(t){var a,r,s,o,c,i,l,p,u,d;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.props.setLoaderDisplay(!0),e.next=3,nn(n.props.userSession);case 3:return s=e.sent,n.setState({userSetting:s}),o=(null===(a=n.state.userSetting)||void 0===a||null===(r=a.setting)||void 0===r?void 0:r.portal)||me,e.next=8,pn(n.props.userSession,o);case 8:return c=e.sent,e.next=11,new Zt.SkynetClient(o).uploadFile(c);case 11:return i=e.sent,console.log("before HNS"),e.next=15,Object(di.a)("home.skapp",c,!1,{});case 15:return e.sent,console.log("After HNS"),l=(new Date).toString(),p={timestamp:l,name:"Backup_"+Zr()(l).format("MM/DD/YYYY h:mm a"),skylink:Object(Zt.parseSkylink)(i)},u=n.state.userSetting,(d=u.setting.backupList||[]).unshift(p),u.setting.backupList=d,n.setState({userSetting:u}),e.next=26,rn(n.props.userSession,u);case 26:n.props.setLoaderDisplay(!1);case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.copyToClipboard=function(e){navigator.clipboard.writeText(e)},n.handleHnsChange=function(e){var t=e.target.name,a=n.state.userSetting.setting.hnsconfig;(a=a||{})[t]=e.target.value;var r=n.state.userSetting;r.setting.hnsconfig=a,n.setState({userSetting:r})},n.handleHnsSave=Object(k.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.handleSave({hideAlert:!0});case 1:case"end":return e.stop()}}),e)}))),n.validateHnsConfig=function(){var e,t,a,r,s,o,c,i,l,p,u,d,f,m,h,y,g=n.state.userSetting;return!(null==(null===g||void 0===g||null===(e=g.setting)||void 0===e||null===(t=e.hnsconfig)||void 0===t?void 0:t.domain)||""===(null===g||void 0===g||null===(a=g.setting)||void 0===a||null===(r=a.hnsconfig)||void 0===r?void 0:r.domain.trim())||null==(null===g||void 0===g||null===(s=g.setting)||void 0===s||null===(o=s.hnsconfig)||void 0===o?void 0:o.apikey)||""===(null===g||void 0===g||null===(c=g.setting)||void 0===c||null===(i=c.hnsconfig)||void 0===i?void 0:i.apikey.trim())||null==(null===g||void 0===g||null===(l=g.setting)||void 0===l||null===(p=l.hnsconfig)||void 0===p?void 0:p.apisecret)||""===(null===g||void 0===g||null===(u=g.setting)||void 0===u||null===(d=u.hnsconfig)||void 0===d?void 0:d.apisecret.trim())||null==(null===g||void 0===g||null===(f=g.setting)||void 0===f||null===(m=f.hnsconfig)||void 0===m?void 0:m.hnsgateway)||""===(null===g||void 0===g||null===(h=g.setting)||void 0===h||null===(y=h.hnsconfig)||void 0===y?void 0:y.hnsgateway.trim()))},n.restoreBackup=function(){var e=Object(k.a)(b.a.mark((function e(t){var a,r,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.props.setLoaderDisplay(!0),a=t.skylink,r=ss(a,n.state.userSetting),e.next=5,un(n.props.userSession,r);case 5:return s=e.sent,e.prev=6,e.next=9,dn(n.props.userSession,s);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(6),console.error("backup restored with error",e.t0);case 14:return n.props.fetchSkyspaceList(),n.props.fetchSkyspaceAppCount(),e.next=18,n.loadUserSetting();case 18:n.props.setLoaderDisplay(!1),n.setState({saveAlertMsg:!0,alertMessage:"Skyspace successfully restored with selected backup! Please re-login if changes do not reflect!"});case 20:case"end":return e.stop()}}),e,null,[[6,11]])})));return function(t){return e.apply(this,arguments)}}(),n.confirmRestoreBackup=function(e){n.setState({backupRowData:e,showConfModal:!0})},n.state={saveAlertMsg:!1,showConfModal:!1,userSetting:null,showInfoModal:!1,backupRowData:null,alertMessage:null,dataSyncPrefList:cn(),columns:[{title:"Portal Name",field:"name"},{title:"Portal URL",field:"url"},{title:"Portal Type",field:"type",lookup:{Public:"Public",Private:"Private"}}],selectedRow:null,backup:{data:[],columns:[{title:"Name",field:"name"},{title:"Skylink",field:"skylink",render:function(e){return r.a.createElement(r.a.Fragment,null,e.skylink,r.a.createElement(bt.a,{title:"Copy Skylink to clipboard",arrow:!0,onClick:function(){return n.copyToClipboard(e.skylink)}},r.a.createElement(_s.a,{className:"cursor-pointer",style:{color:ue}})))},editable:"never"}]}},n}return Object(v.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.setLoaderDisplay(!0),this.setState({dataSyncPrefList:cn()}),this.loadUserSetting().then((function(){return e.props.setLoaderDisplay(!1)})),console.log("dataSyncPrefList = "+this.state.dataSyncPrefList)}},{key:"render",value:function(){var e,t,a=this,n=this.props,s=n.classes,o=n.snPortalsList,c=this.state,i=c.userSetting,l=c.columns,p=c.dataSyncPrefList;return console.log("dataSyncPrefList"+p.length),r.a.createElement(ui.a,{theme:yi},r.a.createElement("main",{className:s.content},r.a.createElement(U.a,{container:!0,spacing:3,className:s.most_main_grid_settings,style:{paddingTop:"50px"}},r.a.createElement(U.a,{item:!0,xs:12,className:s.main_grid_settings},r.a.createElement(Ar.a,{className:"".concat(s.paper," ").concat(s.MaintabsPaper_settings)},r.a.createElement(Ar.a,{className:s.tabsPaper_settings},r.a.createElement(U.a,{container:!0,spacing:3,style:{paddingBottom:"10px"}},r.a.createElement(U.a,{item:!0,xs:12},r.a.createElement(kt.a,{className:s.settings_title},"Settings")),r.a.createElement(U.a,{item:!0,xs:10,className:"select-grid"},r.a.createElement(Ko.a,{className:s.formControl},r.a.createElement(zo.a,{id:"datasyncpref-label"},"Select Data Sync Preference"),null!=i&&r.a.createElement(Bc.a,{labelId:"datasyncpref-label",id:"datasyncprefList",fullWidth:!0,name:"datasyncprefList",value:null===(e=i.setting)||void 0===e?void 0:e.dataSyncPref,onChange:this.handleDataSyncPrefChange},p&&p.map((function(e,t){return r.a.createElement(Uc.a,{key:t,value:e.name},e.name)}))),r.a.createElement(Yo.a,null))),r.a.createElement(U.a,{item:!0,xs:2,sm:2},r.a.createElement(te.a,{variant:"contained",color:"primary",className:"btn-register-pg float-center",type:"button",onClick:this.handleSave,startIcon:r.a.createElement(Xo.a,null)},"Save")),r.a.createElement(U.a,{item:!0,xs:10,className:"select-grid"},r.a.createElement(Ko.a,{className:s.formControl},r.a.createElement(zo.a,{id:"portal-label"},"Select a default Skynet portal"),null!=i&&r.a.createElement(Bc.a,{labelId:"portal-label",id:"portalList",fullWidth:!0,name:"portalList",value:null===(t=i.setting)||void 0===t?void 0:t.portal,onChange:this.handlePortalChange},o&&o.portals.map((function(e,t){return r.a.createElement(Uc.a,{key:t,value:e.url},e.url)}))),r.a.createElement(Yo.a,null))),r.a.createElement(U.a,{item:!0,xs:2,sm:2},r.a.createElement(te.a,{variant:"contained",color:"primary",className:"btn-register-pg float-center",type:"button",onClick:this.handleSave,startIcon:r.a.createElement(Xo.a,null)},"Save")),r.a.createElement(U.a,{item:!0,xs:12},r.a.createElement(so.a,{icons:mi,title:"Skynet Portals",columns:l,data:(this.props.snPortalsList?this.props.snPortalsList.portals:[]).filter((function(e){return null!=e})),options:{actionsColumnIndex:-1},editable:{onRowAdd:function(e){return console.log("row added"),new Promise((function(t,n){setTimeout((function(){a.updatePortalData([].concat(Object(y.a)(o.portals),[e])),t()}),1e3)}))},onRowUpdate:function(e,t){return new Promise((function(n,r){setTimeout((function(){var r=Object(y.a)(o.portals);r[t.tableData.id]=e,a.updatePortalData(Object(y.a)(r)),t.url===i.setting.portal&&a.handlePortalURLChange(e.url),n()}),1e3)}))},onRowDelete:function(e){return new Promise((function(t,n){setTimeout((function(){if(e.url===i.setting.portal)alert(e.url+" is default skynet portal for SkySpaces. Please change default portal and try. ");else{var n=Object(y.a)(o.portals),r=e.tableData.id;n.splice(r,1),a.updatePortalData(Object(y.a)(n))}t()}),1e3)}))}}}))))))),r.a.createElement("div",null,r.a.createElement(Zs,null))),r.a.createElement(ze.a,{open:this.state.saveAlertMsg,autoHideDuration:4e3,onClose:this.closeSaveAlertMsg},r.a.createElement(gi,{onClose:this.closeSaveAlertMsg,severity:"success"},null!=this.state.alertMessage?this.state.alertMessage:"Default Skynet Protal is successfully changed to "+(i&&i.setting.portal))),r.a.createElement(Is,{open:this.state.showInfoModal,onClose:function(){return a.setState({showInfoModal:!1})},title:"Backup Error",content:"Please provide HNS configuration before creating backup."}),r.a.createElement(re,{open:this.state.showConfModal,onYes:function(){a.setState({showConfModal:!1}),a.restoreBackup(a.state.backupRowData)},onNo:function(){return a.setState({showConfModal:!1})},title:"Warning!",content:"This action will permanently revert your Skyspace to the selected restore point. Do you want to continue?"}))}}]),a}(r.a.Component),ki=Object(ht.a)(hi)(Object(p.b)((function(e){return{isShowing:e.snLoader,skyapp:e.snAppDetail,userSession:e.userSession,person:e.person,snSkyspaceList:e.snSkyspaceList,snPortalsList:e.snPortalsList,snInfoModalState:e.snInfoModalState,snAppSkyspaces:e.snAppSkyspaceList,snAppSkyspacesToChange:JSON.parse(JSON.stringify(e.snAppSkyspaceList))}}),(function(e){return Object(_t.bindActionCreators)({setLoaderDisplay:Et,fetchAppDetail:Ln,fetchSkyspaceAppDetail:Pn,fetchEmptyApp:Dn,createSkapp:Bn,setInfoModalState:Tn,setAppSkyspces:Nn,setUserSettingAction:Fn,setPortalsListAction:Zn,fetchPortalsListAction:Xn,fetchSkyspaceList:Hn,fetchSkyspaceAppCount:cr},e)}))(bi)),Si=Object(jr.a)((function(e){var t;return{root:{flexGrow:1},content:(t={},Object(w.a)(t,e.breakpoints.up("sm"),{width:"calc(100% - ".concat(295,"px)"),marginLeft:295}),Object(w.a)(t,"backgroundColor",e.palette.whiteBgColor),Object(w.a)(t,"padding",e.spacing(3)),t),paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary},most_main_grid_uc:{padding:"60px 0px 0px 0px",width:"100%",margin:0},main_grid_uc:{margin:"auto"},contentBgColor:{backgroundColor:e.palette.whiteBgColor},MaintabsPaper_uc:{backgroundColor:e.palette.headerBgColor,paddingTop:"25px",paddingRight:"35px",paddingBottom:"40px",boxShadow:"0 0 10px rgba(0,0,0,.4)",borderRadius:"10px"},tabsPaper_uc:{padding:"0px",boxShadow:"none",backgroundColor:e.palette.headerBgColor},uc_title:{color:e.palette.linksColor,textAlign:"left",fontSize:"17px",fontWeight:"500"},tags_inpt_main_grid:{padding:"20px 0px"},show_img_title_grid:{width:"100%",marginTop:"25px",marginLeft:"15px",padding:"3px 10px !important",borderRadius:"5px",display:"flex",border:"1px solid ".concat(e.palette.secondary.textColor)},descIcon:{color:e.palette.primary.main,fontSize:"18px",position:"relative",bottom:"2px",marginRight:"10px"},img_name_txt:{fontSize:"12px",color:e.palette.secondary.textColor,position:"relative",top:"3px"}}})),vi=a(823),Ei=a.n(vi),xi=a(827),Oi=a(335),wi=a(1282),Ci=a(1299),ji=a(436),_i=a.n(ji),Ai=a(336);function Ii(){var e=Object(Oi.a)(['\n  width: 300px;\n  margin: 2px 0 0;\n  padding: 0;\n  position: absolute;\n  list-style: none;\n  background-color: #fff;\n  overflow: auto;\n  max-height: 250px;\n  border-radius: 4px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\n  z-index: 1;\n\n  & li {\n    padding: 5px 12px;\n    display: flex;\n\n    & span {\n      flex-grow: 1;\n    }\n\n    & svg {\n      color: transparent;\n    }\n  }\n\n  & li[aria-selected="true"] {\n    background-color: #fafafa;\n    font-weight: 600;\n\n    & svg {\n      color: #1890ff;\n    }\n  }\n\n  & li[data-focus="true"] {\n    background-color: #e6f7ff;\n    cursor: pointer;\n\n    & svg {\n      color: #000;\n    }\n  }\n']);return Ii=function(){return e},e}function Ti(){var e=Object(Oi.a)(["\ndisplay: flex;\nalign-items: center;\nheight: 24px;\nmargin: 2px;\nline-height: 22px;\nbackground-color: #fafafa;\nborder: 1px solid #e8e8e8;\nborder-radius: 2px;\nbox-sizing: content-box;\npadding: 0 4px 0 10px;\noutline: 0;\noverflow: hidden;\n\n&:focus {\n  border-color: #40a9ff;\n  background-color: #e6f7ff;\n}\n\n& span {\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n\n& svg {\n  font-size: 12px;\n  cursor: pointer;\n  padding: 4px;\n}\n"]);return Ti=function(){return e},e}function Ni(){var e=Object(Oi.a)(["\n  width: 300px;\n  border: 1px solid #d9d9d9;\n  background-color: #fff;\n  border-radius: 4px;\n  padding: 1px;\n  display: flex;\n  flex-wrap: wrap;\n\n  &:hover {\n    border-color: #40a9ff;\n  }\n\n  &.focused {\n    border-color: #40a9ff;\n    box-shadow: 0 0 0 2px rgba(24, 144, 255, 0.2);\n  }\n\n  & input {\n    font-size: 14px;\n    height: 30px;\n    box-sizing: border-box;\n    padding: 4px 6px;\n    width: 0;\n    min-width: 30px;\n    flex-grow: 1;\n    border: 0;\n    margin: 0;\n    outline: 0;\n  }\n"]);return Ni=function(){return e},e}function Li(){var e=Object(Oi.a)(["\n  padding: 0 0 4px;\n  line-height: 1.5;\n  display: block;\n"]);return Li=function(){return e},e}Object(Ai.a)("label")(Li());var Pi=Object(Ai.a)("div")(Ni()),Di=Object(Ai.a)((function(e){var t=e.label,a=e.onDelete,n=Object(xi.a)(e,["label","onDelete"]);return r.a.createElement("div",n,r.a.createElement("span",null,t),r.a.createElement(_i.a,{onClick:a}))}))(Ti()),Mi=Object(Ai.a)("ul")(Ii());function Ri(e){var t=Object(Xs.a)(),a=Object(wi.a)({id:"customized-hook-demo",defaultValue:e.defaultValue?[e.defaultValue]:[],multiple:!0,options:e.list,getOptionLabel:function(e){return e}}),s=a.getRootProps,o=(a.getInputLabelProps,a.getInputProps),c=a.getTagProps,i=a.getListboxProps,l=a.getOptionProps,p=a.groupedOptions,u=a.value,d=a.focused,f=a.setAnchorEl;return Object(n.useEffect)((function(){e.onChange&&e.onChange(u)}),[u]),r.a.createElement(Ci.a,null,r.a.createElement("div",{className:"AF_main_div"},r.a.createElement("div",s(),r.a.createElement(Pi,{ref:f,className:d?"focused":"",style:{borderRadius:"100px",width:"100%",padding:"5px 10px",backgroundColor:t.palette.headerBgColor}},u.map((function(t,a){return r.a.createElement(Di,Object.assign({label:e.titleKey?t[e.titleKey]:t},c({index:a}),{style:{background:"#DAFDE7",color:"#636f70",fontSize:"10px",borderRadius:"50px"}}))})),r.a.createElement("input",Object.assign({},o(),{placeholder:"Select Spaces",style:{borderRadius:"100px",backgroundColor:t.palette.headerBgColor,color:t.palette.linksColor}})))),p.length>0?r.a.createElement(Mi,i(),p.map((function(t,a){return r.a.createElement("li",l({option:t,index:a}),r.a.createElement("span",null,e.labelKey?t[e.labelKey]:t),r.a.createElement(uo.a,{fontSize:"small"}))}))):null))}var Bi=a(822),Ui=a.n(Bi),Fi=a(1246),Ki=a(441);a(1223);var zi=function(e){return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"c2-main-div"},r.a.createElement("div",{className:"icon-c2-main-div"},r.a.createElement("svg",{width:"3em",height:"3em",viewBox:"0 0 16 16",class:"bi bi-exclamation-circle",fill:"rgb(235, 42, 42)",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{"fill-rule":"evenodd",d:"M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"}),r.a.createElement("path",{d:"M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z"}))),r.a.createElement("div",{className:"desc-c2-div"},"Content Uploaded using SkySpaces is not encrypted yet. (Its work in-progress feature)")))};function Hi(e){return r.a.createElement(ms.a,Object.assign({elevation:6,variant:"filled"},e))}function Yi(e){var t=Object(p.c)(),a=new URLSearchParams(Object(f.h)().search),s=Object(Fi.a)("(min-width:950px)"),o=Si(),i=Object(n.useState)(It()),l=Object(c.a)(i,1)[0],u=Object(n.useState)([]),d=Object(c.a)(u,2),m=d[0],y=d[1],g=Object(n.useState)(!1),S=Object(c.a)(g,2),v=S[0],E=S[1],x=Object(n.useState)([]),O=Object(c.a)(x,2),w=O[0],C=O[1],j=Object(n.useState)([]),_=Object(c.a)(j,2),A=(_[0],_[1],Object(n.useState)(!1)),I=Object(c.a)(A,2),T=I[0],N=I[1],L=Object(n.useState)(!1),P=Object(c.a)(L,2),D=P[0],M=P[1],R=Object(n.useState)(""),B=Object(c.a)(R,2),F=B[0],K=(B[1],Object(n.useState)("success")),z=Object(c.a)(K,2),H=z[0],Y=(z[1],r.a.useState({checkedA:!1,checkedB:!0})),W=Object(c.a)(Y,2),G=(W[0],W[1],r.a.useState("")),J=Object(c.a)(G,2),V=(J[0],J[1]),Z=Object(n.createRef)(),X=Object(n.createRef)(),Q=Object(p.d)((function(e){return e.userSession})),q=Object(p.d)((function(e){return e.snSkyspaceList})),$=Object(p.d)((function(e){return e.person})),ee=Object(p.d)((function(e){return e.snUploadList})),te=(Object(p.d)((function(e){return e.snUserSetting})),At());Object(n.useEffect)((function(){ae()}),[$]),Object(n.useEffect)((function(){ae()}),[a.get("sharedhash")]),Object(n.useEffect)((function(){ae()}),[]);var ae=function(){null!=$&&(null!=a.get("sharedhash")&&N(!0))},ne=function(){var e=Object(k.a)(b.a.mark((function e(a){var n,r,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!$){e.next=21;break}return(n=Object(h.a)(Object(h.a)({},At()),a)).tags=m,n.skyspaceList=w,us(n.contentType,n),e.next=7,Ra(Q,n,$);case 7:if(r=e.sent,e.t0=w&&w.length>0,!e.t0){e.next=12;break}return e.next=12,Ja(Q,r,w);case 12:return t(cr()),(s=Object(h.a)(Object(h.a)({},{skylink:"",fileName:"",contentLength:"",contentType:"",httpMetadata:"",action:"",skhubId:"",skyspaces:[],savedToSkySpaces:!1}),n)).fileName=n.name,s.action="Upload",s.skyspaces=n.skyspaceList,s.savedToSkySpaces=w&&w.length>0,s.skhubId=r,e.next=21,en(Q,s);case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re=function(){var e=Object(k.a)(b.a.mark((function e(n){var r,s,o,c,i,l;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N(!1),t(Et(!0)),s=n.filter((function(e){return!q.includes(e)})),e.next=5,ua(a.get("sharedhash"));case 5:return o=e.sent,c=[],i=[],null===o||void 0===o||null===(r=o.data)||void 0===r?void 0:r.map((function(e){e.skhubId=null,c.push(Da(Q,e,$).then((function(e){return i.push(e)})))})),s&&s.length>0&&c.push(Ka(Q,s)),e.next=12,Promise.all(c);case 12:return c.length=0,(l={skylink:"",fileName:"",contentLength:"",contentType:"",httpMetadata:"",action:"",skhubId:"",skyspaces:[],savedToSkySpaces:!1}).fileName="NA",l.action="Public Import",l.skyspaces=n.join(", "),l.savedToSkySpaces=n&&n.length>0,l.skylink=a.get("sharedhash"),c.push(en(Q,l)),c.push(Ma(Q,i)),c.push(Ja(Q,i,n)),e.next=24,Promise.all(c);case 24:t(Et(!1)),t(Hn()),t(cr());case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("main",{className:s?o.content:o.contentBgColor},r.a.createElement("div",{style:{paddingTop:40,minHeight:"calc(100vh - 70px)"}},r.a.createElement(U.a,{container:!0,spacing:3,className:o.most_main_grid_uc},r.a.createElement(zi,null),r.a.createElement(U.a,{item:!0,xs:12,className:o.main_grid_uc},r.a.createElement(Ar.a,{className:"".concat(o.paper," ").concat(o.MaintabsPaper_uc)},r.a.createElement(Ar.a,{className:o.tabsPaper_uc},r.a.createElement(kt.a,{className:o.uc_title},"Upload Files/Folders to your Space"),r.a.createElement(U.a,{container:!0,spacing:3,className:o.tags_inpt_main_grid},r.a.createElement(U.a,{item:!0,lg:5,md:5,sm:5,xs:12,style:{padding:"none"}},q&&r.a.createElement(Ri,{list:q,onChange:C})),$&&r.a.createElement(U.a,{item:!0,lg:5,md:5,sm:5,xs:12,className:"select-grid"},r.a.createElement(Ko.a,{className:o.formControl,error:l.tags},r.a.createElement(Go.a,{defaultValue:te.tags,onChange:y}),r.a.createElement(Yo.a,null,"Add Tags"))),r.a.createElement(U.a,{item:!0,xs:2},r.a.createElement(Cs.a,{onChange:function(e){E(e.target.checked)},name:"checkedA",color:"default",inputProps:{"aria-label":"secondary checkbox"}}))),r.a.createElement(U.a,{container:!0,spacing:3,className:"drpZone_main_grid"},r.a.createElement(U.a,{item:!0,xs:12},r.a.createElement("div",null,r.a.createElement(xs,{name:"files",ref:Z,directoryMode:v,onUpload:ne})),r.a.createElement("div",{className:"d-none"},r.a.createElement(Ki.a,{showPreviewsInDropzone:!1,onDrop:function(e){Z.current.handleDrop(e)},Icon:"none",inputProps:{webkitdirectory:!0,mozdirectory:!0},ref:X,webkitdirectory:!0,mozdirectory:!0,maxFileSize:21e7,onDelete:function(){V("")},filesLimit:100,showAlerts:!1,dropzoneText:r.a.createElement("div",{style:{paddingTop:"20px",paddingBottom:"20px"}},r.a.createElement("div",null,r.a.createElement(Le.a,{style:{fontSize:"55px",color:"#c5c5c5",marginBottom:"10px"}})),r.a.createElement("span",{style:{fontSize:14,fontWeight:"bold",color:"#c5c5c5"}},"Drop a ",v?"directory":"file"," here or",r.a.createElement("span",{style:{color:"#1ed660",marginLeft:"3px"}},"click here to upload")))})))),ee&&ee.length>0&&ee.map((function(e){var t;return r.a.createElement(U.a,{container:!0,spacing:3},r.a.createElement(U.a,{item:!0,xs:12,className:o.show_img_title_grid},r.a.createElement("span",null,r.a.createElement(Ui.a,{className:o.descIcon})),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",width:"100%"}},r.a.createElement("div",null,r.a.createElement(kt.a,{className:o.img_name_txt},null===e||void 0===e||null===(t=e.file)||void 0===t?void 0:t.path),(null===e||void 0===e?void 0:e.status)&&"complete"===(null===e||void 0===e?void 0:e.status)&&r.a.createElement(kt.a,{className:o.img_name_txt},"Skylink: ",null===e||void 0===e?void 0:e.url),(null===e||void 0===e?void 0:e.status)&&"complete"!==(null===e||void 0===e?void 0:e.status)&&r.a.createElement(kt.a,{className:o.img_name_txt},null===e||void 0===e?void 0:e.status.toUpperCase()," ","uploading"===(null===e||void 0===e?void 0:e.status)&&!isNaN(e.progress)&&"".concat(Math.trunc(100*e.progress)," %"))),r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},"complete"===(null===e||void 0===e?void 0:e.status)&&r.a.createElement(Ei.a,{style:{fontSize:"18px",color:"#1ed660",cursor:"pointer"},onClick:function(){return t=null===e||void 0===e?void 0:e.url,void navigator.clipboard.writeText(t);var t}})))))}))))))),r.a.createElement(ze.a,{open:D,autoHideDuration:4e3,onClose:function(){return M(!1)}},r.a.createElement(Hi,{onClose:function(){return M(!1)},severity:H||"success"},F)),r.a.createElement(Cr,{userSession:Q,title:"Import Into Existing Space Or Add To New Space",open:T,disableBackdropClick:!0,disableEscapeKeyDown:!0,availableSkyspaces:q,showAddSkyspace:!0,onClose:function(){return N(!1)},onSave:re}),r.a.createElement("div",null,r.a.createElement(Zs,null)))}var Wi=a(747),Gi=a(825),Ji=a.n(Gi),Vi=a(1307),Zi=function(e){return{root:{flexGrow:1},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary},most_main_grid_auth:{padding:"60px 0px 0px 0px",width:"100%",margin:"0px"},main_grid_auth:{margin:"auto"},MaintabsPaper:{padding:"0px",boxShadow:"0 0 10px rgba(0,0,0,.4)"},tabsPaper:{padding:"0px",boxShadow:"none"},margin:{margin:e.spacing(1)},mail_textfield:{border:"3px solid ".concat(e.palette.mediumGray),marginTop:"40px",BorderBottom:"none",padding:"2px 10px",borderRadius:"8px",width:"63%"},underline:{"&&&:before":{borderBottom:"none"},"&&:after":{borderBottom:"none"}},password_textfield:{border:"3px solid ".concat(e.palette.mediumGray),BorderBottom:"none",padding:"3px 10px",borderRadius:"8px",width:"63%"},butn_tab1:{width:"50%",fontWeight:"700",fontFamily:"Arial, Helvetica, sans-serif",padding:"20px 0px","&:focus":{outline:"none"}},txt_span_frgt_pass:{fontSize:"12px",position:"relative",left:"82px",bottom:"8px",fontWeight:"500",color:"".concat(e.palette.primary.main)},butn_login:{width:"100%",background:"".concat(e.palette.primary.main),color:"white",fontWeight:"600",fontSize:"17px",marginTop:"20px",marginBottom:"40px","&&&:focus":{outline:"none"}},description_auth:{paddingTop:"35px !important",color:"darkgray",margin:"auto",textAlign:"center",fontSize:"13px",fontFamily:"Arial, Helvetica, sans-serif"}}};var Xi=a(824);"idtest.local"==window.location.hostname||"localhost"==window.location.hostname||window.location.protocol;var Qi=function(e){Object(x.a)(a,e);var t=Object(O.a)(a);function a(e){var n;return Object(S.a)(this,a),(n=t.call(this,e)).handleSeedChange=function(e){n.setState({seed:e.target.value})},n.initializeSkyId=function(e){n.setState({skyid:new Xi.a("SkySpaces",n.skyidEventCallback,e)})},n.loginSkyID=Object(k.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.state.skyid.sessionStart(),n.props.setLoaderDisplay(!0);case 2:case"end":return e.stop()}}),e)}))),n.login=Object(k.a)(b.a.mark((function e(){var t,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.state.seed&&n.state.seed.trim().length>0)){e.next=15;break}return t={username:n.state.seed,profile:{decentralizedID:n.state.seed}},n.props.setLoaderDisplay(!0),a={skydbseed:n.state.seed},n.props.setUserSession(a),n.props.setPersonGetOtherData(t),e.t0=n.props,e.next=9,En(a);case 9:e.t1=e.sent,e.t0.setImportedSpace.call(e.t0,e.t1),n.props.setLoaderDisplay(!1),n.props.history.push("/upload"+n.props.location.search),e.next=16;break;case 15:console.log("no seed");case 16:case"end":return e.stop()}}),e)}))),n.handleChange=function(e,t){n.setState({value:t})},n.state={seed:null,value:1,isTemp:!0,skyid:null},n.onSkyIdSuccess=n.onSkyIdSuccess.bind(Object(E.a)(n)),n.skyidEventCallback=n.skyidEventCallback.bind(Object(E.a)(n)),n}return Object(v.a)(a,[{key:"componentDidMount",value:function(){this.initializeSkyId({devMode:!1}),!1===this.props.showDesktopMenu&&this.props.setDesktopMenuState(!0),this.props.person&&this.props.history.push("/upload")}},{key:"componentDidUpdate",value:function(){this.props.person&&this.props.history.push("/upload")}},{key:"skyidEventCallback",value:function(e){switch(e){case"login_fail":console.log("Login failed"),this.props.setLoaderDisplay(!1);break;case"login_success":console.log("Login succeed!"),this.onSkyIdSuccess(e);break;case"destroy":console.log("Logout succeed!"),this.props.setLoaderDisplay(!1);break;default:console.log(e),this.props.setLoaderDisplay(!1)}}},{key:"onSkyIdSuccess",value:function(){var e=Object(k.a)(b.a.mark((function e(t){var a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={idp:"SKYID",skyid:this.state.skyid},e.next=4,sn(a);case 4:return n=e.sent,a=Object(h.a)(Object(h.a)({},a),{},{person:n}),this.props.setUserSession(a),e.next=9,La(a);case 9:if(e.sent){e.next=13;break}return e.next=13,Pa(a);case 13:return this.props.setPersonGetOtherData(n),e.t0=this.props,e.next=17,En(a);case 17:e.t1=e.sent,e.t0.setImportedSpace.call(e.t0,e.t1),this.props.setLoaderDisplay(!1),this.props.history.push("/upload"+this.props.location.search),e.next=27;break;case 23:e.prev=23,e.t2=e.catch(0),console.log("Error during login process. login failed"),this.props.setLoaderDisplay(!1);case 27:case"end":return e.stop()}}),e,this,[[0,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.classes,t=this.state.value;return r.a.createElement("div",{style:{paddingTop:100}},r.a.createElement(zi,null),r.a.createElement(U.a,{container:!0,spacing:3,className:"most_main_grid_auth ".concat(e.most_main_grid_auth)},r.a.createElement(U.a,{item:!0,lg:4,md:5,sm:7,xs:12,className:e.main_grid_auth},r.a.createElement(Ar.a,{className:"".concat(e.paper," ").concat(e.MaintabsPaper)},r.a.createElement(U.a,{container:!0,spacing:3,className:"inpt-mail-pass-main-grid"},0===t?r.a.createElement(U.a,{item:!0,lg:12,className:e.mail_inpt_grid},r.a.createElement("div",null,r.a.createElement(ur.a,{className:"".concat(e.margin," ").concat(e.mail_textfield),id:"input-with-icon-textfield",placeholder:"Username or Email",InputProps:{startAdornment:r.a.createElement(Wi.a,{position:"start"},r.a.createElement(Vi.a,{style:{content:"none",color:"lightGray"}}))}}),r.a.createElement(ur.a,{className:"".concat(e.margin," ").concat(e.password_textfield),id:"input-with-icon-textfield",placeholder:"Password",InputProps:{startAdornment:r.a.createElement(Wi.a,{position:"start",style:{content:"none",color:"lightGray"}},r.a.createElement(Ji.a,null))}})),r.a.createElement(kt.a,{variant:"span",className:e.txt_span_frgt_pass},"Forgot Your Password?"),r.a.createElement(U.a,{container:!0,spacing:3},r.a.createElement(U.a,{item:!0,xs:8,style:{margin:"auto"}},r.a.createElement(te.a,{variant:"contained",className:e.butn_login,onClick:function(){return console.log("history.push dashboard")}},"Sign up")))):r.a.createElement(U.a,{item:!0,lg:12,className:e.mail_inpt_grid,style:{margin:"auto"}},r.a.createElement("div",null,r.a.createElement(kt.a,{style:{color:"#1DD65F",fontWeight:"600",fontSize:30}},"Own Your Space"),r.a.createElement(ur.a,{className:"".concat(e.margin," ").concat(e.password_textfield," d-none"),id:"input-with-icon-textfield",placeholder:"Password",InputProps:{startAdornment:r.a.createElement(Wi.a,{position:"start",style:{content:"none",color:"lightGray"}},r.a.createElement(Vi.a,null))}})),r.a.createElement(kt.a,{variant:"span",className:(e.txt_span_frgt_pass,"d-none")},"Forgot Your Password?"),r.a.createElement(U.a,{container:!0,spacing:3},r.a.createElement(U.a,{item:!0,lg:8,xs:12,style:{margin:"auto"}},r.a.createElement(te.a,{variant:"contained",className:e.butn_login,onClick:this.loginSkyID},"Login using SkyID")))))),r.a.createElement(U.a,{container:!0,spacing:3},r.a.createElement(U.a,{item:!0,xs:12,className:e.description_auth},r.a.createElement("span",{style:{fontWeight:"400"}},"Note: This update of SkySpaces introduces breaking changes,",r.a.createElement("br",null),"Old version of app is available at - ",r.a.createElement(jt.a,{rel:"noopener noreferrer",target:"_blank",href:"https://skyspaces.io"},"https://skyspaces.io"),r.a.createElement("br",null),"We will provide in-app data migration option soon...",r.a.createElement("br",null)))),r.a.createElement(U.a,{container:!0,spacing:3},r.a.createElement(U.a,{item:!0,xs:12,className:e.description_auth},"Registring to SkySpaces,you accept our"," ",r.a.createElement("span",{style:{color:"#1DD65F",fontWeight:"600"}},r.a.createElement(jt.a,{rel:"noopener noreferrer",target:"_blank",href:"https://skyspace.hns.siasky.net/skapp/SkySpaces-Terms.pdf"},"Terms of use"))," ","and our"," ",r.a.createElement("span",{style:{color:"#1DD65F",fontWeight:"600"}},r.a.createElement(jt.a,{rel:"noopener noreferrer",target:"_blank",href:"https://skyspace.hns.siasky.net/skapp/SkySpaces-Privacy Notice.pdf"},"Privacy policy")),r.a.createElement("br",null),r.a.createElement("span",null,r.a.createElement(jt.a,{rel:"noopener noreferrer",target:"_blank",href:"mailto:hello@skyspaces.io"},r.a.createElement("span",{class:"fa fa-envelope"})," hello@skyspaces.io")))))))}}]),a}(r.a.Component),qi=Object(ht.a)(Zi,{withTheme:!0})(Object(p.b)((function(e){return{showMobileMenu:e.snShowMobileMenu,showDesktopMenu:e.snShowDesktopMenu,userSession:e.userSession,person:e.person}}),(function(e){return Object(_t.bindActionCreators)({setMobileMenuDisplay:Sr,setLoaderDisplay:Et,toggleMobileMenuDisplay:vr,setUserSession:zc,setPerson:Yn,setPersonGetOtherData:Wn,setImportedSpace:Oc,toggleDesktopMenuDisplay:Mr,setDesktopMenuState:Dr},e)}))(Qi));function $i(e){var t=Object(n.useState)(null),a=Object(c.a)(t,2),s=a[0],o=a[1],i=Object(n.useState)(null),l=Object(c.a)(i,2),p=(l[0],l[1],Object(n.useState)(!1)),u=Object(c.a)(p,2);u[0],u[1];return r.a.createElement("div",{className:"container-fluid register-container"},r.a.createElement(U.a,{container:!0,spacing:1,direction:"row"},r.a.createElement(U.a,{item:!0,xs:12,sm:10},r.a.createElement(ur.a,{id:"firstName",name:"firstName",label:"First Name","aria-setter":o,fullWidth:!0,value:s,autoComplete:"off",helperText:"First Name",onChange:function(e){console.log(e.target)}}))))}a(1231);function el(e){return r.a.createElement(ms.a,Object.assign({elevation:6,variant:"filled"},e))}var tl=function(e){var t=Object(n.useState)(""),a=Object(c.a)(t,2),s=(a[0],a[1]),o=Object(n.useState)(""),i=Object(c.a)(o,2),l=i[0],u=i[1],d=Object(n.useState)(!1),m=Object(c.a)(d,2),h=m[0],y=m[1],g=Object(n.useState)(!1),b=Object(c.a)(g,2),k=b[0],S=b[1],v=Object(n.useRef)(),E=Object(f.g)(),x=Object(p.d)((function(e){return e.userSession})),O=Object(p.d)((function(e){return e.person}));return Object(n.useEffect)((function(){null!=O&&E.push("/upload")}),[]),r.a.createElement("div",{style:{paddingTop:80}},r.a.createElement(zi,null),r.a.createElement("div",{className:"container-fluid main-upload-component"},r.a.createElement("div",{className:"container most-main-div"},r.a.createElement("div",{className:"main-cntner"},r.a.createElement("div",{className:"row main-rw-row-div"},r.a.createElement("div",{className:"col col-xl-6 col-lg-6 col-md-6 col-sm-12 col-12 firstColumn"},r.a.createElement("div",{className:"colum1-title-div"},"Upload Your ",k?"Directory":"Files"),r.a.createElement("div",{className:"col1-dnd-div"},r.a.createElement("div",{className:"d-none"},r.a.createElement(xs,{name:"files",ref:v,directoryMode:k,onUpload:console.log})),r.a.createElement(Ki.a,{filesLimit:100,onDrop:function(e){return v.current.handleDrop(e)},className:"dropZonArea_drop_image",Icon:"none",maxFileSize:21e7,onDelete:function(){s("")},dropzoneText:r.a.createElement("div",null,r.a.createElement("span",{style:{fontSize:12,fontWeight:"bold",color:"gray"}},"Drop Your ",k?"Directory":"Files"," here"))})),r.a.createElement("div",{className:"butn-upld-col1-toggle-div"},r.a.createElement("button",{className:"btn  btn butn-upld-col1",onClick:function(e){return v.current.gridRef.current.click(e)}},r.a.createElement("i",{className:"fa fa-download upld-col1-icon-downld"},"\xa0\xa0\xa0Upload")),r.a.createElement("div",{className:"toggle-switch-col1-btn"},r.a.createElement("div",{className:"custom-control custom-switch"},r.a.createElement("input",{type:"checkbox",className:"custom-control-input",onChange:function(e){return S(e.target.checked)},id:"customSwitches"}),r.a.createElement("label",{className:"custom-control-label",for:"customSwitches"}))))),r.a.createElement("div",{className:"col col-xl-6 col-lg-6 col-md-6 col-sm-12 col-12 secondColumn"},r.a.createElement("div",{className:"colum2-title-div"},"Paste Skylink"),r.a.createElement("div",{className:"colum2-desc-div"},"Paste Your Skylink to hunt your data"),r.a.createElement("div",{className:"colum2-inpt-div"},r.a.createElement("div",{className:"input-group mb-3"},r.a.createElement("input",{type:"text",onChange:function(e){return u(e.target.value)},className:"form-control colum2-input-with-icon","aria-label":"Amount (to the nearest dollar)",placeholder:"Please Enter Skylink to download"}),r.a.createElement("div",{className:"input-group-append cursor-pointer",onClick:function(){try{var e=Object(Zt.parseSkylink)(l);os(e,x)}catch(t){console.log("parsing error"),y(!0)}}},r.a.createElement("span",{className:"input-group-text icon-inpt-colum2"},r.a.createElement("div",{className:"srch_btn_main_div_changed"},r.a.createElement("i",{className:"fa fa-download colum2-icon-dwnload"})))))))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-12 thirdColumn"},"Upon uploading a file , Skynet a 46 byte link called a skylink.",r.a.createElement("br",null),"this link can then be shared with anyone to retrieve the file on any skynet Webportal."))),r.a.createElement(ze.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:h,autoHideDuration:3e3,onClose:function(){return y(!1)},TransitionComponent:"Fade"},r.a.createElement(el,{onClose:function(){return y(!1)},severity:"error"},"Invalid Skylink ! Please enter valid 46 character skylink to Download.")))},al=function(e){return r.a.createElement(d.a,null,r.a.createElement(li,null),r.a.createElement(Rc,null),r.a.createElement(f.d,null,r.a.createElement(f.b,{exact:!0,path:"/"},r.a.createElement(f.a,{to:"/login"})),r.a.createElement(f.b,{path:"/upload",component:Yi}),r.a.createElement(f.b,{path:"/public-upload",component:tl}),r.a.createElement(f.b,{path:"/settings",component:ki}),r.a.createElement(f.b,{path:"/login",component:qi}),r.a.createElement(f.b,{path:"/register",component:ac}),r.a.createElement(f.b,{path:"/apps/:category",component:no}),r.a.createElement(f.b,{path:"/skylinks",component:no}),r.a.createElement(f.b,{path:"/skyapps/:id",component:ac}),r.a.createElement(f.b,{path:"/skyspace/:skyspace",component:no}),r.a.createElement(f.b,{path:"/history",component:Fo}),r.a.createElement(f.b,{path:"/profile",component:$i}),r.a.createElement(f.b,{path:"/public-sharing",component:no}),r.a.createElement(f.b,{path:"/imported-spaces/:sender/:skyspace",component:no}),r.a.createElement(f.b,{path:"/imported-skyapps/:sender/:id",component:ac}),r.a.createElement(f.b,{component:Yi})))};i.b.add(l.d,l.e,l.g,l.b,l.h,l.i,l.a,l.j,l.f,l.c);var nl=function(){var e=Object(n.useState)("#f7f7f7"),t=Object(c.a)(e,2),a=(t[0],t[1],Object(n.useState)("#656d70")),s=Object(c.a)(a,2),o=(s[0],s[1],Object(n.useState)("#ffffff")),i=Object(c.a)(o,2),l=(i[0],i[1],Object(n.useState)(!1)),d=Object(c.a)(l,2),f=d[0],m=d[1],h=Object(p.d)((function(e){return e.snDarkMode}));Object(n.useEffect)((function(){console.log=function(){}}),[]),r.a.useEffect((function(){m(h)}),[h]);var y={light:{primary:{main:"#1ed660",textColor:"#636f70"},headerBgColor:"#ffffff",whiteBgColor:"#ffffff",linksColor:"#656d70",secondary:{main:"#636f70",textColor:"#c5c5c5"},sliderBg:"#ffffff",centerBar:"#ffffff",lightGray:"#f7f7f7",mediumGray:"#c5c5c5",lightGreen:"#daffe7",spacesTabsCount:"#EAEAEA"},dark:{primary:{main:"#1ed660",textColor:"#636f70"},sliderBg:"#141418",centerBar:"#343537",spacesTabsCount:"#000000",headerBgColor:"#1a1b1d",whiteBgColor:"#000000",linksColor:"#ffffff",secondary:{main:"#636f70",textColor:"#c5c5c5"},lightGray:"#1a1b1d",mediumGray:"#c5c5c5",lightGreen:"#daffe7"}},g=Object(pi.a)({palette:y.light}),b=Object(pi.a)({overrides:{MuiDrawer:{root:{backgroundColor:y.dark.whiteBgColor}},MuiPaper:{root:{backgroundColor:y.dark.headerBgColor}},MuiTypography:{root:{color:"#ffffff78 !important"}},MuiFormLabel:{root:{color:"#ffffff78"}},MuiInput:{underline:{"&:before":{borderBottom:"2px solid ".concat(y.dark.linksColor)}}},WAMuiChipInput:{underline:{"&:before":{borderBottom:"2px solid ".concat(y.dark.linksColor)}}},MuiInputBase:{input:{color:y.dark.linksColor}},MuiFormHelperText:{root:{color:y.dark.linksColor}}},palette:y.dark});return r.a.createElement(ui.a,{theme:f?b:g},r.a.createElement(u,null),r.a.createElement("div",null,r.a.createElement(al,{handleDarkMode:function(e){m(e)}})))},rl=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function sl(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(r.a.createElement(p.a,{store:sr},r.a.createElement(nl,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat(".","/service-worker.js");rl?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):sl(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):sl(t,e)}))}}()},334:function(e,t,a){e.exports={wrapperItem:"UploadItem_wrapperItem__3-eZx",leftSide:"UploadItem_leftSide__2BBwy",progressBar:"UploadItem_progressBar__3LgSF",percentage:"UploadItem_percentage__2GEVq"}},446:function(e,t,a){e.exports={wrapper:"UploadProgress_wrapper__1OwwX",uploadFileStatusTitle:"UploadProgress_uploadFileStatusTitle__1gflJ",progressContainer:"UploadProgress_progressContainer__28L0y",closeButton:"UploadProgress_closeButton__bO3xf"}},489:function(e,t){},506:function(e,t){},512:function(e,t){},531:function(e,t,a){e.exports=a.p+"static/media/Sia.7dd07c88.svg"},545:function(e,t,a){"use strict";(function(e){a.d(t,"b",(function(){return m})),a.d(t,"a",(function(){return y}));a(39);var n=a(5),r=a.n(n),s=a(8),o=a(333),c=a.n(o),i=(a(273),a(126),a(231)),l=a.n(i),p=a(206),u=a.n(p),d=null;function f(e){(e=e.replace(/^0x/,"")).length%2!=0&&console.log("WARNING: expecting an even number of characters in the hexString");var t=e.match(/[G-Z\s]/i);t&&console.log("WARNING: found non-hex characters",t);var a=e.match(/[\dA-F]{2}/gi),n=null===a||void 0===a?void 0:a.map((function(e){return parseInt(e,16)})),r=new Uint8Array(n||[]);return console.log(r),r}function m(e,t,a,n){return h.apply(this,arguments)}function h(){return(h=Object(s.a)(r.a.mark((function e(t,a,n,s){var o,c,i,p,m,h,y;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o=f(a),c=f(t),i=l.a.randomBytes(l.a.box.nonceLength),p=d.crypto_sign_ed25519_pk_to_curve25519(o),m=d.crypto_sign_ed25519_sk_to_curve25519(c),h=l.a.box(u.a.decodeUTF8(n),i,p,m),y={version:"v1",ciphertext:u.a.encodeBase64(h),nonce:u.a.encodeBase64(i)},console.log("box: "+y.ciphertext),console.log("nonce: "+y.nonce),console.log("cipherObject"+JSON.stringify(y)),e.abrupt("return",y);case 14:throw e.prev=14,e.t0=e.catch(0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}Object(s.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.ready;case 2:d=c.a;case 3:case"end":return e.stop()}}),e)})))();var y=function(){var e=Object(s.a)(r.a.mark((function e(t,a,n){var s,o,c,i,p,m,h,y,g;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=f(a),o=f(t),c=n,i=u.a.decodeBase64(c.ciphertext),p=u.a.decodeBase64(c.nonce),m=d.crypto_sign_ed25519_sk_to_curve25519(o),h=d.crypto_sign_ed25519_pk_to_curve25519(s),y=l.a.box.open(i,p,h,m),g=y?u.a.encodeUTF8(y):"",console.log("Decrypted: "+g),e.abrupt("return",JSON.parse(g));case 14:throw e.prev=14,e.t0=e.catch(0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,a,n){return e.apply(this,arguments)}}()}).call(this,a(13).Buffer)},601:function(e,t,a){},709:function(e,t){},754:function(e,t,a){},755:function(e,t,a){e.exports=a.p+"static/media/icon.a0153b0e.jpeg"},795:function(e,t,a){e.exports=a.p+"static/media/smLogo.ffb0dfa9.png"},796:function(e,t,a){e.exports=a.p+"static/media/SkySpaces_logo.1f88e98a.png"},811:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return h}));var n=a(5),r=a.n(n),s=a(812),o=a(8),c=a(552),i=a.n(c),l=a(26),p="nameserver",u="https://www.namebase.io",d="",f="",m="https://siasky.net/",h=function(){var t=Object(o.a)(r.a.mark((function t(a,n,o,c){var h,y,g,b,k,S,v,E,x,O,w,C;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Object(s.a)(c),h=e.from("".concat(d,":").concat(f)),y=h.toString("base64"),g="Basic "+y,b=a.substring(0,a.lastIndexOf(".")),k=b?a.substring(a.lastIndexOf(".")+1):b,S=b||k,v=m,console.log(" skynet portal "+v),console.log(" tld "+k+" subdomain "+S),E="","blockchain"!==p){t.next=15;break}E="/api/v0/dns/domains/".concat(k),t.next=24;break;case 15:if("blockchain-advanced"!==p){t.next=19;break}E="/api/v0/dns/domains/".concat(k,"/advanced"),t.next=24;break;case 19:if("nameserver"!==p){t.next=23;break}E="/api/v0/dns/domains/".concat(k,"/nameserver"),t.next=24;break;case 23:throw new Error("Service should be 'blockchain', 'blockchain-advanced' or 'nameserver'");case 24:return x=u+E,O='{"records":[{ "type": "TXT", "host": "'+S+'", "value": "TEST", "ttl": 60 }],"deleteRecords":[]}',t.next=28,new l.SkynetClient(v).uploadFile(n);case 28:return w=t.sent,console.log("uploadedContent"+w.json),C={method:"PUT",body:O,headers:{Authorization:g,Accept:"application/json","Content-Type":"application/json"}},t.abrupt("return",i()(x,C).then((function(e){e.json(),console.log(e.json())})).catch((function(e){return e})));case 32:case"end":return t.stop()}}),t)})));return function(e,a,n,r){return t.apply(this,arguments)}}()}).call(this,a(13).Buffer)},839:function(e,t,a){e.exports=a(1232)},845:function(e,t,a){},851:function(e,t,a){},865:function(e,t){},867:function(e,t){},878:function(e,t){},880:function(e,t){},890:function(e,t){},892:function(e,t){},969:function(e,t){},976:function(e,t){}},[[839,1,2]]]);